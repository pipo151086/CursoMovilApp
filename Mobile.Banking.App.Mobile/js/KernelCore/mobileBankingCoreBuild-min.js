!function(e){var t;"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.ProgressBar=e())}(function(){return function n(a,i,o){function s(r,e){if(!i[r]){if(!a[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(l)return l(r,!0);t=new Error("Cannot find module '"+r+"'");throw t.code="MODULE_NOT_FOUND",t}t=i[r]={exports:{}};a[r][0].call(t.exports,function(e){var t=a[r][1][e];return s(t||e)},t,t.exports,n,a,i,o)}return i[r].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,A,I){!function(){var s,u,o,l,i,c,d,n,p,t,f,E=this||Function("return this")(),h=function(){"use strict";var c,r,d,p,f,a="linear",e=Date.now||function(){return+new Date},h="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:e;function i(){}function o(e,t){for(var r in e)Object.hasOwnProperty.call(e,r)&&t(r)}function s(t,r){return o(r,function(e){t[e]=r[e]}),t}function l(t,r){o(r,function(e){void 0===t[e]&&(t[e]=r[e])})}function y(e,t,r,n,a,i,o){var s,l,u=e<i?0:(e-i)/a;for(s in t)t.hasOwnProperty(s)&&(l="function"==typeof(l=o[s])?l:c[l],t[s]=g(r[s],n[s],l,u));return t}function g(e,t,r,n){return e+(t-e)*r(n)}function m(t,r){var n=C.prototype.filter,a=t._filterArgs;o(n,function(e){void 0!==n[e][r]&&n[e][r].apply(t,a)})}function u(e,t,r,n,a,i,o,s,l,u,c){f=t+r+n,d=Math.min(c||h(),f),p=f<=d,f=n-(f-d),e.isPlaying()&&(p?(l(o,e._attachment,f),e.stop(!0)):(e._scheduleId=u(e._timeoutHandler,1e3/60),m(e,"beforeTween"),d<t+r?y(1,a,i,o,1,1,s):y(d,a,i,o,n,t+r,s),m(e,"afterTween"),l(a,e._attachment,f)))}function v(e,t){var r={},n=typeof t;return o(e,"string"==n||"function"==n?function(e){r[e]=t}:function(e){r[e]||(r[e]=t[e]||a)}),r}function C(e,t){this._currentState=e||{},this._configured=!1,this._scheduleFunction=r,void 0!==t&&this.setConfig(t)}return r="undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame)||setTimeout,C.prototype.tween=function(e){return this._isTweening?this:(void 0===e&&this._configured||this.setConfig(e),this._timestamp=h(),this._start(this.get(),this._attachment),this.resume())},C.prototype.setConfig=function(e){e=e||{},this._configured=!0,this._attachment=e.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=e.delay||0,this._start=e.start||i,this._step=e.step||i,this._finish=e.finish||i,this._duration=e.duration||500,this._currentState=s({},e.from)||this.get(),this._originalState=this.get(),this._targetState=s({},e.to)||this.get();var t=this;this._timeoutHandler=function(){u(t,t._timestamp,t._delay,t._duration,t._currentState,t._originalState,t._targetState,t._easing,t._step,t._scheduleFunction)};var r=this._currentState,n=this._targetState;return l(n,r),this._easing=v(r,e.easing||a),this._filterArgs=[r,this._originalState,n,this._easing],m(this,"tweenCreated"),this},C.prototype.get=function(){return s({},this._currentState)},C.prototype.set=function(e){this._currentState=e},C.prototype.pause=function(){return this._pausedAtTime=h(),this._isPaused=!0,this},C.prototype.resume=function(){return this._isPaused&&(this._timestamp+=h()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},C.prototype.seek=function(e){e=Math.max(e,0);var t=h();return this._timestamp+e===0||(this._timestamp=t-e,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,u(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,t),this.pause())),this},C.prototype.stop=function(e){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=i,(E.cancelAnimationFrame||E.webkitCancelAnimationFrame||E.oCancelAnimationFrame||E.msCancelAnimationFrame||E.mozCancelRequestAnimationFrame||E.clearTimeout)(this._scheduleId),e&&(m(this,"beforeTween"),y(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),m(this,"afterTween"),m(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},C.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},C.prototype.setScheduleFunction=function(e){this._scheduleFunction=e},C.prototype.dispose=function(){for(var e in this)this.hasOwnProperty(e)&&delete this[e]},C.prototype.filter={},c=C.prototype.formula={linear:function(e){return e}},s(C,{now:h,each:o,tweenProps:y,tweenProp:g,applyFilter:m,shallowCopy:s,defaults:l,composeEasingObject:v}),"function"==typeof SHIFTY_DEBUG_NOW&&(E.timeoutHandler=u),"object"==typeof I?A.exports=C:void 0===E.Tweenable&&(E.Tweenable=C),C}();function y(e,t,r,n,a,i){var o,l=0,u=0,c=0,s=0,d=0,p=0;function f(e){return((l*e+u)*e+c)*e}function h(e){return 0<=e?e:0-e}return l=1-(c=3*t)-(u=3*(n-t)-c),s=1-(p=3*r)-(d=3*(a-r)-p),o=function(e,t){var r,n,a,i,o,s;for(a=e,s=0;s<8;s++){if(h(i=f(a)-e)<t)return a;if(h(o=function(e){return(3*l*e+2*u)*e+c}(a))<1e-6)break;a-=i/o}if(n=1,(a=e)<(r=0))return r;if(n<a)return n;for(;r<n;){if(h((i=f(a))-e)<t)return a;i<e?r=a:n=a,a=.5*(n-r)+r}return a}(e,o=1/(200*i)),((s*o+d)*o+p)*o}function a(r){u.each(r,function(e){var t=r[e];"string"==typeof t&&t.match(n)&&(r[e]=m(n,t,g))})}function g(e){e=function(e){3===(e=e.replace(/#/,"")).length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);return t[0]=r(e.substr(0,2)),t[1]=r(e.substr(2,2)),t[2]=r(e.substr(4,2)),t}(e);return"rgb("+e[0]+","+e[1]+","+e[2]+")"}function r(e){return parseInt(e,16)}function m(e,t,r){var n=t.match(e),a=t.replace(e,p);if(n)for(var i,o=n.length,s=0;s<o;s++)i=n.shift(),a=a.replace(p,r(i));return a}function v(e){for(var t=e.match(i),r=t.length,n=e.match(d)[0],a=0;a<r;a++)n+=parseInt(t[a],10)+",";return n=n.slice(0,-1)+")"}function C(a){var i={};return u.each(a,function(e){var t,r,n=a[e];"string"==typeof n&&(t=b(n),i[e]={formatString:((n=(r=n).match(l))?1!==n.length&&!r[0].match(o)||n.unshift(""):n=["",""],n.join(p)),chunkNames:function(e,t){for(var r=[],n=e.length,a=0;a<n;a++)r.push("_"+t+"_"+a);return r}(t,e)})}),i}function S(a,i){u.each(i,function(e){for(var t=b(a[e]),r=t.length,n=0;n<r;n++)a[i[e].chunkNames[n]]=+t[n];delete a[e]})}function T(n,a){u.each(a,function(e){var t=n[e],r=function(e,t){f.length=0;for(var r=t.length,n=0;n<r;n++)f.push(e[t[n]]);return f}(function(e,t){for(var r,n={},a=t.length,i=0;i<a;i++)r=t[i],n[r]=e[r],delete e[r];return n}(n,a[e].chunkNames),a[e].chunkNames),t=function(e,t){for(var r=e,n=t.length,a=0;a<n;a++)r=r.replace(p,+t[a].toFixed(4));return r}(a[e].formatString,r);n[e]=m(c,t,v)})}function b(e){return e.match(i)}h.shallowCopy(h.prototype.formula,{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){return e*e*(2.70158*e-1.70158)},easeOutBack:function(e){return(e-=1)*e*(2.70158*e+1.70158)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},swingFrom:function(e){return e*e*(2.70158*e-1.70158)},swingTo:function(e){return--e*e*(2.70158*e+1.70158)+1},bounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?2-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}}),h.setBezierFunction=function(e,t,r,n,a){var i,o,s,l,u=(i=t,o=r,s=n,l=a,function(e){return y(e,i,o,s,l,1)});return u.displayName=e,u.x1=t,u.y1=r,u.x2=n,u.y2=a,h.prototype.formula[e]=u},h.unsetBezierFunction=function(e){delete h.prototype.formula[e]},(s=new h)._filterArgs=[],h.interpolate=function(e,t,r,n,a){var i=h.shallowCopy({},e),o=a||0,a=h.composeEasingObject(e,n||"linear");s.set({});n=s._filterArgs;n.length=0,n[0]=i,n[1]=e,n[2]=t,n[3]=a,h.applyFilter(s,"tweenCreated"),h.applyFilter(s,"beforeTween");e=e,i=i,t=t,r=r,a=a,o=o,a=h.tweenProps(r,i,e,t,1,o,a);return h.applyFilter(s,"afterTween"),a},u=h,o=/(\d|\-|\.)/,l=/([^\-0-9\.]+)/g,i=/[0-9.\-]+/g,c=new RegExp("rgb\\("+i.source+/,\s*/.source+i.source+/,\s*/.source+i.source+"\\)","g"),d=/^.*\(/,n=/#([0-9]|[a-f]){3,6}/gi,p="VAL",t=[],f=[],u.prototype.filter.token={tweenCreated:function(e,t,r,n){a(e),a(t),a(r),this._tokenData=C(e)},beforeTween:function(e,t,r,n){var s,l;s=n,l=this._tokenData,u.each(l,function(e){var t=l[e].chunkNames,r=t.length,n=s[e];if("string"==typeof n)for(var a=n.split(" "),i=a[a.length-1],o=0;o<r;o++)s[t[o]]=a[o]||i;else for(o=0;o<r;o++)s[t[o]]=n;delete s[e]}),S(e,this._tokenData),S(t,this._tokenData),S(r,this._tokenData)},afterTween:function(e,t,r,n){var o,s;T(e,this._tokenData),T(t,this._tokenData),T(r,this._tokenData),o=n,s=this._tokenData,u.each(s,function(e){var t=s[e].chunkNames,r=t.length,n=o[t[0]];if("string"==typeof n){for(var a="",i=0;i<r;i++)a+=" "+o[t[i]],delete o[t[i]];o[e]=a.substr(1)}else o[e]=n})}}}.call(null)},{}],2:[function(e,t,r){var n=e("./shape"),a=e("./utils"),e=function(e,t){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,n.apply(this,arguments)};((e.prototype=new n).constructor=e).prototype._pathString=function(e){var t=e.strokeWidth,t=50-(t=e.trailWidth&&e.trailWidth>e.strokeWidth?e.trailWidth:t)/2;return a.render(this._pathTemplate,{radius:t,"2radius":2*t})},e.prototype._trailString=function(e){return this._pathString(e)},t.exports=e},{"./shape":7,"./utils":8}],3:[function(e,t,r){var n=e("./shape"),a=e("./utils"),e=function(e,t){this._pathTemplate="M 0,{center} L 100,{center}",n.apply(this,arguments)};((e.prototype=new n).constructor=e).prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 "+t.strokeWidth),e.setAttribute("preserveAspectRatio","none")},e.prototype._pathString=function(e){return a.render(this._pathTemplate,{center:e.strokeWidth/2})},e.prototype._trailString=function(e){return this._pathString(e)},t.exports=e},{"./shape":7,"./utils":8}],4:[function(e,t,r){t.exports={Line:e("./line"),Circle:e("./circle"),SemiCircle:e("./semicircle"),Path:e("./path"),Shape:e("./shape"),utils:e("./utils")}},{"./circle":2,"./line":3,"./path":5,"./semicircle":6,"./shape":7,"./utils":8}],5:[function(e,t,r){var s=e("shifty"),l=e("./utils"),n={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},e=function(e,t){t=l.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},t),e=l.isString(e)?document.querySelector(e):e,this.path=e,this._opts=t,this._tweenable=null;t=this.path.getTotalLength();this.path.style.strokeDasharray=t+" "+t,this.set(0)};e.prototype.value=function(){var e=this._getComputedDashOffset(),t=this.path.getTotalLength();return parseFloat((1-e/t).toFixed(6),10)},e.prototype.set=function(e){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(e);var t,r=this._opts.step;l.isFunction(r)&&(t=this._easing(this._opts.easing),r(this._calculateTo(e,t),this._opts.shape||this,this._opts.attachment))},e.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},e.prototype.animate=function(e,r,t){l.isFunction(r=r||{})&&(t=r,r={});var n=l.extend({},r),a=l.extend({},this._opts);r=l.extend(a,r);var i=this._easing(r.easing),a=this._resolveFromAndTo(e,i,n);this.stop(),this.path.getBoundingClientRect();var n=this._getComputedDashOffset(),e=this._progressToOffset(e),o=this;this._tweenable=new s,this._tweenable.tween({from:l.extend({offset:n},a.from),to:l.extend({offset:e},a.to),duration:r.duration,easing:i,step:function(e){o.path.style.strokeDashoffset=e.offset;var t=r.shape||o;r.step(e,t,r.attachment)},finish:function(e){l.isFunction(t)&&t()}})},e.prototype._getComputedDashOffset=function(){var e=window.getComputedStyle(this.path,null);return parseFloat(e.getPropertyValue("stroke-dashoffset"),10)},e.prototype._progressToOffset=function(e){var t=this.path.getTotalLength();return t-e*t},e.prototype._resolveFromAndTo=function(e,t,r){return r.from&&r.to?{from:r.from,to:r.to}:{from:this._calculateFrom(t),to:this._calculateTo(e,t)}},e.prototype._calculateFrom=function(e){return s.interpolate(this._opts.from,this._opts.to,this.value(),e)},e.prototype._calculateTo=function(e,t){return s.interpolate(this._opts.from,this._opts.to,e,t)},e.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable=null)},e.prototype._easing=function(e){return n.hasOwnProperty(e)?n[e]:e},t.exports=e},{"./utils":8,shifty:1}],6:[function(e,t,r){var n=e("./shape"),a=e("./circle"),i=e("./utils"),e=function(e,t){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,n.apply(this,arguments)};((e.prototype=new n).constructor=e).prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 50")},e.prototype._initializeTextContainer=function(e,t,r){e.text.style&&(r.style.top="auto",r.style.bottom="0",e.text.alignToBottom?i.setStyle(r,"transform","translate(-50%, 0)"):i.setStyle(r,"transform","translate(-50%, 50%)"))},e.prototype._pathString=a.prototype._pathString,e.prototype._trailString=a.prototype._trailString,t.exports=e},{"./circle":2,"./shape":7,"./utils":8}],7:[function(e,t,r){var i=e("./path"),o=e("./utils"),n="Object is destroyed",e=function e(t,r){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=o.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:"",className:"progressbar-text"},svgStyle:{display:"block",width:"100%"}},r,!0),o.isObject(r)&&void 0!==r.svgStyle&&(this._opts.svgStyle=r.svgStyle),o.isObject(r)&&o.isObject(r.text)&&void 0!==r.text.style&&(this._opts.text.style=r.text.style);var n=this._createSvgView(this._opts),a=o.isString(t)?document.querySelector(t):t;if(!a)throw new Error("Container does not exist: "+t);this._container=a,this._container.appendChild(n.svg),this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&o.setStyles(n.svg,this._opts.svgStyle),this.svg=n.svg,this.path=n.path,this.trail=n.trail,this.text=null;a=o.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new i(n.path,a),o.isObject(this._opts.text)&&this._opts.text.value&&this.setText(this._opts.text.value)}};e.prototype.animate=function(e,t,r){if(null===this._progressPath)throw new Error(n);this._progressPath.animate(e,t,r)},e.prototype.stop=function(){if(null===this._progressPath)throw new Error(n);void 0!==this._progressPath&&this._progressPath.stop()},e.prototype.destroy=function(){if(null===this._progressPath)throw new Error(n);this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,(this._progressPath=null)!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},e.prototype.set=function(e){if(null===this._progressPath)throw new Error(n);this._progressPath.set(e)},e.prototype.value=function(){if(null===this._progressPath)throw new Error(n);return void 0===this._progressPath?0:this._progressPath.value()},e.prototype.setText=function(e){if(null===this._progressPath)throw new Error(n);null===this.text&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),o.isObject(e)?(o.removeChildren(this.text),this.text.appendChild(e)):this.text.innerHTML=e},e.prototype._createSvgView=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(t,e);var r=null;(e.trailColor||e.trailWidth)&&(r=this._createTrail(e),t.appendChild(r));e=this._createPath(e);return t.appendChild(e),{svg:t,path:e,trail:r}},e.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 100")},e.prototype._createPath=function(e){var t=this._pathString(e);return this._createPathElement(t,e)},e.prototype._createTrail=function(e){var t=this._trailString(e),e=o.extend({},e);return e.trailColor||(e.trailColor="#eee"),e.trailWidth||(e.trailWidth=e.strokeWidth),e.color=e.trailColor,e.strokeWidth=e.trailWidth,e.fill=null,this._createPathElement(t,e)},e.prototype._createPathElement=function(e,t){var r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",e),r.setAttribute("stroke",t.color),r.setAttribute("stroke-width",t.strokeWidth),t.fill?r.setAttribute("fill",t.fill):r.setAttribute("fill-opacity","0"),r},e.prototype._createTextContainer=function(e,t){var r=document.createElement("div");r.className=e.text.className;var n=e.text.style;return n&&(e.text.autoStyleContainer&&(t.style.position="relative"),o.setStyles(r,n),n.color||(r.style.color=e.color)),this._initializeTextContainer(e,t,r),r},e.prototype._initializeTextContainer=function(e,t,r){},e.prototype._pathString=function(e){throw new Error("Override this function for each progress bar")},e.prototype._trailString=function(e){throw new Error("Override this function for each progress bar")},e.prototype._warnContainerAspectRatio=function(e){var t,r;this.containerAspectRatio&&(t=window.getComputedStyle(e,null),r=parseFloat(t.getPropertyValue("width"),10),e=parseFloat(t.getPropertyValue("height"),10),o.floatEquals(this.containerAspectRatio,r/e)||(console.warn("Incorrect aspect ratio of container",this._container,"detected:",t.getPropertyValue("width")+"(width)","/",t.getPropertyValue("height")+"(height)","=",r/e),console.warn("Aspect ratio of should be",this.containerAspectRatio)))},t.exports=e},{"./path":5,"./utils":8}],8:[function(e,t,r){var i="Webkit Moz O ms".split(" ");function n(e,t,r){for(var n=e.style,a=0;a<i.length;++a)n[i[a]+o(t)]=r;n[t]=r}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e){return t=e,"[object Array]"!==Object.prototype.toString.call(t)&&("object"==typeof e&&!!e);var t}function a(e,t){for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)}t.exports={extend:function e(t,r,n){for(var a in t=t||{},n=n||!1,r=r||{}){var i,o;r.hasOwnProperty(a)&&(i=t[a],o=r[a],n&&s(i)&&s(o)?t[a]=e(i,o,n):t[a]=o)}return t},render:function(e,t){var r,n,a,i=e;for(r in t)t.hasOwnProperty(r)&&(n=t[r],a=new RegExp("\\{"+r+"\\}","g"),i=i.replace(a,n));return i},setStyle:n,setStyles:function(r,e){a(e,function(e,t){null!=e&&(s(e)&&!0===e.prefix?n(r,t,e.value):r.style[t]=e)})},capitalize:o,isString:function(e){return"string"==typeof e||e instanceof String},isFunction:function(e){return"function"==typeof e},isObject:s,forEachObject:a,floatEquals:function(e,t){return Math.abs(e-t)<.001},removeChildren:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}}},{}]},{},[4])(4)}),Date.CultureInfo={name:"es-EC",englishName:"Spanish (Ecuador)",nativeName:"Español (Ecuador)",dayNames:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],abbreviatedDayNames:["dom","lun","mar","mié","jue","vie","sáb"],shortestDayNames:["do","lu","ma","mi","ju","vi","sá"],firstLetterDayNames:["d","l","m","m","j","v","s"],monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],abbreviatedMonthNames:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],amDesignator:"",pmDesignator:"",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd/MM/yyyy",longDate:"dddd, dd' de 'MMMM' de 'yyyy",shortTime:"H:mm",longTime:"H:mm:ss",fullDateTime:"dddd, dd' de 'MMMM' de 'yyyy H:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM' de 'yyyy"},regexPatterns:{jan:/^ene(ro)?/i,feb:/^feb(rero)?/i,mar:/^mar(zo)?/i,apr:/^abr(il)?/i,may:/^may(o)?/i,jun:/^jun(io)?/i,jul:/^jul(io)?/i,aug:/^ago(sto)?/i,sep:/^sep(tiembre)?/i,oct:/^oct(ubre)?/i,nov:/^nov(iembre)?/i,dec:/^dic(iembre)?/i,sun:/^do(m(ingo)?)?/i,mon:/^lu(n(es)?)?/i,tue:/^ma(r(tes)?)?/i,wed:/^mi(é(rcoles)?)?/i,thu:/^ju(e(ves)?)?/i,fri:/^vi(e(rnes)?)?/i,sat:/^sá(b(ado)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){function n(e,t){return("000"+e).slice(-1*(t=t||2))}var i,o,s,a=Date,e=a.prototype,l=a.CultureInfo;e.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},e.setTimeToNow=function(){var e=new Date;return this.setHours(e.getHours()),this.setMinutes(e.getMinutes()),this.setSeconds(e.getSeconds()),this.setMilliseconds(e.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(e,t){if(isNaN(e)||isNaN(t))throw new Error(e+" - "+t);if(e instanceof Date&&t instanceof Date)return e<t?-1:t<e?1:0;throw new TypeError(e+" - "+t)},a.equals=function(e,t){return 0===e.compareTo(t)},a.getDayNumberFromName=function(e){for(var t=l.dayNames,r=l.abbreviatedDayNames,n=l.shortestDayNames,a=e.toLowerCase(),i=0;i<t.length;i++)if(t[i].toLowerCase()==a||r[i].toLowerCase()==a||n[i].toLowerCase()==a)return i;return-1},a.getMonthNumberFromName=function(e){for(var t=l.monthNames,r=l.abbreviatedMonthNames,n=e.toLowerCase(),a=0;a<t.length;a++)if(t[a].toLowerCase()==n||r[a].toLowerCase()==n)return a;return-1},a.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},a.getDaysInMonth=function(e,t){return[31,a.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},a.getTimezoneAbbreviation=function(e){for(var t=l.timezones,r=0;r<t.length;r++)if(t[r].offset===e)return t[r].name;return null},a.getTimezoneOffset=function(e){for(var t=l.timezones,r=0;r<t.length;r++)if(t[r].name===e.toUpperCase())return t[r].offset;return null},e.clone=function(){return new Date(this.getTime())},e.compareTo=function(e){return Date.compare(this,e)},e.equals=function(e){return Date.equals(this,e||new Date)},e.between=function(e,t){return this.getTime()>=e.getTime()&&this.getTime()<=t.getTime()},e.isAfter=function(e){return 1===this.compareTo(e||new Date)},e.isBefore=function(e){return-1===this.compareTo(e||new Date)},e.isToday=function(){return this.isSameDay(new Date)},e.isSameDay=function(e){return this.clone().clearTime().equals(e.clone().clearTime())},e.addMilliseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+e),this},e.addSeconds=function(e){return this.addMilliseconds(1e3*e)},e.addMinutes=function(e){return this.addMilliseconds(6e4*e)},e.addHours=function(e){return this.addMilliseconds(36e5*e)},e.addDays=function(e){return this.setDate(this.getDate()+e),this},e.addWeeks=function(e){return this.addDays(7*e)},e.addMonths=function(e){var t=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+e),this.setDate(Math.min(t,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},e.addYears=function(e){return this.addMonths(12*e)},e.add=function(e){if("number"==typeof e)return this._orient=e,this;return e.milliseconds&&this.addMilliseconds(e.milliseconds),e.seconds&&this.addSeconds(e.seconds),e.minutes&&this.addMinutes(e.minutes),e.hours&&this.addHours(e.hours),e.weeks&&this.addWeeks(e.weeks),e.months&&this.addMonths(e.months),e.years&&this.addYears(e.years),e.days&&this.addDays(e.days),this},e.getWeek=function(){var e,t,r,n,a;return i=i||this.getFullYear(),o=o||this.getMonth()+1,s=s||this.getDate(),t=o<=2?(a=(r=((e=i-1)/4|0)-(e/100|0)+(e/400|0))-(((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0)),n=0,s-1+31*(o-1)):(n=(a=(r=((e=i)/4|0)-(e/100|0)+(e/400|0))-(((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0)))+1,s+(153*(o-3)+2)/5+58+a),i=o=s=null,(n=t+3-(t+(r=(e+r)%7)-n)%7|0)<0?53-((r-a)/5|0):364+a<n?1:1+(n/7|0)},e.getISOWeek=function(){return i=this.getUTCFullYear(),o=this.getUTCMonth()+1,s=this.getUTCDate(),n(this.getWeek())},e.setWeek=function(e){return this.moveToDayOfWeek(1).addWeeks(e-this.getWeek())},a._validate=function(e,t,r,n){if(void 0===e)return!1;if("number"!=typeof e)throw new TypeError(e+" is not a Number.");if(e<t||r<e)throw new RangeError(e+" is not a valid value for "+n+".");return!0},a.validateMillisecond=function(e){return a._validate(e,0,999,"millisecond")},a.validateSecond=function(e){return a._validate(e,0,59,"second")},a.validateMinute=function(e){return a._validate(e,0,59,"minute")},a.validateHour=function(e){return a._validate(e,0,23,"hour")},a.validateDay=function(e,t,r){return a._validate(e,1,a.getDaysInMonth(t,r),"day")},a.validateMonth=function(e){return a._validate(e,0,11,"month")},a.validateYear=function(e){return a._validate(e,0,9999,"year")},e.set=function(e){return a.validateMillisecond(e.millisecond)&&this.addMilliseconds(e.millisecond-this.getMilliseconds()),a.validateSecond(e.second)&&this.addSeconds(e.second-this.getSeconds()),a.validateMinute(e.minute)&&this.addMinutes(e.minute-this.getMinutes()),a.validateHour(e.hour)&&this.addHours(e.hour-this.getHours()),a.validateMonth(e.month)&&this.addMonths(e.month-this.getMonth()),a.validateYear(e.year)&&this.addYears(e.year-this.getFullYear()),a.validateDay(e.day,this.getFullYear(),this.getMonth())&&this.addDays(e.day-this.getDate()),e.timezone&&this.setTimezone(e.timezone),e.timezoneOffset&&this.setTimezoneOffset(e.timezoneOffset),e.week&&a._validate(e.week,0,53,"week")&&this.setWeek(e.week),this},e.moveToFirstDayOfMonth=function(){return this.set({day:1})},e.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},e.moveToNthOccurrence=function(e,t){var r=0;if(0<t)r=t-1;else if(-1===t)return this.moveToLastDayOfMonth(),this.getDay()!==e&&this.moveToDayOfWeek(e,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(e,1).addWeeks(r)},e.moveToDayOfWeek=function(e,t){e=(e-this.getDay()+7*(t||1))%7;return this.addDays(0===e?e+=7*(t||1):e)},e.moveToMonth=function(e,t){e=(e-this.getMonth()+12*(t||1))%12;return this.addMonths(0===e?e+=12*(t||1):e)},e.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},e.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},e.setTimezoneOffset=function(e){var t=this.getTimezoneOffset(),e=-6*Number(e)/10;return this.addMinutes(e-t)},e.setTimezone=function(e){return this.setTimezoneOffset(a.getTimezoneOffset(e))},e.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},e.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},e.getUTCOffset=function(){var e,t=-10*this.getTimezoneOffset()/6;return t<0?(e=(t-1e4).toString()).charAt(0)+e.substr(2):"+"+(e=(1e4+t).toString()).substr(1)},e.getElapsed=function(e){return(e||new Date)-this},e.toISOString||(e.toISOString=function(){function e(e){return e<10?"0"+e:e}return'"'+this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+'Z"'}),e._toString=e.toString,e.toString=function(e){var t=this;if(e&&1==e.length){var r=l.formatPatterns;switch(t.t=t.toString,e){case"d":return t.t(r.shortDate);case"D":return t.t(r.longDate);case"F":return t.t(r.fullDateTime);case"m":return t.t(r.monthDay);case"r":return t.t(r.rfc1123);case"s":return t.t(r.sortableDateTime);case"t":return t.t(r.shortTime);case"T":return t.t(r.longTime);case"u":return t.t(r.universalSortableDateTime);case"y":return t.t(r.yearMonth)}}return e?e.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(e){if("\\"===e.charAt(0))return e.replace("\\","");switch(t.h=t.getHours,e){case"hh":return n(t.h()<13?0===t.h()?12:t.h():t.h()-12);case"h":return t.h()<13?0===t.h()?12:t.h():t.h()-12;case"HH":return n(t.h());case"H":return t.h();case"mm":return n(t.getMinutes());case"m":return t.getMinutes();case"ss":return n(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return n(t.getFullYear(),4);case"yy":return n(t.getFullYear());case"dddd":return l.dayNames[t.getDay()];case"ddd":return l.abbreviatedDayNames[t.getDay()];case"dd":return n(t.getDate());case"d":return t.getDate();case"MMMM":return l.monthNames[t.getMonth()];case"MMM":return l.abbreviatedMonthNames[t.getMonth()];case"MM":return n(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return(t.h()<12?l.amDesignator:l.pmDesignator).substring(0,1);case"tt":return t.h()<12?l.amDesignator:l.pmDesignator;case"S":return function(e){switch(+e){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}}(t.getDate());default:return e}}):this._toString()}}(),function(){var n=Date,e=n.prototype,a=n.CultureInfo,t=Number.prototype;e._orient=1,e._nth=null,e._is=!1,e._same=!1,e._isSecond=!1,t._dateElement="day",e.next=function(){return this._orient=1,this},n.next=function(){return n.today().next()},e.last=e.prev=e.previous=function(){return this._orient=-1,this},n.last=n.prev=n.previous=function(){return n.today().last()},e.is=function(){return this._is=!0,this},e.same=function(){return this._same=!0,this._isSecond=!1,this},e.today=function(){return this.same().day()},e.weekday=function(){return!!this._is&&(this._is=!1,!this.is().sat()&&!this.is().sun())},e.at=function(e){return"string"==typeof e?n.parse(this.toString("d")+" "+e):this.set(e)},t.fromNow=t.after=function(e){var t={};return t[this._dateElement]=this,(e?e.clone():new Date).add(t)},t.ago=t.before=function(e){var t={};return t[this._dateElement]=-1*this,(e?e.clone():new Date).add(t)};var r,i="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),o="january february march april may june july august september october november december".split(/\s/),s="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),l="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),u="final first second third fourth fifth".split(/\s/);e.toObject=function(){for(var e={},t=0;t<s.length;t++)e[s[t].toLowerCase()]=this["get"+l[t]]();return e},n.fromObject=function(e){return e.week=null,Date.today().set(e)};for(var c=0;c<i.length;c++)n[i[c].toUpperCase()]=n[i[c].toUpperCase().substring(0,3)]=c,n[i[c]]=n[i[c].substring(0,3)]=function(r){return function(){var e=n.today(),t=r-e.getDay();return 0===r&&1===a.firstDayOfWeek&&0!==e.getDay()&&(t+=7),e.addDays(t)}}(c),e[i[c]]=e[i[c].substring(0,3)]=function(r){return function(){if(this._is)return this._is=!1,this.getDay()==r;if(null===this._nth)return this.moveToDayOfWeek(r,this._orient);this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var e=this._nth;this._nth=null;var t=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(r,e),t<this)throw new RangeError(n.getDayName(r)+" does not occur "+e+" times in the month of "+n.getMonthName(t.getMonth())+" "+t.getFullYear()+".");return this}}(c);for(var d=0;d<o.length;d++)n[o[d].toUpperCase()]=n[o[d].toUpperCase().substring(0,3)]=d,n[o[d]]=n[o[d].substring(0,3)]=function(e){return function(){return n.today().set({month:e,day:1})}}(d),e[o[d]]=e[o[d].substring(0,3)]=function(e){return function(){return this._is?(this._is=!1,this.getMonth()===e):this.moveToMonth(e,this._orient)}}(d);function p(i){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var e,t=this.toObject(),r=(arguments[0]||new Date).toObject(),n=i.toLowerCase(),a=s.length-1;-1<a;a--){if(t[e=s[a].toLowerCase()]!=r[e])return!1;if(n==e)break}return!0}return"s"!=i.substring(i.length-1)&&(i+="s"),this["add"+i](this._orient)}}for(var f=0;f<s.length;f++)e[r=s[f].toLowerCase()]=e[r+"s"]=p(s[f]),t[r]=t[r+"s"]=function(e){return function(){return this._dateElement=e,this}}(r);e._ss=p("Second");function h(t){return function(e){return this._same?this._ss(e):e||0===e?this.moveToNthOccurrence(e,t):2===(this._nth=t)&&null==e?(this._isSecond=!0,this.addSeconds(this._orient)):this}}for(var y=0;y<u.length;y++)e[u[y]]=h(0===y?-1:y)}(),function(){Date.Parsing={Exception:function(e){this.message="Parse error at '"+e.substring(0,10)+" ...'"}};for(var f=Date.Parsing,h=f.Operators={rtoken:function(r){return function(e){var t=e.match(r);if(t)return[t[0],e.substring(t[0].length)];throw new f.Exception(e)}},token:function(e){return function(e){return h.rtoken(new RegExp("^s*"+e+"s*"))(e)}},stoken:function(e){return h.rtoken(new RegExp("^"+e))},until:function(e){return function(t){for(var r=[],n=null;t.length;){try{n=e.call(this,t)}catch(e){r.push(n[0]),t=n[1];continue}break}return[r,t]}},many:function(n){return function(t){for(var r=[],e=null;t.length;){try{e=n.call(this,t)}catch(e){return[r,t]}r.push(e[0]),t=e[1]}return[r,t]}},optional:function(r){return function(t){var e=null;try{e=r.call(this,t)}catch(e){return[null,t]}return[e[0],e[1]]}},not:function(e){return function(t){try{e.call(this,t)}catch(e){return[null,t]}throw new f.Exception(t)}},ignore:function(t){return t?function(e){return[null,t.call(this,e)[1]]}:null},product:function(){for(var e=arguments[0],t=Array.prototype.slice.call(arguments,1),r=[],n=0;n<e.length;n++)r.push(h.each(e[n],t));return r},cache:function(e){var r={},n=null;return function(t){try{n=r[t]=r[t]||e.call(this,t)}catch(e){n=r[t]=e}if(n instanceof f.Exception)throw n;return n}},any:function(){var n=arguments;return function(e){for(var t=null,r=0;r<n.length;r++)if(null!=n[r]){try{t=n[r].call(this,e)}catch(e){t=null}if(t)return t}throw new f.Exception(e)}},each:function(){var a=arguments;return function(t){for(var e=[],r=null,n=0;n<a.length;n++)if(null!=a[n]){try{r=a[n].call(this,t)}catch(e){throw new f.Exception(t)}e.push(r[0]),t=r[1]}return[e,t]}},all:function(){var e=e;return e.each(e.optional(arguments))},sequence:function(i,o,s){return o=o||h.rtoken(/^\s*/),s=s||null,1==i.length?i[0]:function(e){for(var t=null,r=null,n=[],a=0;a<i.length;a++){try{t=i[a].call(this,e)}catch(e){break}n.push(t[0]);try{r=o.call(this,t[1])}catch(e){r=null;break}e=r[1]}if(!t)throw new f.Exception(e);if(r)throw new f.Exception(r[1]);if(s)try{t=s.call(this,t[1])}catch(e){throw new f.Exception(t[1])}return[n,t?t[1]:e]}},between:function(e,t,n){n=n||e;var a=h.each(h.ignore(e),t,h.ignore(n));return function(e){e=a.call(this,e);return[[e[0][0],r[0][2]],e[1]]}},list:function(e,t,r){return t=t||h.rtoken(/^\s*/),r=r||null,e instanceof Array?h.each(h.product(e.slice(0,-1),h.ignore(t)),e.slice(-1),h.ignore(r)):h.each(h.many(h.each(e,h.ignore(t))),px,h.ignore(r))},set:function(c,d,p){return d=d||h.rtoken(/^\s*/),p=p||null,function(e){for(var t,r=null,n=null,a=null,i=[[],e],o=!1,s=0;s<c.length;s++){r=n=null,o=1==c.length;try{r=c[s].call(this,e)}catch(e){continue}if(a=[[r[0]],r[1]],0<r[1].length&&!o)try{n=d.call(this,r[1])}catch(e){o=!0}else o=!0;if(!(o=!o&&0===n[1].length?!0:o)){for(var l=[],u=0;u<c.length;u++)s!=u&&l.push(c[u]);0<(t=h.set(l,d).call(this,n[1]))[0].length&&(a[0]=a[0].concat(t[0]),a[1]=t[1])}if(0===(i=a[1].length<i[1].length?a:i)[1].length)break}if(0===i[0].length)return i;if(p){try{n=p.call(this,i[1])}catch(e){throw new f.Exception(i[1])}i[1]=n[1]}return i}},forward:function(t,r){return function(e){return t[r].call(this,e)}},replace:function(t,r){return function(e){e=t.call(this,e);return[r,e[1]]}},process:function(t,r){return function(e){e=t.call(this,e);return[r.call(this,e[0]),e[1]]}},min:function(r,n){return function(e){var t=n.call(this,e);if(t[0].length<r)throw new f.Exception(e);return t}}},e="optional not ignore cache".split(/\s/),t=0;t<e.length;t++)h[e[t]]=function(a){return function(){var e=null,t=[];if(1<arguments.length?e=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(e=arguments[0]),!e)return a.apply(null,arguments);var r=0,n=e.shift();return r<n.length?(e.unshift(n[r]),t.push(a.apply(null,e)),e.shift(),t):void 0}}(h[e[t]]);for(var n="each any all".split(/\s/),a=0;a<n.length;a++)h[n[a]]=function(e){return function(){return arguments[0]instanceof Array?e.apply(null,arguments[0]):e.apply(null,arguments)}}(h[n[a]])}(),function(){var l=Date,o=(l.prototype,l.CultureInfo),u=function(e){for(var t=[],r=0;r<e.length;r++)e[r]instanceof Array?t=t.concat(u(e[r])):e[r]&&t.push(e[r]);return t};l.Grammar={},l.Translator={hour:function(e){return function(){this.hour=Number(e)}},minute:function(e){return function(){this.minute=Number(e)}},second:function(e){return function(){this.second=Number(e)}},meridian:function(e){return function(){this.meridian=e.slice(0,1).toLowerCase()}},timezone:function(t){return function(){var e=t.replace(/[^\d\+\-]/g,"");e.length?this.timezoneOffset=Number(e):this.timezone=t.toLowerCase()}},day:function(e){var t=e[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(e){return function(){this.month=3==e.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(e)/4:Number(e)-1}},year:function(t){return function(){var e=Number(t);this.year=2<t.length?e:e+(e+2e3<o.twoDigitYearMax?2e3:1900)}},rday:function(e){return function(){switch(e){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(e){e=e instanceof Array?e:[e];for(var t=0;t<e.length;t++)e[t]&&e[t].call(this);var r=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=r.getDate()),this.year||(this.year=r.getFullYear()),this.month||0===this.month||(this.month=r.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>l.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?r.set({timezone:this.timezone}):this.timezoneOffset&&r.set({timezoneOffset:this.timezoneOffset}),r},finish:function(e){if(0===(e=e instanceof Array?u(e):[e]).length)return null;for(var t=0;t<e.length;t++)"function"==typeof e[t]&&e[t].call(this);var r=l.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(r=new Date);var n,a,i,o=!!(this.days&&null!==this.days||this.orient||this.operator),s="past"==this.orient||"subtract"==this.operator?-1:1;return this.now||-1=="hour minute second".indexOf(this.unit)||r.setTimeToNow(),!this.month&&0!==this.month||-1=="year day hour minute second".indexOf(this.unit)||(this.value=this.month+1,o=!(this.month=null)),o||!this.weekday||this.day||this.days||(i=Date[this.weekday](),this.day=i.getDate(),this.month||(this.month=i.getMonth()),this.year=i.getFullYear()),o&&this.weekday&&"month"!=this.unit&&(this.unit="day",n=l.getDayNumberFromName(this.weekday)-r.getDay(),a=7,this.days=n?(n+s*a)%a:s*a),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=+this.value),this.month&&!this.day&&this.value&&(r.set({day:+this.value}),o||(this.day=+this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,o=!0),o&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",n=this.month-r.getMonth(),a=12,this.months=n?(n+s*a)%a:s*a,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*s:null!=this[this.unit+"s"]&&null==this.operator||(this.value||(this.value=1),this[this.unit+"s"]=this.value*s),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),!this.weekday||this.day||this.days||(i=Date[this.weekday](),this.day=i.getDate(),i.getMonth()!==r.getMonth()&&(this.month=i.getMonth())),!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(o&&this.timezone&&this.day&&this.days&&(this.day=this.days),o?r.add(this):r.set(this)):Date.today().setWeek(this.value)}};var e,s=l.Parsing.Operators,r=l.Grammar,t=l.Translator;r.datePartDelimiter=s.rtoken(/^([\s\-\.\,\/\x27]+)/),r.timePartDelimiter=s.stoken(":"),r.whiteSpace=s.rtoken(/^\s*/),r.generalDelimiter=s.rtoken(/^(([\s\,]|at|@|on)+)/);var c={};r.ctoken=function(e){var t=c[e];if(!t){for(var r=o.regexPatterns,n=e.split(/\s+/),a=[],i=0;i<n.length;i++)a.push(s.replace(s.rtoken(r[n[i]]),n[i]));t=c[e]=s.any.apply(null,a)}return t},r.ctoken2=function(e){return s.rtoken(o.regexPatterns[e])},r.h=s.cache(s.process(s.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),t.hour)),r.hh=s.cache(s.process(s.rtoken(/^(0[0-9]|1[0-2])/),t.hour)),r.H=s.cache(s.process(s.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),t.hour)),r.HH=s.cache(s.process(s.rtoken(/^([0-1][0-9]|2[0-3])/),t.hour)),r.m=s.cache(s.process(s.rtoken(/^([0-5][0-9]|[0-9])/),t.minute)),r.mm=s.cache(s.process(s.rtoken(/^[0-5][0-9]/),t.minute)),r.s=s.cache(s.process(s.rtoken(/^([0-5][0-9]|[0-9])/),t.second)),r.ss=s.cache(s.process(s.rtoken(/^[0-5][0-9]/),t.second)),r.hms=s.cache(s.sequence([r.H,r.m,r.s],r.timePartDelimiter)),r.t=s.cache(s.process(r.ctoken2("shortMeridian"),t.meridian)),r.tt=s.cache(s.process(r.ctoken2("longMeridian"),t.meridian)),r.z=s.cache(s.process(s.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),t.timezone)),r.zz=s.cache(s.process(s.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),t.timezone)),r.zzz=s.cache(s.process(r.ctoken2("timezone"),t.timezone)),r.timeSuffix=s.each(s.ignore(r.whiteSpace),s.set([r.tt,r.zzz])),r.time=s.each(s.optional(s.ignore(s.stoken("T"))),r.hms,r.timeSuffix),r.d=s.cache(s.process(s.each(s.rtoken(/^([0-2]\d|3[0-1]|\d)/),s.optional(r.ctoken2("ordinalSuffix"))),t.day)),r.dd=s.cache(s.process(s.each(s.rtoken(/^([0-2]\d|3[0-1])/),s.optional(r.ctoken2("ordinalSuffix"))),t.day)),r.ddd=r.dddd=s.cache(s.process(r.ctoken("sun mon tue wed thu fri sat"),function(e){return function(){this.weekday=e}})),r.M=s.cache(s.process(s.rtoken(/^(1[0-2]|0\d|\d)/),t.month)),r.MM=s.cache(s.process(s.rtoken(/^(1[0-2]|0\d)/),t.month)),r.MMM=r.MMMM=s.cache(s.process(r.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),t.month)),r.y=s.cache(s.process(s.rtoken(/^(\d\d?)/),t.year)),r.yy=s.cache(s.process(s.rtoken(/^(\d\d)/),t.year)),r.yyy=s.cache(s.process(s.rtoken(/^(\d\d?\d?\d?)/),t.year)),r.yyyy=s.cache(s.process(s.rtoken(/^(\d\d\d\d)/),t.year)),e=function(){return s.each(s.any.apply(null,arguments),s.not(r.ctoken2("timeContext")))},r.day=e(r.d,r.dd),r.month=e(r.M,r.MMM),r.year=e(r.yyyy,r.yy),r.orientation=s.process(r.ctoken("past future"),function(e){return function(){this.orient=e}}),r.operator=s.process(r.ctoken("add subtract"),function(e){return function(){this.operator=e}}),r.rday=s.process(r.ctoken("yesterday tomorrow today now"),t.rday),r.unit=s.process(r.ctoken("second minute hour day week month year"),function(e){return function(){this.unit=e}}),r.value=s.process(s.rtoken(/^\d\d?(st|nd|rd|th)?/),function(e){return function(){this.value=e.replace(/\D/g,"")}}),r.expression=s.set([r.rday,r.operator,r.value,r.unit,r.orientation,r.ddd,r.MMM]),r.mdy=(e=function(){return s.set(arguments,r.datePartDelimiter)})(r.ddd,r.month,r.day,r.year),r.ymd=e(r.ddd,r.year,r.month,r.day),r.dmy=e(r.ddd,r.day,r.month,r.year),r.date=function(e){return(r[o.dateElementOrder]||r.mdy).call(this,e)},r.format=s.process(s.many(s.any(s.process(s.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(e){if(r[e])return r[e];throw l.Parsing.Exception(e)}),s.process(s.rtoken(/^[^dMyhHmstz]+/),function(e){return s.ignore(s.stoken(e))}))),function(e){return s.process(s.each.apply(null,e),t.finishExact)});function n(e){return a[e]=a[e]||r.format(e)[0]}var a={};r.formats=function(e){if(e instanceof Array){for(var t=[],r=0;r<e.length;r++)t.push(n(e[r]));return s.any.apply(null,t)}return n(e)},r._formats=r.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),r._start=s.process(s.set([r.date,r.time,r.expression],r.generalDelimiter,r.whiteSpace),t.finish),r.start=function(e){try{var t=r._formats.call({},e);if(0===t[1].length)return t}catch(e){}return r._start.call({},e)},l._parse=l.parse,l.parse=function(e){var t=null;if(!e)return null;if(e instanceof Date)return e;try{t=l.Grammar.start.call({},e.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(e){return null}return 0===t[1].length?t[0]:null},l.getParseFunction=function(e){var r=l.Grammar.formats(e);return function(e){var t=null;try{t=r.call({},e)}catch(e){return null}return 0===t[1].length?t[0]:null}},l.parseExact=function(e,t){return l.getParseFunction(t)(e)}}(),Globalize.loadMessages({en:{validations:{required:"El campo (nameControl) es obligatorio",numeric:"El campo (nameControl) solo permite números",stringLength:"El campo (nameControl) solo admite entre (minLength) y (maxLength) caracteres",range:"El campo (nameControl) no debe ser menor a (rangomenor) ni mayor a (rangomayor)",pattern:"El campo (nameControl) no coincide con el patrón establecido",email:"El campo (nameControl) no es válido",compare:"El campo (nameControl) no coincide con el campo (campocomparar)",custom:"El campo (nameControl) no se válido",vced:"El campo Identificación no es válido",vruc:"El campo RUC no es válido",vtelfcon:"El campo teléfono debe seguir el siguiente formato: ",vcel:"El campo celular debe seguir el siguiente formato: {0}",vpass:"El campo pasporte no es válido",InputDateFrom:"Ingrese la Fecha Desde",DateOutRange:"El valor de la fecha está fuera del rango establecido.",ErrorRangeDate:"Rango de fechas incorrectas",DateFromGreatherThanDateAt:"La Fecha Desde debe ser menor a la Fecha Hasta",InvalidDate:"La fecha establecida es inválida."},tags:{Summary_Avg:"Promedio",Summary_Other_Avg:"Promedio de",Summary_Count:"Total",Summary_Max:"Máximo",Summary_Other_Max:"Máximo de",Summary_Min:"Mínimo",Summary_Other_Min:"Mínimo de",Summary_Sum:"Sumatoria",Summary_Other_Sum:"Sumatoria de",Button_Accept:"Aceptar",CountSelect:"Total Seleccionados=",Button_Cancel:"Cancelar",Button_Find:"Buscar",Button_Save:"Guardar",Button_Back:"Regresar",Button_Edit:"Editar",Button_New:"Nuevo",Button_Print:"Imprimir",Button_Search:"Buscar",Button_Send:"Enviar",Button_Export:"Exportar",Button_Refresh:"Refrescar",IsActive:"Es Activo",IsMasive:"Es Masivo",Yes:"SI",No:"NO",GeographicLocation1:"Departamento",GeographicLocation2:"Provincia",GeographicLocation3:"Distrito",GeographicLocation4:""},messages:{ErrorData:"Existen campos llenados incorrectamente."}}}),CORE_MESSAGE=function(t){try{return Globalize("en").formatMessage("messages/"+t)}catch(e){return t}},CORE_MESSAGE_ADD=function(t,e){try{return Globalize("en").messageFormatter("messages/"+t)(e)}catch(e){return t}},CORE_TAG=function(t){try{return Globalize("en").formatMessage("tags/"+t)}catch(e){return t}},CORE_VALIDATION=function(t){try{return Globalize("en").formatMessage("validations/"+t)}catch(e){return t}},CORE_VALIDATION_ADD=function(t,e){try{return Globalize("en").messageFormatter("validations/"+t)(e)}catch(e){return t}};var deviceType,iconosCore={down:"fa-caret-square-o-down",warning:"fa-warning",adjust:"fa-adjust",random:"fa-random",thumb_tack:"fa-thumb-tack",align_center:"fa-align-center",align_right:"fa-align-right",align_left:"fa-align-left",align_justify:"fa-align-justify",text_height:"fa-text-height",ambulance:"fa-ambulance",text_width:"fa-text-width",anchor:"fa-anchor",angle_down:"fa-angle-down",angle_up:"fa-angle-up",angle_right:"fa-angle-right",angle_left:"fa-angle-left",power_off:"fa-power-off",adn:"fa-adn",android:"fa-android",apple:"fa-apple",bitbucket:"fa-bitbucket",bitbucket_borde:"fa-bitbucket-square",bitcoin:"fa-bitcoin",css3:"fa-css3",dribbble:"fa-dribbble",dropbox:"fa-dropbox",facebook:"fa-facebook",facebook_borde:"fa-facebook-square",flickr:" fa-flickr",foursquare:"fa-foursquare",github:"fa-github",github_alt:"fa-github-alt",github_borde:"fa-github-square",gittip:"fa-gittip",googleplus:"fa-google-plus",googleplus_borde:"fa-google-plus-square",html5:"fa-html5",instagram:"fa-instagram",linkedin:"fa-linkedin",linkedin_borde:"fa-linkedin-square",linux:"fa-linux",maxcdn:"fa-maxcdn",pagelines:"fa-pagelines",pinterest:"fa-pinterest",pinterest_borde:"fa-pinterest-square",renren:"fa-renren",skype:"fa-skype",trello:"fa-trello",tumblr:"fa-tumblr",tumbrl_borde:"fa-tumblr-square",twitter:"fa-twitter",twitter_borde:"fa-twitter-square",vimeo_borde:"fa-vimeo-square",vk:"fa-vk",weibo:"fa-weibo",windows:"fa-windows",xing:"fa-xing",xing_borde:"fa-xing-square",youtube:"fa-youtube",youtube_borde:"fa-youtube-square",tree:"fa-tree",archive:"fa-archive",file:"fa-file",file_o:"fa-file-o",files_o:"fa-files-o",file_audio_o:"fa-file-audio-o",file_code_o:"fa-file-code-o",file_archive_o:"fa-file-archive-o",file_excel_o:"fa-file-excel-o",file_image_o:"fa-file-image-o",file_pdf_o:"fa-file-pdf-o",file_powerpoint_o:"fa-file-powerpoint-o",file_text:"fa-file-text",file_video_o:"fa-file-video-o",file_word_o:"fa-file-word-o",file_zip_o:"fa-file-zip-o",up:"fa-caret-square-o-up",asterisk:"fa-asterisk",headphones:"fa-headphones",indent:"fa-indent",plane:"fa-plane",paper_plane:"fa-paper-plane",paper_plane_o:"fa-paper-plane-o",volume_down:"fa-volume-down",inbox:"fa-inbox",flag:"fa-flag",flag_checkered:"fa-flag-checkered",flag_o:"fa-flag-o",bank:"fa-bank",bars:"fa-bars",database:"fa-database",trash_o:"fa-trash-o",code_fork:"fa-code-fork",graduation_cap:"fa-graduation-cap",lock:"fa-lock",bold:"fa-bold",bomb:"fa-bomb",lightbulb_o:"fa-lightbulb-o",eraser:"fa-eraser",compass:"fa-compass",search:"fa-search",search_plus:"fa-search-plus",search_minus:"fa-search-minus",chain:"fa-chain",chain_broken:"fa-chain-broken",coffee:"fa-coffee",calculator:"fa-calculator",calendar:"fa-calendar",calendar_o:"fa-calendar-o",camera:"fa-camera",camera_retro:"fa-camera-retro",truck:"fa-truck",bell:"fa-bell",bell_o:"fa-bell-o",meh_o:"fa-meh-o",smile_o:"fa-smile-o",frown_o:"fa-frown-o",folder:"fa-folder",folder_open:"fa-folder-open",folder_open_o:"fa-folder-open-o",folder_o:"fa-folder-o",road:"fa-road",shopping_cart:"fa-shopping-cart",car:"fa-car",mobile:"fa-mobile",times:"fa-times",times_circle:"fa-times-circle",times_circle_o:"fa-times-circle-o",certificate:"fa-certificate",beers:"fa-beers",check:"fa-check",check_circle:"fa-check-circle",check_circle_o:"fa-check-circle-o",check_square:"fa-check-square",check_square_o:"fa-check-square-o",chevron_down:"fa-chevron-down",chevron_up:"fa-chevron-up",chevron_right:"fa-chevron-right",chevron_left:"fa-chevron-left",chevron_circle_down:"fa-chevron-circle-down",chevron_circle_up:"fa-chevron-circle-up",chevron_circle_right:"fa-chevron-circle-right",chevron_circle_left:"fa-chevron-circle-left",circle:"fa-circle",circle_thin:"fa-circle-thin",dot_circle_o:"fa-dot-circle-o",circle_o:"fa-circle-o",paperclip:"fa-paperclip",code:"fa-code",barcode:"fa-barcode",qrcode:"fa-qrcode",rocket:"fa-rocket",columns:"fa-columns",comment:"fa-comment",comment_o:"fa-comment-o",comments:"fa-comments",comments_o:"fa-comments-o",quote_right:"fa-quote-right",quote_left:"fa-quote-left",share:"fa-share",share_alt:"fa-share-alt",share_alt_square:"fa-share-alt-square",share_square:"fa-share-square",share_square_o:"fa-share-square-o",copy:"fa-copy",heart:"fa-heart",heart_o:"fa-heart-o",cut:"fa-cut",crop:"fa-crop",square:"fa-square",square_o:"fa-square-o",cutlery:"fa-cutlery",cube:"fa-cube",cubes:"fa-cubes",spoon:"fa-spoon",dashboard:"fa-dashboard",right:"fa-caret-square-o-right",unlock:"fa-unlock",unlock_alt:"fa-unlock-alt",download:"fa-download",sign_out:"fa-sign-out",ban:"fa-ban",undo:"fa-undo",sliders:"fa-sliders",money:"fa-money",hdd_o:"fa-hdd-o",floppy:"fa-floppy-o",angle_double_down:"fa-angle-double-down",angle_double_up:"fa-angle-double-up",angle_double_right:"fa-angle-double-right",angle_double_left:"fa-angle-double-left",dollar:"fa-dollar",building:"fa-building",building_o:"fa-building-o",edit:"fa-edit",send:"fa-send",send_o:"fa-send-o",desktop:"fa-desktop",shield:"fa-shield",stethoscope:"fa-stethoscope",star:"fa-star",star_half:"fa-star-half",star_half_o:"fa-star-half-o",star_o:"fa-star-o",tag:"fa-tag",tags:"fa-tags",euro:"fa-euro",fire_extinguisher:"fa-fire-extinguisher",fax:"fa-fax",arrow_down:"fa-arrow-down",arrow_up:"fa-arrow-up",arrow_right:"fa-arrow-right",arrow_left:"fa-arrow-left",arrows_h:"fa-arrows-h",arrows_v:"fa-arrows-v",arrow_circle_down:"fa-arrow-circle-down",arrow_circle_down_o:"fa-arrow-circle-o-down",arrow_circle_up:"fa-arrow-circle-up",arrow_circle_up_o:"fa-arrow-circle-o-up",arrow_circle_right:"fa-arrow-circle-right",arrow_circle_right_o:"fa-arrow-circle-o-right",arrow_circle_left:"fa-arrow-circle-left",arrow_circle_left_o:"fa-arrow-circle-o-left",location_arrow:"fa-location-arrow",arrows:"fa-arrows",arrows_alt:"fa-arrows-alt",long_arrow_down:"fa-long-arrow-down",long_arrow_up:"fa-long-arrow-up",long_arrow_right:"fa-long-arrow-right",long_arrow_left:"fa-long-arrow-left",filter:"fa-filter",flask:"fa-flask",fire:"fa-fire",font:"fa-font",gamepad:"fa-gamepad",rotate_right:"fa-rotate-right",rotate_left:"fa-rotate-left",globe:"fa-globe",google:"fa-google",bar_chart_o:"fa-bar-chart-o",group:"fa-group",save:"fa-save",header:"fa-header",external_link:"fa-external-link",external_link_square:"fa-external-link-square",history:"fa-history",leaf:"fa-leaf",male:"fa-male",h_square:"fa-h-square",hospital_o:"fa-hospital-o",language:"fa-language",magnet:"fa-magnet",empire:"fa-empire",print:"fa-print",map_marker:"fa-map-marker",map:"fa-map-o",info:"fa-info",info_circle:"fa-info-circle",home:"fa-home",bug:"fa-bug",institution:"fa-institution",exchange:"fa-exchange",italic:"fa-italic",left:"fa-caret-square-o-left",fighter_jet:"fa-fighter-jet",joomla:"fa-joomla",medkit:"fa-medkit",pencil:"fa-pencil",pencil_square:"fa-pencil-square",lapiz_borde_T:"fa-pencil-square-o",laptop:"fa-laptop",key:"fa-key",wrench:"fa-wrench",book:"fa-book",lemon_o:"fa-lemon-o",list:"fa-list",list_alt:"fa-list-alt",list_ul:"fa-list-ul",list_ol:"fa-list-ol",moon_o:"fa-moon-o",suitcase:"fa-suitcase",briefcase:"fa-briefcase",hand_down_o:"fa-hand-o-down",hand_up_o:"fa-hand-o-up",hand_right_o:"fa-hand-o-right",hand_left_o:"fa-hand-o-left",sitemap:"fa-sitemap",bookmark:"fa-bookmark",bookmark_o:"fa-bookmark-o",legal:"fa-legal",bullhorn:"fa-bullhorn",envelope:"fa-envelope",envelope_square:"fa-envelope-square",envelope_o:"fa-envelope-o",microphone:"fa-microphone",microphone_slash:"fa-microphone-slash",circle_notch_o:"fa-circle-o-notch",female:"fa-female",step_backward:"fa-step-backward",forward:"fa-forward",fast_forward:"fa-fast-forward",compress:"fa-compress",stop:"fa-stop",eject:"fa-eject",expand:"fa-expand",pause:"fa-pause",play:"fa-play",play_circle:"fa-play-circle",play_circle_o:"fa-play-circle-o",backward:"fa-backward",fast_backward:"fa-fast-backward",step_forward:"fa-step-forward",youtube_play:"fa-youtube-play",music:"fa-music",level_down:"fa-level-down",level_up:"fa-level-up",child:"fa-child",cloud:"fa-cloud",cloud_upload:"fa-cloud-upload",cloud_download:"fa-cloud-download",slack:"fa-slack",bullseye:"fa-bullseye",sort:"fa-sort",sort_asc:"fa-sort-asc",sort_desc:"fa-sort-desc",sort_alpha_asc:"fa-sort-alpha-asc",sort_alpha_desc:"fa-sort-alpha-desc",sort_amount_asc:"fa-sort-amount-asc",sort_amount_desc:"fa-sort-amount-desc",sort_numeric_asc:"fa-sort-numeric-asc",sort_numeric_desc:"fa-sort-numeric-desc",paragraph:"fa-paragraph",paw:"fa-paw",film:"fa-film",paste:"fa-paste",puzzle_piece:"fa-puzzle-piece",clipboard:"fa-clipboard",thumbs_down:"fa-thumbs-down",thumbs_down_o:"fa-thumbs-o-down",thumbs_up:"fa-thumbs-up",thumbs_up_o:"fa-thumbs-o-up",crosshairs:"fa-crosshairs",ellipsis_h:"fa-ellipsis-h",ellipsis_v:"fa-ellipsis-v",bolt:"fa-bolt",recycle:"fa-recycle",dedent:"fa-dedent",mail_forward:"fa-mail-forward",refresh:"fa-refresh",sign_in:"fa-sign-in",clock_o:"fa-clock-o",reorder:"fa-reorder",repeat:"fa-repeat",reply:"fa-reply",mail_reply:"fa-mail-reply",reply_all:"fa-reply-all",mail_reply_all:"fa-mail-reply-all",retweet:"fa-retweet",cog:"fa-cog",cogs:"fa-cogs",rupee:"fa-rupee",life_bouy:"fa-life-bouy",signal:"fa-signal",exclamation:"fa-exclamation",exclamation_circle:"fa-exclamation-circle",exclamation_triangle:"fa-exclamation-triangle",plus:"fa-plus",plus_circle:"fa-plus-circle",plus_square:"fa-plus-square",plus_square_o:"fa-plus-square-o",minus:"fa-minus",minus_circle:"fa-minus-circle",minus_square:"fa-minus-square",minus_square_o:"fa-minus-square-o",question:"fa-question",question_circle:"fa-question-circle",wheelchair:"fa-wheelchair",sun_o:"fa-sun-o",umbrella:"fa-umbrella",soundcloud:"fa-soundcloud",support:"fa-support",rss:"fa-rss",rss_square:"fa-rss-square",spinner:"fa-spinner",spotify:"fa-spotify",stack_exchange:"fa-stack-exchange",stack_overlow:"fa-stack-exchange",subscript:"fa-subscript",volume_up:"fa-volume-up",underline:"fa-underline",superscript:"fa-superscript",table:"fa-table",tablet:"fa-tablet",strikethrough:"fa-strikethrough",tachometer:"fa-tachometer",tasks:"fa-tasks",credit_card:"fa-credit-card",cab:"fa-cab",keyboard_o:"fa-keyboard-o",phone:"fa-phone",phone_square:"fa-phone-square",ticket:"fa-ticket",tint:"fa-tint",scissors:"fa-scissors",space_shuttle:"fa-space-shuttle",trophy:"fa-trophy",university:"fa-university",upload:"fa-upload",user:"fa-user",user_md:"fa-user-md",users:"fa-users",magic:"fa-magic",glass:"fa-glass",automobile:"fa-automobile",video_camera:"fa-video-camera",vine:"fa-vine",eye:"fa-eye",eye_slash:"fa-eye-slash",volume_off:"fa-volume-off",wordpress:"fa-wordpress",wechat:"fa-wechat",yahoo:"fa-yahoo",yen:"fa-yen"},Sesion={FechaSistema:new Date,IpMaquina:""},notificationTime=5e3;CORE_PATTERN_LETTERS="a-zA-ZñÑáÁéÉíÍóÓúÚ",CORE_PATTERN_INT="0-9",CORE_PATTERN_SPECIALS_ALLOWED=String.fromCharCode(47)+String.fromCharCode(45),CORE_PAGINATION=15,CORE_SPECIAL_CHAR={ASTERISK:"42",CLOSE_EXCLAMATION:"33",NUMERAL:"35",LEFT_PARENTHESES:"40",RIGHT_PARENTHESES:"41",DOLAR:"36",PERCENTAGE:"37",AMPERSAND:"38",EQUAL:"61",PLUS:"43",AT:"64",OPEN_QUESTION_MARK:"191",CLOSE_QUESTION_MARK:"63",COMMA:"44",TWO_POINT:"58",LESS_THAN:"60",GREATER_THAN:"62",DOWN_DASH:"95",DOT:"46",DOT_COMMA:"59",EQUIVALENCE:"126",VERTUCAL_BAR:"124",SPACE:"32"};var typeControl={TextBox:"textbox",NumberBox:"numberbox",SelectBox:"selectbox",DateBox:"datebox",TextArea:"textarea",Button:"boton",Check:"check",DataGrid:"grid",TagBox:"tagbox",Switch:"switch",Popup:"popup",ListBox:"list",RadioGroup:"radiogroup"},typeButtons={Normal:"normal",Default:"default",Back:"back",Danger:"danger",Success:"success"},classButtons={Accept:CORE_TAG("Button_Accept"),Cancel:CORE_TAG("Button_Cancel"),New:CORE_TAG("Button_New"),Print:CORE_TAG("Button_Print"),Send:CORE_TAG("Button_Send"),Save:CORE_TAG("Button_Save"),Search:CORE_TAG("Button_Search"),Refresh:CORE_TAG("Button_Refresh"),Delete:CORE_TAG("Delete"),Other:CORE_TAG("Button_Other"),Info:""},classMessage={Info:"MENINF",Warning:"MENADV",Danger:"MENERR",Question:"MENPRE",Success:"MENSUC"},modeSelection={None:"none",Single:"single",Multiple:"multi",MultipleGrid:"multiple"},positionControls={Top:"top",Bottom:"bottom",Right:"rigth",Left:"left"},typeCharAllowed={OnlyText:"textOnly",OnlyNumber:"numberOnly",OnlyTextAndNumber:"textAndNumberOnly",OnlyTextAndChar:"textAndCharactersOnly",OnlyNumberAndChar:"NumberAndCharactersOnly",OnlyTextNumberAndChar:"textNumberAndCharactersOnly",AllChar:"allChartes"},typePatternColumn={CED:"ID",CellPhone:"CELU",Email:"EMAIL",Extention:"EXTC",AccountNumber:"NUMCTA",DecimalNumber:"NDEC",IntNumber:"NENT",RUC:"RUC",OnlyLetters:"TXTONLY",OnlyLetterChar:"TXTCHARONLY",OnlyNumbers:"NUMONLY",OnlyNumbersChar:"NUMCHARONLY",OnlyLettersNumber:"TXTNUMONLY",OnlyLettersNumberChar:"TXTNUCHARMONLY",AllChars:"ALLCHAR",Phone:"TELF"},stateControl={disabled:"disabled",hide:"hide",readOnly:"readOnly"},typeSelectionGrid={None:"none",Single:"single",Multiple:"multiple",AllowSelect:"allowSelectAll"},typeValidation={Required:"required",Numeric:"numeric",Range:"range",RangoDate:"rangeDate",Pattern:"pattern",RangePattern:"rangePattern",StringLength:"stringLength",Compare:"compare",Custom:"custom",Email:"email"},textAlignment={Right:"right",Left:"left",Center:"center",Justify:"justify"},presentationText={OnlyText:"onlytext",OnlyIcon:"onlyicon",IconText:"icontext"},typeSummaryGrid={Count:"count",Sum:"sum",Min:"min",Max:"max",Average:"avg"},eventsControl={change:"change",copy:"copy",cut:"cut",disposing:"disposing",enterKey:"enterKey",focusIn:"focusIn",focusOut:"focusOut",initialized:"initialized",input:"input",keyDown:"keyDown",keyPress:"keyPress",keyUp:"keyUp",optionChanged:"optionChanged",paste:"paste",valueChanged:"valueChanged"},typeLetter={upper:"uppercase",lower:"lowercase",normal:"none"},toolBarButtons={New:"buttonToolBarNew",Edit:"buttonToolBarEdit",Save:"buttonToolBarSave",Print:"buttonToolBarPrint",Search:"buttonToolBarSearch",Send:"buttonToolBarSend",Cancel:"buttonToolBarCancel",Export:"buttonToolBarExport",Accept:"buttonToolBarAccept",Other:"buttonToolBarOther"},stateToolBar={disabled:"disabled",hidden:"hidden",enabled:"enabled",visible:"visible"},searchOperations={Equal:"=",Different:"<>",GreaterThan:">",GreaterEqualThan:">=",LessThan:"<",LessEqualThan:"<",StartsWith:"startswith",EndsWith:"endswith",Contains:"contains",NotContains:"notcontains"},dateParts={Seconds:"second",Minutes:"minute",Hours:"hour",Days:"day",Months:"month",Years:"year"},typesDate={ShortDate:"shortdate",LongDate:"longdate"},typesNotification={Error:"error",Success:"success",Warning:"warning",Info:"info"},typesLinearGauge={Rectangle:"rectangle",Rhombus:"rhombus",Circle:"circle",TextCloud:"textCloud",TriangleMarker:"triangleMarker"},formatValues={Money:"",Percent:"%"},typePhones={Phone:"phone",Mobile:"mobile"},sizeFloatButtons={small:"small",normal:"normal"},typeFloatButtons={default:"btn-default",white:"btn-white",blue:"btn-blue",success:"btn-success",yellow:"btn-yellow"},typeOrders={Ascendent:"asc",Descendent:"desc"},stateScreen={Active:"Activa",Lock:"Bloqueada"};function setupPopup(e,t,r,n,a,i,o,s){return{visible:e,width:t,height:r,title:a,maxHeight:"98%",maxWidth:"98%",deferRendering:!1,resizeEnabled:o,showTitle:n,fullScreen:!1,showCloseButton:i,onShowing:null,onShown:null,onHiding:null,onHidden:null,toolbarItems:s}}function setupPopover(e,t,r,n,a,i,o){return{closeOnOutsideClick:!0,deferRendering:!1,height:"auto",onContentReady:null,onDisposing:null,onHidden:null,onHiding:null,onInitialized:null,onOptionChanged:null,onShowing:null,onShown:null,onTitleRendered:null,position:t,rtlEnabled:void 0,shading:n,shadingColor:"rgba(0, 0, 0, 0.5)",showCloseButton:o,showTitle:a,target:e,title:i,titleTemplate:void 0,visible:!1,width:r,toolbarItems:[]}}function setupSwitchControl(e,t,r,n){r={onText:e,offText:t,value:r,disabled:!1,visible:!0,readonly:!1};return n&&setStateField(r,n),r}function setupTreeView(e,t,r,n,a,i,o,s,l,u){l={accessKey:null,dataStructure:"plain",disabled:!1,dataSource:e,expandAllEnabled:!0,displayExpr:n,expandNodesRecursive:!0,height:o,width:s,keyExpr:t,noDataText:"No existen datos para formar la estructura",parentIdExpr:r,scrollDirection:"both",selectAllText:"Seleccionar Todos",selectByClick:!0,selectionMode:i,selectNodesRecursive:!0,showCheckBoxesMode:i==typeSelectionGrid.Multiple?"normal":"none",visible:!0,readonly:!1,itemTemplate:l,onContentReady:void 0,onDisposing:void 0,onInitialized:void 0,onItemClick:void 0,onItemCollapsed:void 0,onItemContextMenu:void 0,onItemExpanded:void 0,onItemHold:void 0,onItemRendered:void 0,onItemSelected:void 0,onItemSelectionChanged:void 0,onOptionChanged:void 0,onSelectionChanged:void 0};return u&&setStateField(l,u),l}function setupContextMenu(e,t,r,n,a,i){return{closeOnOutsideClick:!0,dataSource:e,displayExpr:t,height:n,target:r,selectByClick:!0,selectionMode:"none",width:a,itemTemplate:i,onContentReady:void 0,onDisposing:void 0,onHidden:void 0,onHiding:void 0,onInitialized:void 0,onItemClick:void 0,onItemContextMenu:void 0,onItemRendered:void 0,onOptionChanged:void 0,onPositioning:void 0,onSelectionChanged:void 0,onShowing:void 0,onShown:void 0}}function setupTagBox(e,t,r,n,a,i,o,s){return{value:e,dataSource:t,displayExpr:r,valueExpr:n,applyValueMode:o,showSelectionControls:a,noDataText:"No hay información disponible",placeholder:"Seleccione una o varias opciones",searchMode:"contains",searchEnabled:i,onChange:void 0,onClosed:void 0,onContentReady:void 0,onCustomItemCreating:void 0,onDisposing:void 0,onEnterKey:void 0,onFocusIn:void 0,onFocusOut:void 0,onInitialized:void 0,onInput:void 0,onItemClick:void 0,onKeyDown:void 0,onKeyPress:void 0,onKeyUp:void 0,onOpened:void 0,onOptionChanged:void 0,onSelectAllValueChanged:void 0,onSelectionChanged:void 0,onValueChanged:void 0,itemTemplate:s||"item"}}function setupButtonControl(e,t,r,n,a,i,o){o={text:e,type:n,icon:a?"fa "+a:void 0,validationGroup:r,disabled:!1,visible:!0,readonly:!1,rtlEnabled:o||!1,onClick:function(e){t&&t(e)}};return i&&setStateField(o,i),o}function setupButtonControlDefault(e,t,r,n,a){var i=e,o=void 0;if(1==n)switch(e){case classButtons.Accept:o="fa "+iconosCore.check;break;case classButtons.Cancel:o="fa "+iconosCore.times;break;case classButtons.Refresh:o="fa "+iconosCore.refresh;break;case classButtons.Send:o="fa "+iconosCore.send_o;break;case classButtons.New:o="fa "+iconosCore.file_o;break;case classButtons.Print:o="fa "+iconosCore.print;break;case classButtons.Save:o="fa "+iconosCore.floppy;break;case classButtons.Info:o="fa "+iconosCore.info}return setupButtonControl(i,t,r,typeButtons.Default,o,a)}function setupTextBoxControl(e,t,r,n,a,i,o,s,l){r={value:e,maxLength:t,disabled:!1,visible:!0,readOnly:!1,placeholder:r,mode:"text",onChange:function(e){if(n){var t="#"+e.element[0].id;switch(n){case typeLetter.upper:$(t).dxTextBox("option","value",null==$(t).dxTextBox("option","value")?"":$(t).dxTextBox("option","value").toUpperCase());break;case typeLetter.lower:$(t).dxTextBox("option","value",null==$(t).dxTextBox("option","value")?"":$(t).dxTextBox("option","value").toLowerCase())}}},onCopy:function(e){},onCut:null,onDisposing:null,onEnterKey:null,onFocusIn:function(e){n&&setTypeLetter(e,n),l&&(e.preventDefault(),e.stopPropagation(),window.scrollTo(0,0))},onFocusOut:null,onInitialized:null,onInput:null,onKeyDown:null,onKeyPress:function(e){restrictionTextControl(e.element[0].id,o,i,s)},onKeyUp:null,onOptionChanged:null,onPaste:null,onValueChanged:null};return a&&setStateField(r,a),r}function setTypeLetter(e,t){document.getElementById(e.element[0].id).firstChild.firstChild.style.textTransform=t}function setEventControls(e,t,r){switch(t){case this.eventsControl.change:e.onChange=function(e){r(e)};break;case this.eventsControl.copy:e.onCopy=function(e){r(e)};break;case this.eventsControl.cut:e.onCut=function(e){r(e)};break;case this.eventsControl.disposing:e.onDisposing=function(e){r(e)};break;case this.eventsControl.enterKey:e.onEnterKey=function(e){r(e)};break;case this.eventsControl.focusIn:e.onFocusIn=function(e){r(e)};break;case this.eventsControl.focusOut:e.onFocusOut=function(e){r(e)};break;case this.eventsControl.initialized:e.onInitialized=function(e){r(e)};break;case this.eventsControl.input:e.onInput=function(e){r(e)};break;case this.eventsControl.keyDown:e.onKeyDown=function(e){r(e)};break;case this.eventsControl.keyPress:e.onKeyPress=function(e){r(e)};break;case this.eventsControl.keyUp:e.onKeyUp=function(e){r(e)};break;case this.eventsControl.optionChanged:e.onOptionChanged=function(e){r(e)};break;case this.eventsControl.paste:e.onPaste=function(e){r(e)};break;case this.eventsControl.valueChanged:e.onValueChanged=function(e){r(e)};break;default:showErrorMessage(CORE_TAG("ErrorMessage"),CORE_MESSAGE("NoEventControl"))}}function setupEmailControl(e,t,r,n){r=setupTextBoxControl(e,t,n||ConstantsBehaivor.PLACEHOLDER_EMAIL_FIELD,typeLetter.lower,r,!1,typeCharAllowed.OnlyTextNumberAndChar,"@-_.");return r.mode="email",r}function setupTextPasswordControl(e,t,r,n){n=setupTextBoxControl(e,t,r=r||CORE_TAG("Password"),void 0,n);return n.mode="password",n}function setupTextBoxDNIControl(e,t){var r=setupTextBoxControl(e,ConstantsBehaivor.LENGTH_DNI,ConstantsBehaivor.PLACEHOLDER_DNI,null,t,!1);return r.mode="number",r.onKeyUp=function(e){var t=e.jQueryEvent.currentTarget.value;"107"!=e.jQueryEvent.keyCode&&"106"!=e.jQueryEvent.keyCode&&"109"!=e.jQueryEvent.keyCode&&"111"!=e.jQueryEvent.keyCode||(e.jQueryEvent.currentTarget.value=t.substring(0,t.length-1)),t.length>r.maxLength&&(e.jQueryEvent.currentTarget.value=t.substring(0,t.length-1))},r}function setupTextRUCControl(e,t){var r=setupTextBoxControl(e,ConstantsBehaivor.LENGTH_RUC,ConstantsBehaivor.PLACEHOLDER_RUC,null,t,!1);return r.mode="number",r.onKeyUp=function(e){var t=e.jQueryEvent.currentTarget.value;"107"!=e.jQueryEvent.keyCode&&"106"!=e.jQueryEvent.keyCode&&"109"!=e.jQueryEvent.keyCode&&"111"!=e.jQueryEvent.keyCode||(e.jQueryEvent.currentTarget.value=t.substring(0,t.length-1)),t.length>r.maxLength&&(e.jQueryEvent.currentTarget.value=t.substring(0,t.length-1))},r}function setupTextPASAPORTControl(e,t){return setupTextBoxControl(e,ConstantsBehaivor.LENGTH_PASSPORT,ConstantsBehaivor.PLACEHOLDER_PASSPORT,null,t,!1,typeCharAllowed.OnlyTextAndNumber)}function setupTextPhoneControl(e,t,r,n){var a=setupTextBoxControl(e);switch(a.mode="number",t){case typePhones.Phone:a.maxLength=ConstantsBehaivor.LENGTH_PHONE,a.placeholder=n||ConstantsBehaivor.PLACEHOLDER_PHONE;break;case typePhones.Mobile:a.maxLength=ConstantsBehaivor.LENGTH_CELLPHONE,a.placeholder=n||ConstantsBehaivor.PLACEHOLDER_CELLPHONE}return a.onKeyUp=function(e){var t=e.jQueryEvent.currentTarget.value;"107"!=e.jQueryEvent.keyCode&&"106"!=e.jQueryEvent.keyCode&&"109"!=e.jQueryEvent.keyCode&&"111"!=e.jQueryEvent.keyCode||(e.jQueryEvent.currentTarget.value=t.substring(0,t.length-1)),t.length>a.maxLength&&(e.jQueryEvent.currentTarget.value=t.substring(0,t.length-1))},a}function setupHibridPhoneControl(e,t,r){var n=setupTextBoxControl(e);return n.mode="number",n.maxLength=8,n.placeholder=r||ConstantsBehaivor.PLACEHOLDER_PHONE,n.onKeyUp=function(e){var t=e.jQueryEvent.currentTarget.value;"107"!=e.jQueryEvent.keyCode&&"106"!=e.jQueryEvent.keyCode&&"109"!=e.jQueryEvent.keyCode&&"111"!=e.jQueryEvent.keyCode||(e.jQueryEvent.currentTarget.value=t.substring(0,t.length-1)),t.length>n.maxLength&&(e.jQueryEvent.currentTarget.value=t.substring(0,t.length-1))},t&&setStateField(n,t),n}function setupComboBoxControl(e,t,r,n,a,i,o,s){a={value:n,dataSource:e,displayExpr:t,valueExpr:r,placeholder:s,showClearButton:!1,disabled:!1,visible:!0,readonly:!1,width:o,searchEnabled:a||!1,onChange:null,onClosed:null,onContentReady:null,onCopy:null,onCut:null,onDisposing:null,onEnterKey:null,onFocusIn:null,onFocusOut:null,onInitialized:null,onInput:null,onItemClick:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onOpened:null,onOptionChanged:null,onPaste:null,onSelectionChanged:null,onValueChanged:null};return i&&setStateField(a,i),a}function setupLookupControl(e,t,r,n,a,i,o,s,l){l={items:t,value:e,displayExpr:r,searchEnabled:a,valueExpr:n,applyValueMode:i,readonly:!1,disabled:!1,visible:!0,deferRendering:!1,onClosed:void 0,onContentReady:void 0,onDisposing:void 0,onInitialized:void 0,onItemClick:void 0,onOpened:void 0,onOptionChanged:void 0,onPageLoading:void 0,onPullRefresh:void 0,onScroll:void 0,onSelectionChanged:void 0,onTitleRendered:void 0,onValueChanged:void 0,applyButtonText:"Aceptar",clearButtonText:"Limpiar",noDataText:"Sin datos disponibles",nextButtonText:"Más",placeholder:"Seleccione",cancelButtonText:"Cancelar",searchPlaceholder:"Buscar",position:{at:"center"},itemTemplate:s,title:l};return o&&setStateField(l,o),l}function setupDateControl(e,t,r,n,a,i){i={type:"date",width:n,value:e,placeholder:ConstantsBehaivor.PATTERN_SHORTDATE,displayFormat:ConstantsBehaivor.PATTERN_SHORTDATE,pickerType:"calendar",max:r||void 0,min:t||void 0,acceptCustomValue:!1,disabled:!1,visible:!0,readonly:null!=i&&i,dateOutOfRangeMessage:CORE_VALIDATION("DateOutRange"),invalidDateMessage:CORE_VALIDATION("InvalidDate"),onValueChanged:null,onClosed:null,onChange:null,adaptivityEnabled:!0};return a&&setStateField(i,a),i}function setupDataGrid(e,t,r,n,a,i,o,s,l,u){r=r||modeSelection.None,n=n||!1;l={columnAutoWidth:!0,columns:t,dataSource:e=e||[],disabled:!1,filterRow:{applyFilter:"auto",applyFilterText:CORE_TAG("applyFilterText"),betweenEndText:CORE_TAG("betweenEndText"),betweenStartText:CORE_TAG("betweenStartText"),operationDescriptions:{"=":CORE_TAG("Equal"),"<>":CORE_TAG("NotEqual"),"<":CORE_TAG("LessThan"),"<=":CORE_TAG("LessEqualThan"),">":CORE_TAG("GreaterThan"),">=":CORE_TAG("GreaterEqualThan"),startswith:CORE_TAG("StartsWith"),contains:CORE_TAG("Contains"),notcontains:CORE_TAG("NotContains"),endswith:CORE_TAG("EndsWith"),between:CORE_TAG("Between")},resetOperationText:CORE_TAG("Reset"),showAllText:CORE_TAG("All"),visible:a},hoverStateEnabled:!0,selection:{mode:r,allowSelectAll:r==modeSelection.MultipleGrid||void 0,showCheckBoxesMode:r==modeSelection.MultipleGrid?"always":"none"},editing:{allowAdding:i,allowDeleting:i,allowUpdating:i,mode:"form",texts:{addRow:CORE_MESSAGE("AddRow"),cancelAllChanges:CORE_MESSAGE("CancelAllChanges"),cancelRowChanges:CORE_MESSAGE("CancelRowChanges"),confirmDeleteMessage:CORE_MESSAGE("ConfirmDeleteMessage"),confirmDeleteTitle:CORE_MESSAGE("ConfirmDeleteTitle"),deleteRow:CORE_MESSAGE("DeleteRow"),editRow:CORE_MESSAGE("EditRow"),saveAllChanges:CORE_MESSAGE("SaveAllChanges"),saveRowChanges:CORE_MESSAGE("SaveRowChanges"),validationCancelChanges:CORE_MESSAGE("ValidationCancelChanges")}},paging:{enabled:n,pageSize:l||CORE_PAGINATION},showBorders:!0,rowAlternationEnabled:!0,showRowLines:!0,visible:!0,readonly:!1,onSelectionChanged:null,onInitNewRow:null,onRowInserting:null,onRowInserted:null,onRowUpdating:null,onRowUpdated:null,onRowRemoving:null,onRowRemoved:null,onRowCollapsed:null,onRowPrepared:null,onEditingStart:null,noDataText:CORE_MESSAGE("NoData"),summary:{groupItems:null,totalItems:null,texts:{avg:CORE_TAG("Summary_Avg")+" = {0}",avgOtherColumn:CORE_TAG("Summary_Other_Avg")+" {1} es {0}",count:CORE_TAG("Summary_Count")+" = {0}",max:CORE_TAG("Summary_Max")+" = {0}",maxOtherColumn:CORE_TAG("Summary_Other_Max")+" {1} es {0}",min:CORE_TAG("Summary_Min")+" = {0}",minOtherColumn:CORE_TAG("Summary_Other_Min")+" {1} es {0}",sum:CORE_TAG("Summary_Sum")+" = {0}",sumOtherColumn:CORE_TAG("Summary_Other_Sum")+" {1} es {0}"}}};return o&&o.length&&(1==s?l.summary.groupItems=o:l.summary.totalItems=o),u&&setStateField(l,u),l}function setupSummaryValidation(e){return{hoverStateEnabled:!0,validationGroup:e}}function setupListBox(e,t,r,n,a,i,o,s){r={dataSource:e,grouped:i,groupTemplate:o,itemTemplate:a,collapsibleGroups:!1,noDataText:"",height:n,width:"100%",onContentReady:null,onDisposing:null,onGroupRendered:null,onInitialized:null,onItemClick:null,onItemContextMenu:null,onItemDeleted:null,onItemDeleting:null,onItemHold:null,onItemRendered:null,onItemReordered:null,onItemSwipe:null,onOptionChanged:null,onPageLoading:null,onPullRefresh:null,onScroll:null,onSelectionChanged:null,pageLoadingText:"",pulledDownText:CORE_MESSAGE("ReleaseRefresh"),pullingDownText:CORE_MESSAGE("PullDownRefresh"),refreshingText:CORE_MESSAGE("Refreshing"),selectionMode:t,showSelectionControls:r,visible:!0,disabled:!1,readOnly:!1,allowItemDeleting:!1,itemDeleteMode:"static"};return s&&setStateField(r,s),r}function setupAccordion(e,t,r,n,a){try{return{dataSource:e,animationDuration:300,collapsible:a,multiple:n,deferRendering:!1,itemTitleTemplate:t,itemTemplate:r,selectedItems:e,onSelectionChanged:null}}catch(e){showErrorMessage("","No se pudo crear el control ("+e+"). Por favor comuníquese con el Administrador.")}}function setupNumberBox(e,t,r,n,a,i,o,s){try{var l={value:e,min:t,max:r,rtlEnabled:!1,mode:i=null==i?"number":i,maxLength:a,width:n,placeholder:o,invalidValueMessage:"Ingrese un número válido",onChange:null,onCopy:null,onCut:null,onDisposing:null,onEnterKey:null,onFocusIn:null,onFocusOut:null,onInitialized:null,onInput:null,onKeyDown:null,onKeyUp:null,onOptionChanged:null,onPaste:null,onValueChanged:null,onKeyPress:function(e){var t,r="#"+e.element[0].id,n=e.jQueryEvent;","!=String.fromCharCode(n.keyCode)?(t=null==ConstantsBehaivor.PRECISION_DECIMAL?0:ConstantsBehaivor.PRECISION_DECIMAL,1<(e=null==$(r).dxNumberBox("option","text")?"":$(r).dxNumberBox("option","text").split(".")).length&&(2<e[1].length?n.preventDefault():(1<e[1].length||3==e[1].length)&&(t=e[1].substring(0,t),e=e[e=0]+"."+t,e=parseFloat(e),$(r).dxNumberBox("option","value",$(r).dxNumberBox("option","attr").text=e),n.preventDefault()))):n.preventDefault()}};return s&&setStateField(l,s),l}catch(e){showErrorMessage("","No se pudo crear el control ("+e+"). Por favor comuníquese con el Administrador.")}}function setupCheckBoxControl(e,t,r){try{var n={value:e,text:t,disabled:!1,visible:!0,readonly:!1,onValueChanged:null};return r&&setStateField(n,r),n}catch(e){showErrorMessage("","No se pudo crear el control ("+e+"). Por favor comuníquese con el Administrador.")}}function setupTextAreaControl(e,t,r,n,a,i){try{var o={value:e,placeholder:a,maxLength:t,width:r,height:n,disabled:!1,visible:!0,readonly:!1,onValueChanged:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onEnterKey:null};return i&&setStateField(o,i),o}catch(e){showErrorMessage("","No se pudo crear el control ("+e+"). Por favor comuníquese con el Administrador.")}}function setupMapControl(e,t,r,n,a){try{return{center:{lat:currentPosition.Latitud,lng:currentPosition.Longitud},zoom:n,height:function(){return window.innerHeight-210},width:t,markers:e,autoAdjust:!0,controls:!0,provider:"google",key:{google:"AIzaSyBamz0SmdOUDV6iLW7g-KMbPbM-DcPfDxY"},type:"roadmap",markerIconSrc:"./images/"+a+".png"}}catch(e){showErrorMessage("","No se pudo crear el control ("+e+"). Por favor comuníquese con el Administrador.")}}function setupRadioGroup(e,t,r,n,a){try{return{dataSource:t,value:e,layout:"vertical",displayExpr:r,valueExpr:n,onValueChanged:null,itemTemplate:a=a||"item"}}catch(e){showErrorMessage("","No se pudo crear el control ("+e+"). Por favor comuníquese con el Administrador.")}}function setupToolBarView(e,t,r,n){return{items:[{location:"before",options:{type:r,text:n||void 0,onClick:t||backView},widget:"dxButton"},{text:e}]}}function setupGallery(e,t,r,n,a,i){return{dataSource:e,width:"100%",slideshowDelay:t?r:0,loop:n,showNavButtons:a,showIndicator:i}}function setupTabsControl(e,t,r){return{dataSource:e,selectedIndex:t,itemTemplate:r,deferRendering:!0,onItemClick:null,onSelectionChanged:null}}function setupActionSheet(e,t,r,n){return{dataSource:e,showCancelButton:!0,showTitle:t,title:r,onItemClick:null,onCancelClick:null,visible:!1,cancelText:"Cancelar",itemTemplate:n}}function setupColorBoxControl(e,t,r){t={applyButtonText:"Aceptar",cancelButtonText:"Cancelar",value:e,onChange:void 0,onClosed:void 0,onCopy:void 0,onCut:void 0,onDisposing:void 0,onEnterKey:void 0,onFocusIn:void 0,onFocusOut:void 0,onInitialized:void 0,onInput:void 0,onKeyDown:void 0,onKeyPress:void 0,onKeyUp:void 0,onOpened:void 0,onOptionChanged:void 0,onPaste:void 0,onValueChanged:void 0,deferRendering:!0,placeholder:t,disabled:void 0,readonly:void 0,visible:!0};return r&&setStateField(t,r),t}function setupFloatButton(e,t,r,n,a,i,o){var s=document.getElementById("floatButtons"),l=document.createElement("div");$(l).dxButton({visible:!0,validationGroup:o,onClick:function(e){t&&t(e)}});o="btn-movil";switch(r=r||iconosCore.check,a=a||this.typeFloatButtons.default,n==this.sizeFloatButtons.small&&(o="btn-movil-small"),l.classList.add(o),l.classList.add(a),i&&l.classList.add(i),$(l).dxButton("option","visible",!0),$(l).dxButton("option","onClick",function(e){t&&t(e)}),e){case classButtons.Cancel:r=iconosCore.times,l.id="floatButtonCancel";break;case classButtons.Save:r=iconosCore.floppy,l.id="floatButtonSave";break;case classButtons.Delete:r=iconosCore.minus,l.id="floatButtonDelete";break;case classButtons.New:r=iconosCore.plus,l.id="floatButtonNew";break;case classButtons.Accept:r=iconosCore.check,l.id="floatButtonAccept";break;case classButtons.Search:r=iconosCore.search,l.id="floatButtonSearch";break;case classButtons.Other:l.id="floatButtonOther_"+r.split("-")[1]}$(l).dxButton("option","icon","fa "+r),s.appendChild(l)}function hideFloatButtons(){document.getElementById("floatButtons").innerHTML=""}function setupLoadPanel(){return{message:"Cargando",visible:!1,deferRendering:!1,height:"auto"}}function setupFileUploader(e,t,r,n,a,i,o){i={multiple:e||!1,accept:t||"*",uploadMode:r||"instantly",uploadButtonText:"Cargar",uploadedMessage:"Cargado",uploadFailedMessage:"Error al cargar el archivo",selectButtonText:"Seleccionar",disabled:!1,visible:!0,readOnly:!1,labelText:n||"",onDisposing:null,onInitialized:null,onOptionChanged:null,onProgress:null,onUploadAborted:null,onUploaded:null,onUploadError:null,onUploadStarted:null,onValueChanged:null,readyToUploadMessage:"Listo para cargar",showFileList:a||!0,uploadUrl:i||"https://js.devexpress.com/Content/Services/upload.aspx"};return o&&setStateField(i,o),i}function setupPieChar(e,t,r,n,a,i,o,s){i={dataSource:e,series:t,size:{height:r,width:n},legend:{visible:o=o||!0,horizontalAlignment:"center",verticalAlignment:"bottom"},tooltip:{enabled:!0,format:"currency",percentPrecision:2,customizeTooltip:function(e){return{text:e.valueText+" - "+e.percentText}}},title:{text:a,font:{size:16,family:mainFontFamily,color:"#00c0d5"},subtitle:{text:i,size:12,family:mainFontFamily,color:"grey"}},commonSeriesSettings:{type:"doughnut",innerRadius:.2,label:{visible:!0,connector:{visible:!0,width:.5},format:"currency",customizeText:function(e){return e.argumentText+" ("+e.percentText+")"}}}};return s&&$.extend(i,s),i}function setupLinearGauge(e,t,r,n,a,i){return i=i||formatValues.Money,{animation:{enabled:!0,duration:5e3},startValue:t,endValue:r,value:e,tickInterval:50,label:{customizeText:function(e){return i==formatValues.Percent?e.valueText+i:i+e.valueText}},subvalues:n,subvalueIndicator:{type:a=a||typesLinearGauge.Rectangle,color:mainColor},tooltip:{enabled:!0,format:"currency",precision:2,font:{size:12,weight:700,family:mainFontFamily},color:mainColor}}}function setupCircularGauge(e,t,r,n,a,i,o){return a=a||typesLinearGauge.Rectangle,{scale:{startValue:t,endValue:r,tickInterval:o=o||100,label:{useRangeColors:!0}},rangeContainer:{palette:"pastel",ranges:[{startValue:t,endValue:t+30*r/100,color:"#f16f5c"},{startValue:t+30*r/100,endValue:t+60*r/100,color:"orange"},{startValue:t+60*r/100,endValue:r,color:mainColor}]},valueIndicator:{type:a,color:mainColor},subvalues:n,subvalueIndicator:{type:a,color:mainColor},size:{height:200},value:e,title:{text:i,font:{size:16,color:mainColor,family:mainFontFamily}}}}function setupChartLine(e,t,r,n,a,i){return{tooltip:{enabled:!0,zIndex:3,customizeTooltip:function(e){return{text:Number(e.value).formatMoney(2,".",",")}}},dataSource:e,commonSeriesSettings:{argumentField:t,type:"line",label:{customizeText:function(e){e=Date.parse(e.valueText+"T00:00:00");return new Date(e).getDay()+"/"+new Date(e).getMonth()},rotationAngle:45}},export:{enabled:!1},margin:{bottom:20},argumentAxis:{valueMarginsEnabled:!1,discreteAxisDivisionMode:"crossLabels",grid:{visible:!0},label:{customizeText:function(e){e=Date.parse(e.value+"T00:00:00");return mesesAnio[Date.parse(e).getMonth()].TextoAbr+", "+Date.parse(e).getDate()},overlappingBehavior:{mode:"rotate",rotationAngle:315,staggeringSpacing:1},indentFromAxis:5},tickInterval:{days:1}},legend:{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"bottom"},size:{height:i},series:r,title:{text:n,subtitle:{text:a}},valueAxis:{label:{format:"decimal",customizeText:function(e){return Number(e.valueText).formatMoney(2,".",",")}}}}}function setStateColumn(e,t){switch(t){case"hide":e.visible=!1;break;case"disabled":e.disabled=!0;break;case"readOnly":e.readonly=!0}return e}function setupTextColumn(e,t,r,n,a,i,o,s,l){var u=null,c=(CORE_VALIDATION("custom"),CORE_VALIDATION("required"));c=c.replace("(nameControl)",t);var d=[];switch(i&&(c=CORE_VALIDATION("required"),d.push({type:"required",message:c})),o){case"textOnly":u=getColumnPattern(typePatternColumn.OnlyLetters);break;case"numberOnly":u=getColumnPattern(typePatternColumn.OnlyNumbers);break;case"textAndNumberOnly":u=getColumnPattern(typePatternColumn.OnlyLettersNumber);break;case"textAndCharactersOnly":u=getColumnPattern(typePatternColumn.OnlyLetterChar,s);break;case"NumberAndCharactersOnly":u=getColumnPattern(typePatternColumn.OnlyNumbersChar,s);break;case"textNumberAndCharactersOnly":u=getColumnPattern(typePatternColumn.OnlyLettersNumberChar,s)}return null!=u&&d.push(u),setStateColumn({dataField:e,caption:t,allowEditing:!0,width:r,visible:!0,readonly:!1,disabled:!1,alignment:a||textAlignment.Center,allowFiltering:null==n||n,validationRules:d},l)}function setupCheckColumn(e,t,r,n){return setStateColumn({dataField:e,caption:t,allowEditing:!0,dataType:"boolean",visible:!0,readonly:!1,disabled:!1,width:r},n)}function setupColumnCED(e,t,r,n,a){var i=getColumnPattern(typePatternColumn.CED),o=(o=CORE_VALIDATION("vced")).replace("(nameControl)",t),s=[];return n&&(n=(n=CORE_VALIDATION("required")).replace("(nameControl)",t),s.push({type:"required",message:n})),s.push(i),s.push({type:"custom",validationCallback:checkDNI,message:o}),setStateColumn({dataField:e,caption:t,width:ancho,allowEditing:!0,visible:!0,readonly:!1,disabled:!1,placeholder:ConstantsBehaivor.PLACEHOLDER_DNI,validationRules:s},a)}function setupDateColumn(e,t,r,n,a,i,o,s){var l=[];return a&&l.push(getValidationRule(typeValidation.Required,t)),null==i&&null==o||(null==i&&(i=Date.parse("1900-01-01")),null==o&&(o=Date.parse("2900-01-01")),messageValidation=CORE_VALIDATION("range"),messageValidation=messageValidation.replace("(nameControl)",t),messageValidation=messageValidation.replace("(rangomenor)",i.toDateString()),messageValidation=messageValidation.replace("(rangomayor)",o.toDateString()),l.push({type:"range",min:Date.parse(i.toDateString()),max:Date.parse(o.toDateString()),message:messageValidation})),setStateColumn({dataField:e,caption:t,dataType:"date",width:r,allowEditing:!0,value:null==o?null:Date.parse(o.toDateString()),visible:!0,readonly:!1,disabled:!1,alignment:textAlignment.Center,allowFiltering:null==n||n,placeholder:ConstantsBehaivor.PATTERN_SHORTDATE,format:ConstantsBehaivor.PATTERN_SHORTDATE,validationRules:l},s)}function setupDateTimeColumn(e,t,r,n,a){return setStateColumn({dataField:e,caption:t,dataType:"date",width:r,allowEditing:!0,alignment:textAlignment.Center,allowFiltering:null==n||n,placeholder:ConstantsBehaivor.PATTERN_LONGDATE,format:ConstantsBehaivor.PATTERN_LONGDATE},a)}function setupMoneyColumn(e,t,r,n,a,i){var o=getColumnPattern(typePatternColumn.DecimalNumber),s=[];return n&&(n=(n=CORE_VALIDATION("required")).replace("(nameControl)",t),s.push({type:"required",message:n})),s.push(o),setStateColumn({dataField:e,caption:t,width:r,allowEditing:!0,visible:!0,readonly:!1,disabled:!1,alignment:(textAlignment.Center,a),format:"currency",precision:2,dataType:"number",validationRules:s},i)}function setupSelectionColumn(e,t,r,n,a,i,o,s,l){var u=[];return s&&(s=(s=CORE_VALIDATION("required")).replace("(nameControl)",t),u.push({type:"required",message:s})),setStateColumn({dataField:e,caption:t,allowEditing:!0,visible:!0,readonly:!1,disabled:!1,alignment:textAlignment.Center,width:i,allowFiltering:null==o||o,validationRules:u,lookup:{dataSource:r,valueExpr:a,displayExpr:n}},l)}function setupBoolColumn(e,t,r,n){return{dataField:e,caption:t,allowEditing:!0,width:r,alignment:textAlignment.Center,allowFiltering:null==n||n,cellTemplate:function(e,t){var r="",r=1==t.value?"<div style='color:green'> <i style='margin-right:3px; display:inline-block' class='fa "+iconosCore.check+"' /> <span style='display:inline-block; font-size:12px'>"+CORE_TAG("Yes")+"</span></div>":"<div style='color:red'> <i style='margin-right:3px; display:inline-block' class='fa "+iconosCore.times+"' /> <span style='display:inline-block; font-size:12px'>"+CORE_TAG("No")+"</span></div>";$(r).appendTo(e)}}}function setupBoolOtherColumn(e,t,r,n,a){return{dataField:e,caption:t,width:r,alignment:textAlignment.Center,cellTemplate:function(e,t){var r="",r=1==t.value?"<div style='color:green'> <i style='margin-right:3px; display:inline-block' class='fa "+iconosCore.check+"' /> <span style='display:inline-block; font-size:12px'>"+n+"</span></div>":"<div style='color:red'> <i style='margin-right:3px; display:inline-block' class='fa "+iconosCore.times+"' /> <span style='display:inline-block; font-size:12px'>"+a+"</span></div>";$(r).appendTo(e)}}}function setupStyleColumn(e,t,r,n,a){return{dataField:e,caption:t,width:r,alignment:textAlignment.Center,allowFiltering:null==n||n,cellTemplate:function(e,t){$(a(t)).appendTo(e)}}}function setupActionColumns(a,i,o){return{dataField:"",caption:CORE_TAG("Actions"),alignment:textAlignment.Center,width:"auto",cellTemplate:function(e,t){if(a){var r="<a class='column-action-grid'>";switch(o){case"onlytext":r=r+"<span>"+CORE_TAG("Edit")+"</span>";break;case"onlyicon":r=r+"<i title='"+CORE_TAG("Edit")+"' class='fa "+iconosCore.edit+"' />";break;case"icontext":r=r+"<i style='display:inline-block;' class='fa "+iconosCore.edit+"' /> <span style='display:inline-block'>"+CORE_TAG("Edit")+"</span>"}r+="</a>",$(r).on("click",function(e){a(t.data)}).appendTo(e)}if(i){var n="<a class='column-action-grid'>";switch(o){case"onlytext":n=n+"<span>"+CORE_TAG("Delete")+"</span>";break;case"onlyicon":n=n+"<i title='"+CORE_TAG("Delete")+"' class='fa "+iconosCore.minus_circle+"' />";break;case"icontext":n=n+"<i style='display:inline-block; margin-right:1px' class='fa "+iconosCore.minus_circle+"' /> <span style='display:inline-block'>"+CORE_TAG("Delete")+"</span>"}n+="</a>",$(n).on("click",function(e){i(t.data)}).appendTo(e)}}}}function setupButtonColumn(e,a,i,o,s,l){return{caption:e,dataField:"",alignment:textAlignment.Center,width:"auto",cellTemplate:function(e,t){var r="button-blue";switch(s){case"default":r="button-orange";break;case"success":r="button-green";break;case"danger":r="button-red"}var n="<a class='column-button-grid "+r+"'>";switch(i){case"onlytext":n=n+"<span>"+a+"</span>";break;case"onlyicon":n=n+"<i title='"+a+"' class='fa "+o+"' />";break;case"icontext":n=n+"<i style='display:inline-block;' class='fa "+o+"' /> <span style='display:inline-block'>"+a+"</span>"}n+="</a>",$(n).on("click",function(e){l(t)}).appendTo(e)}}}function setupImageColumn(e,t,r,n){return{dataField:e,caption:t,width:r,cellTemplate:function(e,t){$("<img style='height:"+n+"px; width:"+n+"px' />").attr("src","images/"+t.value).appendTo(e)}}}function setupSummaryColumn(e,t,r,n){t={column:e,summaryType:t,customizeText:null,valueFormat:null};return r&&(t.customizeText=function(e){return r+": "+e.value}),n&&(t.valueFormat=n),t}function getColumnPattern(e,t,r){var n=null;switch(e){case"ID":n={type:"pattern",message:CORE_VALIDATION("vced")+" debe seguir formato: "+ConstantsBehaivor.PLACEHOLDER_DNI,pattern:ConstantsBehaivor.PATTERN_CED};break;case"RUC":n={type:"pattern",message:CORE_VALIDATION("vruc")+" debe seguir formato: "+ConstantsBehaivor.PLACEHOLDER_RUC,pattern:ConstantsBehaivor.PATTERN_RUC};break;case"TELF":var a=CORE_VALIDATION("vtelfcon");n={type:"pattern",message:a+=ConstantsBehaivor.PLACEHOLDER_PHONE,pattern:ConstantsBehaivor.PATTERN_PHONE};break;case"CELU":a=CORE_VALIDATION("vcel");n={type:"pattern",message:a+=ConstantsBehaivor.PLACEHOLDER_CELLPHONE,pattern:ConstantsBehaivor.PLACEHOLDER_CELLPHONE};break;case"NDEC":var i=CORE_VALIDATION("custom");n={type:"pattern",message:i+=", verificar número decimal",pattern:"/^d+(?:.d{0,"+(r=null==r?ConstantsBehaivor.PRECISION_DECIMAL:r)+"})$/;"};break;case"NENT":i=CORE_VALIDATION("custom");n={type:"pattern",message:i+=", verificar número entero",pattern:"^["+CORE_PATTERN_INT+"]+$"};break;case"NUMCTA":n={type:"pattern",message:CORE_VALIDATION("custom")+" debe seguir formato: "+ConstantsBehaivor.PLACEHOLDER_ACCOUNT_NUMBER,pattern:ConstantsBehaivor.PATTERN_ACCOUNT_NUMBER};break;case"EMAIL":var o=CORE_VALIDATION("custom");n={type:"email",message:o+=", verificar email"};break;case"EXTC":o=CORE_VALIDATION("custom");n={type:"pattern",message:o+=", verificar extensión",pattern:"^["+CORE_PATTERN_INT+"]+$"};break;case"TXTONLY":var s=CORE_VALIDATION("custom");n={type:"pattern",message:s+=", solo se acepta letras",pattern:"^["+CORE_PATTERN_LETTERS+"\\s]+$"};break;case"TXTCHARONLY":n={type:"pattern",message:CORE_VALIDATION("custom"),pattern:"^["+CORE_PATTERN_LETTERS+(null==t?"":t)+CORE_PATTERN_SPECIALS_ALLOWED+"\\s]+$"};break;case"NUMONLY":s=CORE_VALIDATION("custom");n={type:"pattern",message:s+=", solo se acepta números",pattern:"^["+CORE_PATTERN_INT+"]+$"};break;case"NUMCHARONLY":n={type:"pattern",message:CORE_VALIDATION("custom"),pattern:"^["+CORE_PATTERN_INT+(null==t?"":t)+CORE_PATTERN_SPECIALS_ALLOWED+"]+$"};break;case"TXTNUMONLY":n={type:"pattern",message:CORE_VALIDATION("custom"),pattern:"^["+CORE_PATTERN_LETTERS+CORE_PATTERN_INT+"\\s]+$"};break;case"TXTNUCHARMONLY":n={type:"pattern",message:CORE_VALIDATION("custom"),pattern:"^["+CORE_PATTERN_LETTERS+CORE_PATTERN_INT+(null==t?"":t)+CORE_PATTERN_SPECIALS_ALLOWED+"\\s]+$"}}return n}function getValidationRule(e,t,r,n){var a=null,i="";switch(i=(i=CORE_VALIDATION(e)).replace("(nameControl)",t),e){case"required":case"numeric":a={type:e,message:i};break;case"range":var o=r.split(","),a={type:e,min:l=o[0],max:o=o[1],message:i=(i=i.replace("(rangomenor)",l)).replace("(rangomayor)",o)};break;case"rangeDate":var s=r.split(","),l=s[0],o=s[1];i=(i=i.replace("(rangomenor)",l)).replace("(rangomayor)",o),a={type:e,min:new Date(l),max:new Date(o),message:i};break;case"compare":a={type:e,comparisonTarget:n,message:i=i.replace("(campocomparar)",r)};break;case"custom":a={type:e,validationCallback:n,message:i};break;case"email":a={type:e,message:i};break;case"pattern":a={type:e,pattern:r,message:i};break;case"stringLength":s=r.split(",");a={type:e,min:l=s[0],max:o=s[1],message:i=(i=i.replace("(longitudmenor)",l)).replace("(longitudmayor)",o)}}return a}function validateRequired(e,t){var r=[];return r.push(getValidationRule(typeValidation.Required,t=t||"")),{validationGroup:e,validationRules:r}}function validateCompare(e,t,r,n){var a=[];return a.push(getValidationRule(typeValidation.Compare,r,n,t)),{validationGroup:e,validationRules:a}}function validateText(e,t,r,n,a,i,o){var s=[];1==t&&s.push(validateRequired(r));var l,u="";switch(i){case this.typeCharAllowed.OnlyText:u="^["+CORE_PATTERN_LETTERS+"\\s]+$",onlyTextAllowed(e);break;case this.typeCharAllowed.OnlyNumber:u="^["+CORE_PATTERN_INT+"\\s]+$",onlyNumberAllowed(e);break;case this.typeCharAllowed.OnlyTextAndNumber:vpatron="^["+CORE_PATTERN_LETTERS+CORE_PATTERN_INT+"]+$",onlyNumberAndTextAllowed(e);break;case this.typeCharAllowed.OnlyTextAndChar:vpatron="^["+CORE_PATTERN_LETTERS+(null==o?"":o)+CORE_PATTERN_SPECIALS_ALLOWED+"\\s]+$",onlyTextAndCharAllowed(e,o);break;case this.typeCharAllowed.OnlyNumberAndChar:vpatron="^["+CORE_PATTERN_INT+(null==o?"":o)+CORE_PATTERN_SPECIALS_ALLOWED+"]+$",onlyNumberAndCharAllowed(e,o);break;case this.typeCharAllowed.OnlyTextNumberAndChar:vpatron="^["+CORE_PATTERN_LETTERS+CORE_PATTERN_INT+(null==o?"":o)+CORE_PATTERN_SPECIALS_ALLOWED+"\\s]+$",onlyTextNumberAndCharAllowed(e,o)}return""!=u&&(l=CORE_VALIDATION(typeValidation.Custom),s.push({type:typeValidation.Pattern,pattern:u,message:l})),null==n&&null==a||(n=null==n?0:n,a=null==a?9999:a,l="",l=(l=(l=CORE_VALIDATION(typeValidation.StringLength)).replace("(minLength)",n)).replace("(maxLength)",a),s.push({type:typeValidation.Pattern,pattern:"^.{"+n+","+a+"}$",message:l})),{validationGroup:r,validationRules:s}}function validateDNI(e,t,r){r=r||"";var n=[];e&&n.push(getValidationRule(typeValidation.Required,r));r=CORE_VALIDATION("vced");return n.push({type:typeValidation.Custom,validationCallback:checkDNI,message:r}),n.push({type:typeValidation.Pattern,pattern:ConstantsBehaivor.PATTERN_CED,message:r}),{validationGroup:t,validationRules:n}}function validateRUC(e,t,r){r=r||"";var n=[];e&&n.push(getValidationRule(typeValidation.Required,r));r=CORE_VALIDATION("vced");return n.push({type:typeValidation.Custom,validationCallback:checkRUC,message:r}),n.push({type:typeValidation.Pattern,pattern:ConstantsBehaivor.PATTERN_RUC,message:r}),{validationGroup:t,validationRules:n}}function validatePASS(e,t,r){r=r||"";var n=[];e&&n.push(getValidationRule(typeValidation.Required,r));r=CORE_VALIDATION("vpass");return n.push({type:typeValidation.Custom,validationCallback:checkPASS,message:r}),{validationGroup:t,validationRules:n}}function validateEmail(e,t,r){var n=[];return e&&n.push(getValidationRule(typeValidation.Required,r)),n.push(getValidationRule(typeValidation.Email,r)),{validationGroup:t,validationRules:n}}function validatePhone(e,t,r){var n=[];return e&&n.push(getValidationRule(typeValidation.Required,r)),n.push({type:typeValidation.Custom,validationCallback:checkLengthPhone,message:"El campo "+r+" debe tener mínimo "+ConstantsBehaivor.MIN_LENGTH_PHONE+" dígitos"}),n.push({type:typeValidation.Custom,validationCallback:checkConventionalPhone,message:"El campo "+r+" no debe iniciar con "+ConstantsBehaivor.INIT_NUMBER_CELLPHONE}),{validationGroup:t,validationRules:n}}function validateCellPhone(e,t,r){r=r||"";var n=[];e&&n.push(getValidationRule(typeValidation.Required,r));CORE_VALIDATION_ADD("vcel",ConstantsBehaivor.INIT_NUMBER_CELLPHONE+"#######");return n.push(getValidationRule(typeValidation.Pattern,ConstantsBehaivor.PATTERN_CELLPHONE,"NÚMERO INVALIDO")),{validationGroup:t,validationRules:n}}function validateHibridPhone(e,t,r){var n=[];return e&&n.push(getValidationRule(typeValidation.Required,r)),n.push({type:typeValidation.Custom,validationCallback:checkLengthHibridPhone,message:"El campo "+r+" es inválido, verifique la cantidad de caracteres ingresados"}),{validationGroup:t,validationRules:n}}function checkLengthPhone(e){e=e.value;return!e||e.length>=ConstantsBehaivor.MIN_LENGTH_PHONE&&e.length<=ConstantsBehaivor.LENGTH_PHONE}function checkConventionalPhone(e){return!!ValidatorBehavior.IsConventionalPhone(e)}function checkCellPhone(e){return!!ValidatorBehavior.IsCellPhone(e)}function checkLengthCellPhone(e){e=e.value;return!e||e.length==ConstantsBehaivor.LENGTH_CELLPHONE}function checkLengthHibridPhone(e){var t=e.value,e="PHONE";return!t||("PHONE"==(e=t.substring(0,ConstantsBehaivor.INIT_NUMBER_CELLPHONE.length)==ConstantsBehaivor.INIT_NUMBER_CELLPHONE?"CELL":e)?t.length>=ConstantsBehaivor.MIN_LENGTH_PHONE&&t.length<=ConstantsBehaivor.LENGTH_PHONE:t.length==ConstantsBehaivor.LENGTH_CELLPHONE)}function checkDNI(e){return!!ValidatorBehavior.ValidateDNI(e.value)}function checkRUC(e){return!!ValidatorBehavior.ValidateRUC(e.value)}function checkPASS(e){return!!ValidatorBehavior.ValidatePassport(e.value)}function showNotificationError(e,t,r){notificationTime=t||notificationTime,DevExpress.ui.notify({message:decodeURI(e),type:"error",displayTime:notificationTime,position:r})}function showNotificationWarning(e,t,r){notificationTime=t||notificationTime,DevExpress.ui.notify({message:decodeURI(e),type:"warning",displayTime:notificationTime,position:r})}function showNotificationSuccess(e,t,r){notificationTime=t||notificationTime,DevExpress.ui.notify({message:decodeURI(e),type:"success",displayTime:notificationTime,position:r})}function showNotificationInfo(e,t,r){notificationTime=t||notificationTime,DevExpress.ui.notify({message:decodeURI(e),type:"info",displayTime:notificationTime,position:r})}function showServerErrorMessage(e,t,r){try{var n,a;messageError=e.responseJSON,1==messageError.contains("ExceptionMessage")&&(n=messageError.search("<ExceptionMessage>")+18,a=messageError.search("</ExceptionMessage>"),messageError=messageError.slice(n,a)),DevExpress.ui.dialog.alert({message:decodeURI(messageError),title:t||CORE_TAG("ErrorMessage"),buttons:[{text:CORE_TAG("Button_Accept"),onClick:function(){r&&r(messageError),$(".dx-popup-title").removeClass("title-message-error")}}]}),$(".dx-popup-title").addClass("title-message-error"),$(".dx-popup-title").removeClass("title-message-success"),$(".dx-popup-title").removeClass("title-message-warning"),$(".dx-popup-title").removeClass("title-message-question"),$(".dx-popup-title").removeClass("title-message-info")}catch(e){showErrorMessage(CORE_TAG("ErrorMessage"),CORE_MESSAGE("CannotReadError"))}}function showErrorMessage(e,t,r){DevExpress.ui.dialog.alert({message:decodeURI(t),title:e||CORE_TAG("ErrorMessage"),buttons:[{text:CORE_TAG("Button_Accept"),onClick:function(){r&&r(),$(".dx-popup-title").removeClass("title-message-error")}}]}),$(".dx-popup-title").addClass("title-message-error"),$(".dx-popup-title").removeClass("title-message-success"),$(".dx-popup-title").removeClass("title-message-warning"),$(".dx-popup-title").removeClass("title-message-question"),$(".dx-popup-title").removeClass("title-message-info")}function showSimpleMessage(e,t,r,n){n&&1==n&&document.getElementById("notificationMessage").play(),DevExpress.ui.dialog.alert({message:decodeURI(t),title:e,buttons:[{text:CORE_TAG("Button_Accept"),onClick:function(){r&&r(),$(".dx-popup-title").removeClass("title-message-info")}}]}),$(".dx-popup-title").addClass("title-message-info"),$(".dx-popup-title").removeClass("title-message-success"),$(".dx-popup-title").removeClass("title-message-error"),$(".dx-popup-title").removeClass("title-message-question"),$(".dx-popup-title").removeClass("title-message-warning")}function showWarningMessage(e,t,r,n){n&&1==n&&document.getElementById("notificationMessage").play(),DevExpress.ui.dialog.alert({message:decodeURI(t),title:e,buttons:[{text:CORE_TAG("Button_Accept"),onClick:function(){r&&r(),$(".dx-popup-title").removeClass("title-message-warning")}}]}),$(".dx-popup-title").addClass("title-message-warning"),$(".dx-popup-title").removeClass("title-message-success"),$(".dx-popup-title").removeClass("title-message-error"),$(".dx-popup-title").removeClass("title-message-question"),$(".dx-popup-title").removeClass("title-message-info")}function showSuccessMessage(e,t,r,n){n&&1==n&&document.getElementById("notificationMessage").play(),DevExpress.ui.dialog.alert({message:decodeURI(t),title:e,buttons:[{text:CORE_TAG("Button_Accept"),onClick:function(){r&&r(),$(".dx-popup-title").removeClass("title-message-success")}}]}),$(".dx-popup-title").addClass("title-message-success"),$(".dx-popup-title").removeClass("title-message-warning"),$(".dx-popup-title").removeClass("title-message-error"),$(".dx-popup-title").removeClass("title-message-question"),$(".dx-popup-title").removeClass("title-message-info")}function showQuestionMessage(e,t,r,n,a){a&&1==a&&document.getElementById("notificationMessage").play();t=DevExpress.ui.dialog.custom({title:e,message:null==t?"":decodeURI(t),buttons:[{text:CORE_TAG("Yes"),onClick:function(){return CORE_TAG("Yes")}},{text:CORE_TAG("No"),onClick:function(){return CORE_TAG("No")}}]});return t.show().done(function(e){e==CORE_TAG("Yes")?r():n&&n(),$(".dx-popup-title").removeClass("title-message-question")}),$(".dx-popup-title").addClass("title-message-question"),$(".dx-popup-title").removeClass("title-message-success"),$(".dx-popup-title").removeClass("title-message-error"),$(".dx-popup-title").removeClass("title-message-warning"),$(".dx-popup-title").removeClass("title-message-info"),t}function showMessageValidation(e,t){showWarningMessage(e,CORE_MESSAGE("ErrorData"),function(){})}function showException(e,t,r,n){showErrorMessage(CORE_TAG("SystemError"),CORE_MESSAGE("SystemError"),function(){n&&n()})}function getSizeFile(e,t){return $(e).get(0).files[t].size}function getDescriptionCatalog(e,t){var r=e;if(e){for(var n=0;n<t.length;n++)t[n].CodigoDetalleCatalogo==e&&(r=t[n].NombreCorto,n=t.length);return r}}function convertCharCodeToString(e){e=e.split(",");for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}function changePropertyControl(e,t,r,n){switch(t){case this.typeControl.TextBox:$(e).dxTextBox("option",r,n);break;case this.typeControl.NumberBox:$(e).dxNumberBox("option",r,n);break;case this.typeControl.SelectBox:$(e).dxSelectBox("option",r,n);break;case this.typeControl.DateBox:$(e).dxDateBox("option",r,n);break;case this.typeControl.TextArea:$(e).dxTextArea("option",r,n);break;case this.typeControl.Button:$(e).dxButton("option",r,n);break;case this.typeControl.Check:$(e).dxCheckBox("option",r,n);break;case this.typeControl.DataGrid:$(e).dxDataGrid("option",r,n);break;case this.typeControl.TagBox:$(e).dxTagBox("option",r,n);break;case this.typeControl.Switch:$(e).dxSwitch("option",r,n);break;case this.typeControl.Popup:$(e).dxPopup("option",r,n);break;case this.typeControl.ListBox:$(e).dxList("option",r,n)}}function getCatalogDetail(e,t){if(0==t.length)return[];for(var r=0;r<t.length;r++)if(t[r].CodigoCatalogo==e)return t[r].DetalleCatalogo}function getValueXml(e,t){var r=t.search("<"+e+">");0<=r&&(r+=e.length+2);e=t.search("</"+e+">");return t.slice(r,e)}function initProcess(e){$("#loadPanel").dxLoadPanel("instance")&&(e=e||CORE_MESSAGE("LoadingData"),$("#loadPanel").dxLoadPanel("option","message",e),$("#loadPanel").dxLoadPanel("instance").show())}function stopProcess(){$("#loadPanel").dxLoadPanel("option","visible",!1);var e=document.getElementById("loadProcess");e&&(e.style.opacity=0,e.style.zIndex=0)}function setStateField(e,t){try{switch(t){case this.stateControl.hide:e.visible=!1;break;case this.stateControl.disabled:e.disabled=!0;break;case this.stateControl.readOnly:e.readOnly=!0}}catch(e){showErrorMessage(CORE_TAG("ErrorMessage"),e)}}function restrictionTextControl(e,t,u,c){var d=t;$("#"+e).unbind("keypress"),$("#"+e).keypress(function(e){if(0==u&&32==(n=e.keyCode||e.which))return!1;switch(d){case typeCharAllowed.OnlyText:n=e.keyCode||e.which,s=String.fromCharCode(n).toLowerCase();var t=8==n?!0:!1;return!(!new RegExp("^["+CORE_PATTERN_LETTERS+"\\s]$").test(s)&&1!=t);case typeCharAllowed.OnlyNumber:var r=e.which||event.keyCode,t=(String.fromCharCode(r),!1);return t=47<r&&r<58||(8!=r&&13!=r?!1:!0)?!0:t;case typeCharAllowed.OnlyTextAndNumber:var n=e.keyCode||e.which,a=!0;s=String.fromCharCode(n).toLowerCase(),new RegExp("^["+CORE_PATTERN_LETTERS+"\\s]$").test(s)||(a=!1);var i=!1;return 47<(r=e.which||event.keyCode)&&r<58&&(i=!0),!(!a&&!i);case typeCharAllowed.OnlyTextAndChar:var o=!0,n=e.keyCode||e.which,s=String.fromCharCode(n).toLowerCase(),t=!0;return-1==(l=(null==c?"":c)+CORE_PATTERN_SPECIALS_ALLOWED).indexOf(s)&&(t=!1),!!new RegExp("^["+CORE_PATTERN_LETTERS+l+"\\s]$").test(s);case typeCharAllowed.OnlyNumberAndChar:n=e.keyCode||e.which;var s=String.fromCharCode(n).toLowerCase(),t=!0,l=(null==c?"":c)+CORE_PATTERN_SPECIALS_ALLOWED;new RegExp("^["+l+"]$").test(s)||(t=!1);i=!1;return 47<(r=e.which||event.keyCode)&&r<58&&(i=!0),!(!t&&!i);case typeCharAllowed.OnlyTextNumberAndChar:n=e.keyCode||e.which,s=String.fromCharCode(n).toLowerCase(),l=(null==c?"":c)+CORE_PATTERN_SPECIALS_ALLOWED,o=!0;new RegExp("^["+CORE_PATTERN_LETTERS+l+"\\s]$").test(s)||(o=!1);i=!1;return 47<(r=e.which||event.keyCode)&&r<58&&(i=!0),!(!o&&!i)}})}function withoutSpace(e){$("#"+e).on("keypress",function(e){if(key=e.keyCode||e.which,32==key)return!1})}function onlyTextAllowed(e){$("#"+e).keyPress(function(e){key=e.keyCode||e.which,tecla=String.fromCharCode(key).toLowerCase();e=!1;return 8==key&&(e=!0),!(!new RegExp("^["+CORE_PATTERN_LETTERS+"\\s]$").test(tecla)&&1!=e)})}function onlyNumberAllowed(e,t){$("#"+e).keypress(function(e){var t=e.which||event.keyCode,e=(String.fromCharCode(t),!1);return e=47<t&&t<58||(8!=t&&13!=t?!1:!0)?!0:e})}function onlyNumberAndTextAllowed(e){$("#"+e).on("keypress",function(e){var t=e.keyCode||e.which,r=!0;tecla=String.fromCharCode(t).toLowerCase(),new RegExp("^["+CORE_PATTERN_LETTERS+"\\s]$").test(tecla)||(r=!1);t=!1,e=e.which||event.keyCode;return 47<e&&e<58&&(t=!0),!(!r&&!t)}),$("#"+e).on("keydown",function(e){var t=0;if(window.event)return!0;var r=e.which,n=!0;tecla=String.fromCharCode(r).toLowerCase(),new RegExp("^["+CORE_PATTERN_LETTERS+"\\s]$").test(tecla)||(n=!1);r=!1;return 47<(t=e.which)&&t<58&&(r=!0),!!(n||r||(8!=t&&13!=t?!1:!0))})}function onlyTextAndCharAllowed(e,n){$("#"+e).on("keypress",function(e){var t=e.keyCode||e.which,e=String.fromCharCode(t).toLowerCase(),t=(null==n?"":n)+CORE_PATTERN_SPECIALS_ALLOWED;return t.indexOf(e),!!new RegExp("^["+CORE_PATTERN_LETTERS+t+"\\s]$").test(e)}),$("#"+e).on("keydown",function(e){var t=0;if(window.event)return!0;var r=!1;8!=(t=e.which)&&13!=t||(r=!0);e=String.fromCharCode(t).toLowerCase(),t=(null==n?"":n)+CORE_PATTERN_SPECIALS_ALLOWED;return t.indexOf(e),!(!new RegExp("^["+CORE_PATTERN_LETTERS+t+"\\s]$").test(e)&&!r)})}function onlyNumberAndCharAllowed(e,i){$("#"+e).on("keypress",function(e){key=e.keyCode||e.which;var t=String.fromCharCode(key).toLowerCase(),r=!0,n=(null==i?"":i)+CORE_PATTERN_SPECIALS_ALLOWED;new RegExp("^["+n+"]$").test(t)||(r=!1);t=!1,e=e.which||event.keyCode;return 47<e&&e<58&&(t=!0),!(!r&&!t)}),$("#"+e).on("keydown",function(e){var t=0;if(window.event)return!0;var r=!1;8==(t=e.which)&&(r=!0);var n=String.fromCharCode(t).toLowerCase(),a=!0,e=(null==i?"":i)+CORE_PATTERN_SPECIALS_ALLOWED;return!!((a=!new RegExp("^["+e+"]$").test(n)?!1:a)||(47<t&&t<58?!0:!1)||r)})}function onlyTextNumberAndCharAllowed(e,o){$("#"+e).on("keypress",function(e){var t=e.keyCode||e.which,r=String.fromCharCode(t).toLowerCase(),n=(null==o?"":o)+CORE_PATTERN_SPECIALS_ALLOWED,t=!0;new RegExp("^["+CORE_PATTERN_LETTERS+n+"\\s]$").test(r)||(t=!1);r=!1,e=e.which||event.keyCode;return 47<e&&e<58&&(r=!0),!(!t&&!r)}),$("#"+e).on("keydown",function(e){var t=0;if(window.event)return!0;var r=!1;8==(t=e.which)&&(r=!0);var n=String.fromCharCode(key).toLowerCase(),a=(null==o?"":o)+CORE_PATTERN_SPECIALS_ALLOWED,i=!0;new RegExp("^["+CORE_PATTERN_LETTERS+a+"\\s]$").test(n)||(i=!1);n=!1;return 47<(t=e.which||event.keyCode)&&t<58&&(n=!0),!!(i||n||r)})}function initToolBar(){var e=$(".toolbar");e.attr("style","display:block"),e.empty()}function changeStateToolBar(e,t,r){var e=r?e+r.trim():e,n=document.getElementById(e);switch(t){case this.stateToolBar.enabled:n.classList.add("toolbar-item"),n.classList.remove("toolbar-item-disabled");break;case this.stateToolBar.visible:n.classList.add("toolbar-item"),n.classList.remove("toolbar-item-hidden");break;case this.stateToolBar.disabled:n.classList.remove("toolbar-item"),n.classList.add("toolbar-item-disabled");break;case this.stateToolBar.hidden:n.classList.remove("toolbar-item"),n.classList.add("toolbar-item-hidden")}}function setupButtonToolBar(e,t,r,n,a){var i=$(".toolbar"),o=document.createElement("a"),s=document.createElement("i"),l=document.createElement("span");switch(o.id=e,o.className="toolbar-item",s.classList.add("fa"),e){case this.toolBarButtons.New:s.classList.add(iconosCore.file_o),l.innerText=CORE_TAG("Button_New");break;case this.toolBarButtons.Edit:s.classList.add(iconosCore.edit),l.innerText=CORE_TAG("Button_Edit");break;case this.toolBarButtons.Save:s.classList.add(iconosCore.floppy),l.innerText=CORE_TAG("Button_Save");break;case this.toolBarButtons.Print:s.classList.add(iconosCore.print),l.innerText=CORE_TAG("Button_Print");break;case this.toolBarButtons.Search:s.classList.add(iconosCore.search),l.innerText=CORE_TAG("Button_Search");break;case this.toolBarButtons.Send:s.classList.add(iconosCore.send_o),l.innerText=CORE_TAG("Button_Send");break;case this.toolBarButtons.Cancel:s.classList.add(iconosCore.times),l.innerText=CORE_TAG("Button_Cancel");break;case this.toolBarButtons.Export:s.classList.add(iconosCore.file_excel_o),l.innerText=CORE_TAG("Button_Export");break;case this.toolBarButtons.Accept:s.classList.add(iconosCore.check),l.innerText=CORE_TAG("Button_Accept");break;case this.toolBarButtons.Other:o.id=o.id+n.trim(),s.classList.add(a),l.innerText=n}o.appendChild(s),o.appendChild(l),i.append(o),o.onclick=function(e){t&&"toolbar-item-disabled"!=this.className&&t()},r&&changeStateToolBar(e,r,n)}function searchArray(e,t,r,n){n=n||searchOperations.Equal;e=new DevExpress.data.DataSource({paginate:!1,store:e,requireTotalCount:!0});return e.searchExpr(t),e.searchOperation(n),e.searchValue(r),e.reload(),e._items}function orderBy(e,t,r){var n=!1;return r==typeOrders.Descendent&&(n=!0),new DevExpress.data.DataSource({requireTotalCount:!0,sort:{getter:t,desc:n},store:{type:"array",data:e},paginate:!1})}function getDeviceInfo(){DeviceInfo="undefined"!=typeof device?{DeviceManufacturer:device.manufacturer,DevicePhoneGap:device.phonegap,DevicePlatform:device.platform,DeviceUUID:device.uuid,DeviceVersion:device.version,DeviceRegistrado:"",DeviceModel:device.model,DeviceToken:TokenAPN_GCM,DeviceIMEI:"",LastTimeAccesed:new Date,LastTimeAccesedPosition:"["+currentPosition.Latitud+", "+currentPosition.Longitud+"]"}:(Parameters.AppVersion="Apiv1.0",{DeviceName:"NombreSimulador",DevicePhoneGap:"PhoneGapSimulador",DevicePlatform:"PlataformaSimulador",DeviceUUID:"IMEITEST_MIGUEL",DeviceVersion:"VersionSimulador",DeviceRegistrado:"",DeviceManufacturer:"ManufacturerSimulador",DeviceModel:"ModelSimulador",DeviceToken:"TokenSimulador",DeviceIMEI:"IMEISimulador",LastTimeAccesed:new Date,LastTimeAccesedPosition:"["+currentPosition.Latitud+", "+currentPosition.Longitud+"]"})}String.prototype.contains=function(e){return-1<this.search(e)},String.prototype.inputChar=function(e,t){for(var r="",n=0;n<this.length;n++)n%t==0?r=r+e+this[n]:r+=this[n];return r=r.substring(1)},Date.prototype.addDate=function(e,t){var r=new Date(this.toDateString());switch(e){case dateParts.Seconds:r=r.setSeconds(r.getSeconds()+t);break;case dateParts.Minutes:r=r.setMinutes(r.getMinutes()+t);break;case dateParts.Hours:r=r.setHours(r.getHours()+t);break;case dateParts.Days:r=r.setDate(r.getDate()+t);break;case dateParts.Months:r=r.setMonth(r.getMonth()+t);break;case dateParts.Years:r=r.setYear(r.getYear()+t)}return r=new Date(r)},String.prototype.withoutAccent=function(){var e=this;return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("á","a")).replace("é","e")).replace("í","i")).replace("ó","o")).replace("ú","u")).replace("Á","A")).replace("É","E")).replace("Í","I")).replace("Ó","O")).replace("Ú","U")).replace("à","a")).replace("è","e")).replace("ì","i")).replace("ò","o")).replace("ù","u")).replace("À","A")).replace("È","E")).replace("Ì","I")).replace("Ò","O")).replace("Ù","U")},String.prototype.withoutSpecialLetter=function(){var e=this;return e=(e=e.replace("ñ","n")).replace("Ñ","N")},HTMLElement.prototype.progressBar=function(e,t,r,n,a){this.innerHTML="",this.style.paddingBottom="5px";var i=document.createElement("div");i.style.width="95%",i.style.margin="10px",i.style.marginBottom="10px";var o=100*t/r;100<=o&&(o=99.5);var s=document.createElement("div");s.style.display="block",s.style.textAlign="left";var l=document.createElement("span");l.innerHTML=n+"<span style='font-size:15px'>$"+t.toFixed(2)+"</span>",l.style.fontSize="12px",l.style.color=mainColor,l.style.fontWeight="bold";n=document.createElement("span");n.innerHTML=a+"<span style='font-size:15px'>$"+r.toFixed(2)+"</span>",n.style.fontSize="12px",n.style.fontWeight="bold",n.style.color="#474453",n.style.cssFloat="right",s.appendChild(l),s.appendChild(n);n=document.createElement("div");n.style.height="18px",n.style.border="1px solid #888888",n.style.borderRadius="10px",n.style.backgroundColor="#474453",n.style.boxShadow="2px 4px 3px #888888";var u=document.createElement("div"),c=document.createElement("span");c.style.fontSize="13px",c.style.top="-5px",c.style.fontFamily="Kalinga",c.style.fontWeight="bold",c.style.position="relative",c.style.color="white",u.style.height="14px",u.style.textAlign="center",u.style.marginTop="1px",u.style.marginBottom="2px",u.style.marginLeft="1px",u.style.verticalAlign="middle",u.style.backgroundColor=t<=r?mainColor:negativeColor,u.style.borderRadius="10px",u.style.transition="width 1s ease-in",u.style.width="0%",setTimeout(function(){u.style.width=o+"%",setTimeout(function(){c.innerText=o<99.5?o.toFixed(2)+"%":"100%"},500)},1e3),u.appendChild(c),n.appendChild(u),i.appendChild(s),i.appendChild(n),this.appendChild(i)},HTMLElement.prototype.InfoCards=function(t,e,r,n,a,i,o){try{this.innerHTML="",r=r||!1;for(var s=0;s<t.length;s++){var l=document.createElement("div");l.classList.add("cards"),l.classList.add("cards-expand"),l.id="cards"+s;var u,c=document.createElement("div");c.className="cards-expand",c.id="data"+s,1==r&&((u=document.createElement("i")).classList.add("fa"),u.classList.add("fa-chevron-up"),u.id="exp_"+s);var d=document.createElement("div");d.id="info"+s;for(var p,f,h,y=0;y<e.length;y++){var g,m=document.createElement("div"),v=document.createElement("label"),C=document.createElement("span");m&&(m.style.display="block",m.style.textAlign="justify",m.id="group"+y),t[s][e[y].dataField]&&(C.innerText=t[s][e[y].dataField],e[y].isTitle&&1==e[y].isTitle?(C.className="title-cards",C.id="title_"+s,1==r&&(C.onclick=function(e){var t=e.srcElement.id.split("_")[1];1==$("#data"+t).hasClass("cards-expand")?($("#data"+t).removeClass("cards-expand"),$("#data"+t).addClass("cards-collapse"),$("#exp_"+t).removeClass("fa-chevron-up"),$("#exp_"+t).addClass("fa-chevron-down"),setTimeout(function(){$("#info"+t).hide(),$("#button"+t).hide()},300)):($("#info"+t).show(),$("#button"+t).show(),$("#data"+t).addClass("cards-expand"),$("#data"+t).removeClass("cards-collapse"),$("#exp_"+t).addClass("fa-chevron-up"),$("#exp_"+t).removeClass("fa-chevron-down"))},C.appendChild(u)),c.appendChild(C)):e[y].isImage&&1==e[y].isImage?t[s][e[y].dataField]&&((g=document.createElement("img")).setAttribute("src","./images/"+t[s][e[y].dataField]),g.className="cards-image",m.appendChild(g)):(v.innerText=e[y].caption+": ",v.className="tag-data-cards",C.className="info-data-cards",m.appendChild(v),m.appendChild(C))),d.appendChild(m)}c.appendChild(d),l.appendChild(c),1==a&&(p=document.createElement("div"),f=document.createElement("a"),(h=document.createElement("i")).classList.add("fa"),h.classList.add(i),f.appendChild(h),f.id="button_"+s,f.onclick=function(e){e=e.currentTarget.id.split("_")[1];o&&(e=t[e],o(e))},p.className="cards-button",p.id="button"+s,p.appendChild(f),l.appendChild(p)),this.appendChild(l)}}catch(e){showErrorMessage("","Error al crear los info cards, por favor comuníquese con el Administrador")}},HTMLElement.prototype.Draggable=function(e,t,r){this.innerHTML="";var n="#"+this.id;this.classList.add("content-drag"),this.classList.add("inactive");var a=document.createElement("div");a.classList.add("draggable"),a.id="draggableControl";var i=document.createElement("p");i.innerText=e,i.classList.add("innerText"),a.appendChild(i),t&&((o=document.createElement("img")).src="images/"+t+".png",a.appendChild(o));var o=document.createElement("div");o.classList.add("droppable"),o.id="droppableControl",$(a).draggable({containment:n,scroll:!1,axis:"x"}),$(a).mouseup(function(e){parseInt(e.currentTarget.style.left.replace("px",""))<150&&(this.style.left="0px")}),$(o).droppable({drop:function(e,t){r&&r()}}),this.appendChild(a),this.appendChild(o)},HTMLElement.prototype.TileView=function(a){this.innerHTML="";for(var e,t=0;t<a.length;t++){t%2==0&&((e=document.createElement("div")).style.display="block",e.style.marginTop="0px");var r=document.createElement("div");r.style.width="46%",r.style.height="100%",r.style.backgroundColor=a[t].background,r.style.cursor="pointer",r.style.display="inline-block",r.style.margin="5px",r.id="tile_"+t;var n=document.createElement("div");n.style.display="block",n.style.marginTop="5px",n.style.marginBottom="5px";var i=document.createElement("img");i.style.height="74px",i.style.width="74px",i.style.marginTop="6px",i.src="images/"+a[t].image;var o=document.createElement("span");o.style.color="white",o.style.display="block",o.style.fontSize="14px",o.style.position="relative",o.style.textTransform="none",o.style.fontFamily="Tahoma",o.innerText=a[t].texto,n.appendChild(i),n.appendChild(o),null!=a[t].badget&&((i=document.createElement("div")).style.height="25px",i.style.width="25px",i.style.borderRadius="100%",i.style.backgroundColor="deeppink",i.style.cssFloat="right",i.style.marginTop="-100px",i.style.marginRight="8px",i.style.opacity="0.4",0<t&&(i.style.position="relative",i.style.top="100px"),(o=document.createElement("span")).style.fontSize="18px",o.style.color="white",o.style.fontWeight="bold",o.innerText=a[t].badget,i.appendChild(o),n.appendChild(i)),r.appendChild(n),r.onclick=function(e){var t=e.currentTarget.id.split("_")[1];e.currentTarget.style.border="3px solid #017aff";for(var r,n=0;n<a.length;n++)n==t||(r=document.getElementById("tile_"+n))&&(r.style.border="none");a[t].accion&&a[t].accion(e)},r.onmousedown=function(e){e.currentTarget.style.boxShadow="2px 6px 3px #26252C"},r.onmouseup=function(e){e.currentTarget.style.boxShadow="none"},e.appendChild(r),this.appendChild(e)}},String.prototype.getCode=function(n){var a="",e=this.split(" ");return 0<e.length&&0<n&&e.forEach(function(e,t,r){n<=e.length&&(a+=e.substring(0,n))}),a};var actionsPicture=[{id:1,text:"Tomar foto",icon:iconosCore.camera},{id:2,text:"Seleccionar fotografía del álbum",icon:iconosCore.folder_open}];function getStyleListMovements(e){var t=e.Descripcion,r=mainColor;e.Descripcion&&20<e.Descripcion.length&&(t=e.Descripcion.substring(0,20)+"...");var n="<div class='row-list'>";return e.Descripcion?(n=(n=(n=(n=n+"<span class='column-1'>"+e.Fecha+"</span>")+"<div class='column-2'><p>"+t+"</p></div>")+"<div class='column-3' style='color:"+r+";'>")+"<span font-size:'11px'>("+e.Moneda+") </span><span style='font-size:16px;font-weight:bold'>"+e.Signo+e.ValorParcial+"</span>",n+="</div>",e.ValorTotal&&(n=n+"<div class='column-3-bottom' style='color:"+r+";text-transform:none !important'><span>"+e.ValorTotal+"</span></div>")):n+="<span style='word-break:break-word'>NO EXISTEN MOVIMIENTOS</span>",n+="</div>"}HTMLElement.prototype.InfoCards=function(t,e,r,n,a,i,o){try{this.innerHTML="",r=r||!1;for(var s=0;s<t.length;s++){var l=document.createElement("div");l.classList.add("cards"),l.classList.add("cards-expand"),l.id="cards"+s;var u,c=document.createElement("div");c.className="cards-expand",c.id="data"+s,1==r&&((u=document.createElement("i")).classList.add("fa"),u.classList.add("fa-chevron-up"),u.id="exp_"+s);var d=document.createElement("div");d.id="info"+s;for(var p,f,h,y=0;y<e.length;y++){var g,m=document.createElement("div"),v=document.createElement("label"),C=document.createElement("span");m&&(m.style.display="block",m.style.textAlign="justify",m.id="group"+y),t[s][e[y].dataField]&&(C.innerText=t[s][e[y].dataField],e[y].isTitle&&1==e[y].isTitle?(C.className="title-cards",C.id="title_"+s,1==r&&(C.onclick=function(e){var t=e.srcElement.id.split("_")[1];1==$("#data"+t).hasClass("cards-expand")?($("#data"+t).removeClass("cards-expand"),$("#data"+t).addClass("cards-collapse"),$("#exp_"+t).removeClass("fa-chevron-up"),$("#exp_"+t).addClass("fa-chevron-down"),setTimeout(function(){$("#info"+t).hide(),$("#button"+t).hide()},300)):($("#info"+t).show(),$("#button"+t).show(),$("#data"+t).addClass("cards-expand"),$("#data"+t).removeClass("cards-collapse"),$("#exp_"+t).addClass("fa-chevron-up"),$("#exp_"+t).removeClass("fa-chevron-down"))},C.appendChild(u)),c.appendChild(C)):e[y].isImage&&1==e[y].isImage?t[s][e[y].dataField]&&((g=document.createElement("img")).setAttribute("src","./images/"+t[s][e[y].dataField]),g.className="cards-image",m.appendChild(g)):(v.innerText=e[y].caption+": ",v.className="tag-data-cards",C.className="info-data-cards",m.appendChild(v),m.appendChild(C))),d.appendChild(m)}c.appendChild(d),l.appendChild(c),1==a&&(p=document.createElement("div"),f=document.createElement("a"),(h=document.createElement("i")).classList.add("fa"),h.classList.add(i),f.appendChild(h),f.id="button_"+s,f.onclick=function(e){e=e.currentTarget.id.split("_")[1];o&&(e=t[e],o(e))},p.className="cards-button",p.id="button"+s,p.appendChild(f),l.appendChild(p)),this.appendChild(l)}}catch(e){showErrorMessage("","Error al crear los info cards, por favor comuníquese con el Administrador")}},HTMLElement.prototype.TileView=function(t,e,r,n,a){null==n&&(n=!1),null==a&&(a=!0),this.innerHTML="";var i=100/r,o=300/r;1==r&&(o=300);for(var s=0;s<t.length;s++){var l,u=document.createElement("div");u&&(u.className="tile",u.style.width=i+"%",u.style.height=o+"px",u.style.backgroundColor=t[s].background||"transparent",u.id="tile_"+s),t[s].image&&1==n?((l=document.createElement("img"))&&(l.setAttribute("src","./images/"+t[s].image),l.className="img-tile",l.id="imgtile_"+s,l.style.width="100%",l.style.height=o-100+"px",u.appendChild(l)),u.onmouseover=function(e){e=e.currentTarget.id.split("_")[1],e=document.getElementById("imgtile_"+e);e&&(e.parentElement.style.backgroundColor="black",e.style.opacity="0.7")},u.onmouseleave=function(e){e=e.currentTarget.id.split("_")[1],e=document.getElementById("imgtile_"+e);e&&(e.parentElement.style.backgroundColor="transparent",e.style.opacity="1")}):t[s].image&&0==n&&(l=document.createElement("img"))&&(l.setAttribute("src","./images/"+t[s].image),l.className="img-tile-bg",l.id="imgtile_"+s,l.style.height=o-100+"px",u.appendChild(l)),u.onmousedown=function(e){e=e.currentTarget.id.split("_")[1];this.style.width=i-3+"%",this.style.height=o-40+"px",1==n&&(document.getElementById("imgtile_"+e).style.height=this.style.height-70)},u.onmouseup=function(e){e=e.currentTarget.id.split("_")[1];this.style.width=i+"%",this.style.height=o+"px",1==n&&(document.getElementById("imgtile_"+e).style.height=this.style.height-70)},u.onclick=function(e){e=e.currentTarget.id.split("_")[1];t[e].click()};for(var c,d,p=0;p<e.length;p++)e[p].isTitle&&1==e[p].isTitle?((c=document.createElement("div")).className="text-tile-bg",u.appendChild(c),(d=document.createElement("div")).className="text-tile",(c=document.createElement("span")).innerText=t[s][e[p].dataField],d.appendChild(c),u.appendChild(d)):1==a&&((c=document.createElement("div")).className="description-tile",(d=document.createElement("span")).style.color=e[p].color,d.innerText=t[s][e[p].dataField],c.appendChild(d),u.appendChild(c));this.appendChild(u)}},Number.prototype.formatMoney=function(e,t,r){var n,e=isNaN(e=Math.abs(e))?2:e,t=null==t?".":t,r=null==r?",":r,a=this<0?"-":"",i=String(parseInt(n=Math.abs(Number(this)||0).toFixed(e))),o=3<(o=i.length)?o%3:0;return a+(o?i.substr(0,o)+r:"")+i.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+r)+(e?t+Math.abs(n-i).toFixed(e).slice(2):"")},function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.jslinq=t()}(this,function(){function l(e){if(!e)throw new Error("Provided data is invalid");if(!(e instanceof Array))throw new Error("Provided data is not a valid array");return this.items=e,this.select=r,this.where=t,this.groupBy=n,this.join=a,this.intersect=T,this.distinct=i,this.orderBy=o,this.orderByDescending=s,this.selectMany=c,this.singleOrDefault=d,this.firstOrDefault=p,this.lastOrDefault=f,this.any=h,this.all=y,this.toList=g,this.count=m,this.skip=v,this.take=C,this.max=E,this.min=S,this.remove=b,this.subtract=A,this.sum=I,this.average=_,this}function u(e,t){if(e===t)return!0;if(e==t)return!0;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return e==t;for(var r in e){var n=e[r],r=t[r];if(!("object"==typeof n?u(n,r):n==r))return!1}return!0}function t(e){if(!e)throw new Error("Expression is invalid");for(var t=[],r=0;r<this.items.length;r++)e(this.items[r])&&t.push(this.items[r]);return new l(t)}function r(e){if(!e)throw new Error("Expression is invalid");for(var t=[],r=0;r<this.items.length;r++){var n=e(this.items[r]);t.push(n)}return new l(t)}function n(e){if(!e)throw new Error("Expression is invalid");for(var t=[],r=0;r<this.items.length;r++){for(var n=e(this.items[r]),a=null,i=0;i<t.length;i++)if(u(t[i].key,n)){a=t[i];break}a||t.push(a={key:n,count:0,elements:[]}),a.count++,a.elements.push(this.items[r])}return new l(t)}function a(e){if(!e)return new l(this.items);for(var t=[],r=0;r<this.items.length;r++)t.push(this.items[r]);for(var n=0;n<e.length;n++)t.push(e[n]);return new l(t)}function i(){for(var e=[],t=0;t<this.items.length;t++){for(var r=!1,n=0;n<e.length;n++)if(u(e[n],this.items[t])){r=!0;break}r||e.push(this.items[t])}return new l(e)}function o(r){if(!r)throw new Error("Expression is invalid");for(var e=[],t=0;t<this.items.length;t++)e.push(this.items[t]);return new l(e.sort(function(e,t){e=r(e),t=r(t);return e<t?-1:t<e?1:0}))}function s(e){if(!e)throw new Error("Expression is invalid");e=l(this.items).orderBy(e).toList();return new l(e.reverse())}function c(e){if(!e)throw new Error("Expression is invalid");for(var t=[],r=0;r<this.items.length;r++){var n=e(this.items[r]);if(!n){t.push(n);break}for(var a=0;a<n.length;a++)t.push(n[a])}return new l(t)}function d(e){e=e?l(this.items).where(e).toList():this.items;if(0===e.length)return null;if(1==e.length)return e[0];throw new Error("Sequence contains "+e.length+" matching elements")}function p(e){e=e?l(this.items).where(e).toList():this.items;return 0===e.length?null:e[0]}function f(e){e=e?l(this.items).where(e).toList():this.items;return 0===e.length?null:e[e.length-1]}function h(e){return 0<(e?l(this.items).where(e).toList():this.items).length}function y(e){return(e?l(this.items).where(e).toList():this.items).length==this.items.length}function g(){return this.items}function m(){return this.items.length}function v(e){if(e<0)throw new Error("Value must be greater or equals zero");for(var t=[],r=0;r<this.items.length;r++)t.push(this.items[r]);return new l(t.slice(e))}function C(e){if(e<0)throw new Error("Value must be greater or equals zero");for(var t=[],r=0;r<this.items.length;r++)t.push(this.items[r]);return new l(t.slice(0,e))}function E(e){e=e?l(this.items).select(e).toList():this.items;return 0===e.length?null:(e=l(e).orderBy(function(e){return e}).toList())[e.length-1]}function S(e){e=e?l(this.items).select(e).toList():this.items;return 0===e.length?null:(e=l(e).orderBy(function(e){return e}).toList())[0]}function T(e,t){if(!e)return new l([]);for(var r=[],n=0;n<this.items.length;n++)for(var a=this.items[n],i=0;i<e.length;i++){var o=e[i];(t?u(t(a),t(o)):u(a,o))&&r.push(a)}return new l(r)}function b(e){if(!e)return new l(this.items);for(var t=[],r=0;r<this.items.length;r++)u(this.items[r],e)||t.push(this.items[r]);return new l(t)}function A(e,t){if(!e)return new l([]);for(var r=[],n=0;n<this.items.length;n++){for(var a,i=this.items[n],o=!1,s=0;s<e.length;s++)o||(a=e[s],(t?u(t(i),t(a)):u(i,a))&&(o=!0));o||r.push(i)}return new l(r)}function I(e){if(!e)throw new Error("Expression is invalid");for(var t=l(this.items).select(e).toList(),r=0,n=0;n<t.length;n++){var a=t[n];if("number"!=typeof a)throw Error("Value '"+a+"' is not a number");r+=a}return r}function _(e){var t=e?l(this.items).select(e).toList():this.items;if(0===t.length)return null;for(var r=0,n=0;n<t.length;n++){if(isNaN(t[n]))throw new Error("Element '"+t[n]+"' (index:"+n+") is not a number");r=t[n]+r}return r/t.length}return function(e){return new l(e)}});var sessionWeb=null,sessionServer={IdInstitucion:0,IdOficina:0,IdPerfilUsuario:0,IdTransaccion:0,IdUsuario:0,IpEstacion:"",NombreEstacion:"",NombreCortoUsuario:"",CodigoPerfil:"",FechaSistema:void 0};function startSession(e){sessionStorage.setItem("Tipo","Full"),sessionStorage.setItem("Estado",stateScreen.Active),sessionStorage.setItem("Transacciones",e.Transacciones),sessionStorage.setItem("PerfilOficinaTransacciones",e.PerfilOficinaTransacciones),sessionStorage.setItem("IPEstacion",e.IpEstacion),sessionStorage.setItem("NombreEstacion",e.NombreEstacion),sessionStorage.setItem("ServidorServicios",e.ServidorServicios),sessionStorage.setItem("ServidorBDD",e.ServidorBDD),sessionStorage.setItem("Usuario",e.Usuario),sessionStorage.setItem("Sesion",e.Sesion),sessionStorage.setItem("PantallaActual",void 0),sessionStorage.setItem("Sistemas",e.Sistemas),sessionStorage.setItem("IdOficina",e.IdOficina),sessionStorage.setItem("IdInstitucion",e.IdInstitucion),sessionStorage.setItem("IdTransaccion",void 0),sessionStorage.setItem("IdPerfilUsuario",e.IdPerfilUsuario),sessionStorage.setItem("NombreCortoUsuario",e.NombreCortoUsuario),sessionStorage.setItem("CodigoPerfil",e.CodigoPerfil),sessionStorage.setItem("FechaSistema",e.FechaSistema),SesionWeb()}function endSesion(){sessionStorage.removeItem("Tipo"),sessionStorage.removeItem("Transacciones"),sessionStorage.removeItem("PerfilOficinaTransacciones"),sessionStorage.removeItem("IPEstacion"),sessionStorage.removeItem("NombreEstacion"),sessionStorage.removeItem("ServidorServicios"),sessionStorage.removeItem("ServidorBDD"),sessionStorage.removeItem("Usuario"),sessionStorage.removeItem("Sesion"),sessionStorage.removeItem("PantallaActual"),sessionStorage.removeItem("Sistemas"),sessionStorage.removeItem("IdOficina"),sessionStorage.removeItem("IdInstitucion"),sessionStorage.removeItem("IdTransaccion"),sessionStorage.removeItem("IdPerfilUsuario"),sessionStorage.removeItem("NombreCortoUsuario"),sessionStorage.removeItem("CodigoPerfil")}function SesionWeb(){var e,t,r,n,a,i,o,s,l,u,c,d,p,f,h,y,g;return sessionStorage.Sesion&&("Full"==sessionStorage.Tipo?(e="undefined"!=sessionStorage.Transacciones?JSON.parse(sessionStorage.Transacciones):void 0,t="undefined"!=sessionStorage.PerfilOficinaTransacciones?JSON.parse(sessionStorage.PerfilOficinaTransacciones):void 0,r="undefined"!=sessionStorage.IPEstacion?sessionStorage.IPEstacion:void 0,n="undefined"!=sessionStorage.NombreEstacion?sessionStorage.NombreEstacion:void 0,a="undefined"!=sessionStorage.ServidorServicios?sessionStorage.ServidorServicios:void 0,i="undefined"!=sessionStorage.ServidorBDD?sessionStorage.ServidorBDD:void 0,o="undefined"!=sessionStorage.Sesion?JSON.parse(sessionStorage.Sesion):void 0,s="undefined"!=sessionStorage.Usuario?JSON.parse(sessionStorage.Usuario):void 0,l="undefined"!=sessionStorage.PantallaActual?JSON.parse(sessionStorage.PantallaActual):null,u="undefined"!=sessionStorage.Sistemas?JSON.parse(sessionStorage.Sistemas):void 0,c=parseInt(sessionStorage.IdOficina),d=parseInt(sessionStorage.IdInstitucion),p=parseInt(sessionStorage.IdTransaccion),f=parseInt(sessionStorage.IdPerfilUsuario),h=sessionStorage.NombreCortoUsuario,y=sessionStorage.CodigoPerfil,g=sessionStorage.FechaSistema,sessionWeb={Transacciones:e,PerfilOficinaTransacciones:t,IpEstacion:r,NombreEstacion:n,ServidorServicios:a,ServidorBDD:i,Sesion:o,Usuario:s,PantallaActual:l,Sistemas:u,IdOficina:c,IdInstitucion:d,IdTransaccion:p,IdPerfilUsuario:f,NombreCortoUsuario:h,CodigoPerfil:y,FechaSistema:g},sessionServer.IdUsuario=sessionWeb.Usuario.IdUsuario,sessionServer.IdInstitucion=sessionWeb.Usuario.IdInstitucion,sessionServer.IpEstacion=sessionWeb.IpEstacion,sessionServer.NombreEstacion=sessionWeb.NombreEstacion,sessionServer.NombreCortoUsuario=sessionWeb.Usuario.CodigoUsuario):(sessionWeb={Sesion:JSON.parse(sessionStorage.Sesion)},sessionServer.IdUsuario=sessionWeb.Sesion.IdUsuario,sessionServer.IdInstitucion=sessionWeb.Sesion.IdInstitucion,sessionServer.IpEstacion=sessionWeb.Sesion.IpEstacion,sessionServer.NombreEstacion=sessionWeb.Sesion.NombreEstacion,sessionServer.NombreCortoUsuario=sessionWeb.Sesion.NombreCortoUsuario),sessionServer.IdOficina=sessionWeb.IdOficina,sessionServer.IdInstitucion=sessionWeb.IdInstitucion,sessionServer.IdTransaccion=sessionWeb.IdTransaccion,sessionServer.IdPerfilUsuario=sessionWeb.IdPerfilUsuario,sessionServer.CodigoPerfil=sessionWeb.CodigoPerfil,sessionServer.FechaSistema=sessionWeb.FechaSistema),sessionWeb}function startSessionLigth(){var e={IdOficina:0,OficinaExterna:"",IdInstitucion:0,EsInstitucionAdministrativa:!1,IdPerfilUsuario:0,CodigoPerfil:"",IdUsuario:0,IdTransaccion:0,FechaSistema:new Date,NombreOficina:"",NombreInstitucion:"",NombreCompletoUsuario:"",NombreCortoUsuario:"",IPEstacion:Kernel_Shared.IpMaquina,NombreEstacion:"",TipoIdentificacionUsuario:"",IdentificacionUsuario:"",NombrePerfil:""};sessionWeb={Sesion:e},sessionServer.IdUsuario=e.IdUsuario,sessionServer.IdInstitucion=e.IdInstitucion,sessionServer.IpEstacion=e.IpEstacion,sessionServer.NombreEstacion=e.NombreEstacion,sessionServer.NombreCortoUsuario=e.NombreCortoUsuario,sessionServer.IdOficina=e.IdOficina,sessionServer.IdInstitucion=e.IdInstitucion,sessionServer.IdTransaccion=e.IdTransaccion,sessionServer.IdPerfilUsuario=e.IdPerfilUsuario,sessionServer.CodigoPerfil=e.CodigoPerfil,sessionServer.FechaSistema=e.FechaSistema,sessionStorage.setItem("Tipo","Ligth"),sessionStorage.setItem("Sesion",JSON.stringify(e))}function ConstantsBehaivor(){}function ValidatorBehavior(){}function DTOTypeID(e,t,r,n){this.codeTypeID=e,this.isNaturalTypeID=t,this.isMainTypeID=r,this.lengthTypeID=n}function obtenerListaTipoIdentificacionesPrinciapales(){for(var e=[],t=ValidatorBehavior.listTypeID.length-1;0<=t;t--)ValidatorBehavior.listTypeID[t].isMainTypeID&&e.push(ValidatorBehavior.listTypeID[t]);return e}function validateLengthID(e,t){if(null==e)return!1;e=e.trim();return e.length==t||0==e.length}ConstantsBehaivor.PLACEHOLDER_ACCOUNT_NUMBER="28 caracteres (>AAAAAAAAAAAAAaaaaaaaaaaaaaaa)",ConstantsBehaivor.PLACEHOLDER_PHONE="8 dígitos (######)",ConstantsBehaivor.PLACEHOLDER_CELLPHONE="8 dígitos ([2-7]#######)",ConstantsBehaivor.PLACEHOLDER_DNI="13 dígitos (#############)",ConstantsBehaivor.PLACEHOLDER_RUC="",ConstantsBehaivor.PLACEHOLDER_TIME="24H(23:59)",ConstantsBehaivor.SYMBOLMONEY="Q",ConstantsBehaivor.PLACEHOLDER_SELECTION_FIELD="Seleccione una opción",ConstantsBehaivor.PLACEHOLDER_EMAIL_FIELD="ejemplo@correo.com",ConstantsBehaivor.PLACEHOLDER_SHORT_DATE="dd-MM-yyyy",ConstantsBehaivor.PLACEHOLDER_LONG_DATE="dd-MM-yyyy HH:mm:ss",ConstantsBehaivor.PATTERN_ACCOUNT_NUMBER="^([0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9])+$",ConstantsBehaivor.PATTERN_CELLPHONE="^([2-7][0-9][0-9][0-9][0-9][0-9][0-9][0-9])+$",ConstantsBehaivor.PATTERN_PHONE="^([2-7][0-9][0-9][0-9][0-9][0-9][0-9][0-9])+$",ConstantsBehaivor.PATTERN_CED="^([0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9])+$",ConstantsBehaivor.PATTERN_RUC="^([0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9])+$",ConstantsBehaivor.PATTERN_SHORTDATE="dd/MM/yyyy",ConstantsBehaivor.PATTERN_LONGDATE="dd/MM/yyyy HH:mm:ss",ConstantsBehaivor.PATTERN_TIME="HH:mm",ConstantsBehaivor.PATTERN_DATETIME="dd/MM/yyyy HH:mm",ConstantsBehaivor.PATTERN_SHORTDATE_ES="dd/MM/aaaa",ConstantsBehaivor.SEPARATOR_DATE="/",ConstantsBehaivor.SEPARATOR_PHONE="-",ConstantsBehaivor.INIT_NUMBER_CELLPHONE="",ConstantsBehaivor.CODE_LENGTH_UG2=2,ConstantsBehaivor.CODE_LENGTH_UG3=8,ConstantsBehaivor.LENGTH_PHONE=8,ConstantsBehaivor.MIN_LENGTH_PHONE=8,ConstantsBehaivor.LENGTH_EXTENTION_PHONE=8,ConstantsBehaivor.LENGTH_CELLPHONE=8,ConstantsBehaivor.LENGTH_DNI=13,ConstantsBehaivor.LENGTH_RUC=12,ConstantsBehaivor.LENGTH_PASSPORT=16,ConstantsBehaivor.LENGTH_ACCOUNT_NUMBER=28,ConstantsBehaivor.LONGITUD_CEV=16,ConstantsBehaivor.LENGTH_MIN_PWD=6,ConstantsBehaivor.LENGTH_MAX_PWD=16,ConstantsBehaivor.PRECISION_DECIMAL=2,ConstantsBehaivor.LENGTH_NIR=18,ConstantsBehaivor.LENGTH_NIS=10,ConstantsBehaivor.DAYS_WEEK=new Array("Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"),ConstantsBehaivor.MONTHS_YEAR=new Array("Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"),ValidatorBehavior.listTypeID=[new DTOTypeID("CED",!0,!0,ConstantsBehaivor.LENGTH_DNI)],ValidatorBehavior.listTypeID.push(new DTOTypeID("CEV",!0,!1,ConstantsBehaivor.LENGTH_DNI)),ValidatorBehavior.listTypeID.push(new DTOTypeID("RUC",!0,!1,ConstantsBehaivor.LENGTH_RUC)),ValidatorBehavior.listTypeID.push(new DTOTypeID("PAS",!0,!1,ConstantsBehaivor.LENGTH_PASSPORT)),ValidatorBehavior.ValidateDNI=function(e,t){var r=null,r=e.trim(),n=parseInt(r.substring(9,11),10),a=parseInt(r.substring(11,13)),i=r.substring(0,8),e=parseInt(r.substring(8,9)),r=[17,8,16,16,13,14,19,8,24,21,9,30,32,21,8,17,14,5,11,11,7,17];if(0===n||0===a)return!1;if(r.length<n)return!1;if(r[n-1]<a)return!1;for(var o=0,s=0;s<i.length;s++)o+=i[s]*(s+2);return o%11===e},ValidatorBehavior.ValidateCEV=function(e){return!e||e.length<=ConstantsBehaivor.LONGITUD_CEV},ValidatorBehavior.ValidateRUC=function(e,t){var r=null;if(3<=(r=e.trim()).length&&r.length<=ConstantsBehaivor.LENGTH_RUC)return verificarDPINIT(r);return!1},ValidatorBehavior.ValidatePassport=function(e,t){return 0==e||null!=e&&null!=e&&0!=e.length&&e.trim().length<=ConstantsBehaivor.LENGTH_PASSPORT},ValidatorBehavior.IsConventionalPhone=function(e,t){return!0},ValidatorBehavior.IsCellPhone=function(e){e=e.value;return!(null!=e&&0<e.length)||null!=new RegExp(ConstantsBehaivor.PATTERN_CELLPHONE,"g").exec(e)};var GlobalPush,verificarDPI=function(e){for(var t=0,r=(e=e.length<9?e.padStart(9,"0"):e).length,n="",a=(i=e.substring(0,e.length-1)).length-1;-1<a;a--)n+=i[a];for(var i=n.padStart(10,"0"),a=0,o=0;a<i.length;a++)t+=parseInt(i[a])*o,10==++o&&(o=0);var s=(11-t%11).toString();return"11"==s?s="0":"10"==s&&(s="X"),s==e.substring(r-1,r)},verificarDPINIT=function(e){var t=0;if(e.length<=9)return nitValido(e);for(var r=e.length,n="",a=(i=e.substring(0,e.length-1)).length-1;-1<a;a--)n+=i[a];for(var i=n.padStart(10,"0"),a=0,o=0;a<i.length;a++)t+=parseInt(i[a])*o,10==++o&&(o=0);var s=(11-t%11).toString();return"11"==s?s="0":"10"==s&&(s="K"),s==e.substring(r-1,r)},nitValido=function(e){try{if("0"==(e=e.replace("-","").toUpperCase()).toString())return!1;for(var t=e.length-1,r=e.substring(0,t),n=e.substring(e.length-1,e.length),a=r.length+1,i=0,o=0;o<=r.length-1;o++)i+=parseInt(e.substring(o,o+1))*a,a-=1;var s=0,l=(s=(11-i%11)%11).toString();return 10==s&&"K"==n||l==n?!0:!1}catch(e){return!1}};$(function(){$.when($.getJSON("js/devextreme/localization/dx.messages.es.json")).then(function(e){Globalize.loadMessages(e)}),$.when($.getJSON("js/devextreme/localization/es-EC/ca-gregorian.json"),$.getJSON("js/devextreme/localization/es-EC/numbers.json"),$.getJSON("js/devextreme/localization/es-EC/dataFields.json"),$.getJSON("js/devextreme/localization/es-EC/numbers.json"),$.getJSON("js/devextreme/localization/es-EC/timeZoneNames.json"),$.getJSON("js/devextreme/localization/es-EC/suplemental/likelySubtags.json"),$.getJSON("js/devextreme/localization/es-EC/suplemental/timeData.json"),$.getJSON("js/devextreme/localization/es-EC/suplemental/weekData.json"),$.getJSON("js/devextreme/localization/es-EC/suplemental/currencyData.json"),$.getJSON("js/devextreme/localization/es-EC/suplemental/numberingSystem.json")).then(function(){return[].slice.apply(arguments,[0]).map(function(e){return e[0]})}).then(Globalize.load).then(function(){Globalize.locale("es-EC")})}),function(e,t){"function"==typeof define&&define.amd?define([],t):e.forge=t()}(this,function(){var e,s,l,d,i,p,f,y,h,r,n,g,m,v,o;return p={},f={},y={},h={},r=Object.prototype.hasOwnProperty,n=[].slice,g=/\.js$/,m=function(e,t){var r,n,a=c(e),i=a[0];return e=a[1],i&&(r=S(i=u(i,t))),i?e=r&&r.normalize?r.normalize(e,(n=t,function(e){return u(e,n)})):u(e,t):(i=(a=c(e=u(e,t)))[0],e=a[1],i&&(r=S(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:r}},v={require:function(e){return E(e)},exports:function(e){var t=p[e];return void 0!==t?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:(t=e,function(){return y&&y.config&&y.config[t]||{}})};var t}},o=function(e,t,r,n){var a,i,o,s,l,u=[],c=typeof r;if(n=n||e,"undefined"==c||"function"==c){for(t=!t.length&&r.length?["require","exports","module"]:t,s=0;s<t.length;s+=1)if("require"===(i=(o=m(t[s],n)).f))u[s]=v.require(e);else if("exports"===i)u[s]=v.exports(e),l=!0;else if("module"===i)a=u[s]=v.module(e);else if(C(p,i)||C(f,i)||C(h,i))u[s]=S(i);else{if(!o.p)throw new Error(e+" missing "+i);o.p.load(o.n,E(n,!0),function(t){return function(e){p[t]=e}}(i),{}),u[s]=p[i]}c=r?r.apply(p[e],u):void 0,e&&(a&&a.exports!==d&&a.exports!==p[e]?p[e]=a.exports:c===d&&l||(p[e]=c))}else e&&(p[e]=r)},e=s=i=function(e,t,r,n,a){if("string"==typeof e)return v[e]?v[e](t):S(m(e,t).f);if(!e.splice){if((y=e).deps&&i(y.deps,y.callback),!t)return;t.splice?(e=t,t=r,r=null):e=d}return t=t||function(){},"function"==typeof r&&(r=n,n=a),n?o(d,e,t,r):setTimeout(function(){o(d,e,t,r)},4),i},i.config=function(e){return i(e)},e._defined=p,(l=function(e,t,r){t.splice||(r=t,t=[]),C(p,e)||C(f,e)||(f[e]=[e,t,r])}).amd={jQuery:!0},l("node_modules/almond/almond",function(){}),function(){function a(e){function n(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(u.isArrayBuffer(e)||u.isArrayBufferView(e)){var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(e){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof n||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}var t,r,a,i,o,s,u=e.util=e.util||{};"undefined"!=typeof process&&process.nextTick?(u.nextTick=process.nextTick,"function"==typeof setImmediate?u.setImmediate=setImmediate:u.setImmediate=u.nextTick):"function"==typeof setImmediate?(u.setImmediate=function(){return setImmediate.apply(void 0,arguments)},u.nextTick=function(e){return setImmediate(e)}):(u.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage&&(t="forge.setImmediate",o=[],u.setImmediate=function(e){o.push(e),1===o.length&&window.postMessage(t,"*")},window.addEventListener("message",function(e){e.source===window&&e.data===t&&(e.stopPropagation(),e=o.slice(),o.length=0,e.forEach(function(e){e()}))},!0)),"undefined"!=typeof MutationObserver&&(r=Date.now(),a=!0,i=document.createElement("div"),o=[],new MutationObserver(function(){var e=o.slice();o.length=0,e.forEach(function(e){e()})}).observe(i,{attributes:!0}),s=u.setImmediate,u.setImmediate=function(e){15<Date.now()-r?(r=Date.now(),s(e)):(o.push(e),1===o.length&&i.setAttribute("a",a=!a))}),u.nextTick=u.setImmediate),u.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},u.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},u.isArrayBufferView=function(e){return e&&u.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},u.ByteBuffer=n,u.ByteStringBuffer=n;u.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,4096<this._constructedStringLength&&(this.data.substr(0,1),this._constructedStringLength=0)},u.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},u.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},u.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},u.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;0<t;)1&t&&(r+=e),0<(t>>>=1)&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},u.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},u.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(u.encodeUtf8(e))},u.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},u.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},u.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},u.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},u.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},u.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},u.ByteStringBuffer.prototype.putInt=function(e,t){for(var r="";t-=8,r+=String.fromCharCode(e>>t&255),0<t;);return this.putBytes(r)},u.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},u.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},u.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},u.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},u.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},u.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},u.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},u.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},u.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},u.ByteStringBuffer.prototype.getInt=function(e){for(var t=0;t=(t<<8)+this.data.charCodeAt(this.read++),0<(e-=8););return t},u.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),e=2<<e-2;return e<=t&&(t-=e<<1),t},u.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},u.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},u.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},u.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},u.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},u.ByteStringBuffer.prototype.copy=function(){var e=u.createBuffer(this.data);return e.read=this.read,e},u.ByteStringBuffer.prototype.compact=function(){return 0<this.read&&(this.data=this.data.slice(this.read),this.read=0),this},u.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},u.ByteStringBuffer.prototype.truncate=function(e){e=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,e),this.read=0,this},u.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},u.ByteStringBuffer.prototype.toString=function(){return u.decodeUtf8(this.bytes())},u.DataBuffer=function(e,t){this.read=(t=t||{}).readOffset||0,this.growSize=t.growSize||1024;var r=u.isArrayBuffer(e),n=u.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},u.DataBuffer.prototype.length=function(){return this.write-this.read},u.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},u.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);e=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),t=new Uint8Array(this.length()+t);return t.set(e),this.data=new DataView(t.buffer),this},u.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},u.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},u.DataBuffer.prototype.putBytes=function(e,t){if(u.isArrayBufferView(e)){var r=(n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(u.isArrayBuffer(e)){var n=new Uint8Array(e);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(e instanceof u.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&u.isArrayBufferView(e.data)){n=new Uint8Array(e.data.byteLength,e.read,e.length());return this.accommodate(n.byteLength),new Uint8Array(e.data.byteLength,this.write).set(n),this.write+=n.byteLength,this}if(e instanceof u.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"!=typeof e)throw Error("Invalid parameter: "+e);var a;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=u.binary.hex.decode(e,a,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),a=new Uint8Array(this.data.buffer,this.write),this.write+=u.binary.base64.decode(e,a,this.write),this;if("utf8"===t&&(e=u.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=u.binary.raw.decode(a),this;if("utf16"===t)return this.accommodate(2*e.length),a=new Uint16Array(this.data.buffer,this.write),this.write+=u.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)},u.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},u.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},u.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},u.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},u.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},u.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},u.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},u.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},u.DataBuffer.prototype.putInt=function(e,t){for(this.accommodate(t/8);t-=8,this.data.setInt8(this.write++,e>>t&255),0<t;);return this},u.DataBuffer.prototype.putSignedInt=function(e,t){return this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},u.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},u.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},u.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},u.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},u.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},u.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},u.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},u.DataBuffer.prototype.getInt=function(e){for(var t=0;t=(t<<8)+this.data.getInt8(this.read++),0<(e-=8););return t},u.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),e=2<<e-2;return e<=t&&(t-=e<<1),t},u.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},u.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},u.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},u.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},u.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},u.DataBuffer.prototype.copy=function(){return new u.DataBuffer(this)},u.DataBuffer.prototype.compact=function(){var e,t;return 0<this.read&&(e=new Uint8Array(this.data.buffer,this.read),(t=new Uint8Array(e.byteLength)).set(e),this.data=new DataView(t),this.write-=this.read,this.read=0),this},u.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},u.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},u.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},u.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return u.binary.raw.encode(t);if("hex"===e)return u.binary.hex.encode(t);if("base64"===e)return u.binary.base64.encode(t);if("utf8"===e)return u.text.utf8.decode(t);if("utf16"===e)return u.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},u.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=u.encodeUtf8(e)),new u.ByteBuffer(e)},u.fillString=function(e,t){for(var r="";0<t;)1&t&&(r+=e),0<(t>>>=1)&&(e+=e);return r},u.xorBytes=function(e,t,r){for(var n,a="",i="",o=0,s=0;0<r;--r,++o)n=e.charCodeAt(o)^t.charCodeAt(o),10<=s&&(a+=i,i="",s=0),i+=String.fromCharCode(n),++s;return a+=i},u.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},u.bytesToHex=function(e){return u.createBuffer(e).toHex()},u.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];u.encode64=function(e,t){for(var r,n,a,i="",o="",s=0;s<e.length;)r=e.charCodeAt(s++),n=e.charCodeAt(s++),a=e.charCodeAt(s++),i+=l.charAt(r>>2),i+=l.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=l.charAt((15&n)<<2|a>>6),i+=isNaN(a)?"=":l.charAt(63&a)),t&&i.length>t&&(o+=i.substr(0,t)+"\r\n",i=i.substr(t));return o+=i},u.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,a,i="",o=0;o<e.length;)t=c[e.charCodeAt(o++)-43],r=c[e.charCodeAt(o++)-43],n=c[e.charCodeAt(o++)-43],a=c[e.charCodeAt(o++)-43],i+=String.fromCharCode(t<<2|r>>4),64!==n&&(i+=String.fromCharCode((15&r)<<4|n>>2),64!==a&&(i+=String.fromCharCode((3&n)<<6|a)));return i},u.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},u.decodeUtf8=function(e){return decodeURIComponent(escape(e))},u.binary={raw:{},hex:{},base64:{}},u.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},u.binary.raw.decode=function(e,t,r){for(var n=(n=t)||new Uint8Array(e.length),a=r=r||0,i=0;i<e.length;++i)n[a++]=e.charCodeAt(i);return t?a-r:n},u.binary.hex.encode=u.bytesToHex,u.binary.hex.decode=function(e,t,r){var n=(n=t)||new Uint8Array(Math.ceil(e.length/2)),a=0,i=r=r||0;for(1&e.length&&(a=1,n[i++]=parseInt(e[0],16));a<e.length;a+=2)n[i++]=parseInt(e.substr(a,2),16);return t?i-r:n},u.binary.base64.encode=function(e,t){for(var r,n,a,i="",o="",s=0;s<e.byteLength;)r=e[s++],n=e[s++],a=e[s++],i+=l.charAt(r>>2),i+=l.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=l.charAt((15&n)<<2|a>>6),i+=isNaN(a)?"=":l.charAt(63&a)),t&&i.length>t&&(o+=i.substr(0,t)+"\r\n",i=i.substr(t));return o+=i},u.binary.base64.decode=function(e,t,r){var n=(n=t)||new Uint8Array(3*Math.ceil(e.length/4));e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var a,i,o,s,l=0,u=r=r||0;l<e.length;)a=c[e.charCodeAt(l++)-43],i=c[e.charCodeAt(l++)-43],o=c[e.charCodeAt(l++)-43],s=c[e.charCodeAt(l++)-43],n[u++]=a<<2|i>>4,64!==o&&(n[u++]=(15&i)<<4|o>>2,64!==s&&(n[u++]=(3&o)<<6|s));return t?u-r:n.subarray(0,u)},u.text={utf8:{},utf16:{}},u.text.utf8.encode=function(e,t,r){e=u.encodeUtf8(e);for(var n=(n=t)||new Uint8Array(e.length),a=r=r||0,i=0;i<e.length;++i)n[a++]=e.charCodeAt(i);return t?a-r:n},u.text.utf8.decode=function(e){return u.decodeUtf8(String.fromCharCode.apply(null,e))},u.text.utf16.encode=function(e,t,r){for(var n=(n=t)||new Uint8Array(2*e.length),a=new Uint16Array(n.buffer),i=r=r||0,o=r,s=0;s<e.length;++s)a[o++]=e.charCodeAt(s),i+=2;return t?i-r:n},u.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},u.deflate=function(e,t,r){return t=u.decode64(e.deflate(u.encode64(t)).rval),r&&(e=2,r=t.charCodeAt(1),t=t.substring(e=32&r?6:e,t.length-4)),t},u.inflate=function(e,t,r){t=e.inflate(u.encode64(t)).rval;return null===t?null:u.decode64(t)};function d(e,t,r){if(!e)throw new Error("WebStorage not available.");if(void 0!==(t=null===r?e.removeItem(t):(r=u.encode64(JSON.stringify(r)),e.setItem(t,r)))&&!0!==t.rval){r=new Error(t.error.message);throw r.id=t.error.id,r.name=t.error.name,r}}function p(e,t){if(!e)throw new Error("WebStorage not available.");if(t=e.getItem(t),e.init)if(null===t.rval){if(t.error){e=new Error(t.error.message);throw e.id=t.error.id,e.name=t.error.name,e}t=null}else t=t.rval;return t=null!==t?JSON.parse(u.decode64(t)):t}function f(e,t,r,n){var a=p(e,t);(a=null===a?{}:a)[r]=n,d(e,t,a)}function h(e,t,r){return t=null!==(t=p(e,t))?r in t?t[r]:null:t}function y(e,t,r){var n=p(e,t);if(null!==n&&r in n){delete n[r];var a,i=!0;for(a in n){i=!1;break}d(e,t,n=i?null:n)}}function g(e,t){d(e,t,null)}function m(e,t,r){var n,a,i=null,o=!1,s=null;for(a in r=void 0===r?["web","flash"]:r){n=r[a];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");i=e.apply(this,t),o="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,i=e.apply(this,t),o=!0)}catch(e){s=e}if(o)break}if(!o)throw s;return i}u.setItem=function(e,t,r,n,a){m(f,arguments,a)},u.getItem=function(e,t,r,n){return m(h,arguments,n)},u.removeItem=function(e,t,r,n){m(y,arguments,n)},u.clearItems=function(e,t,r){m(g,arguments,r)},u.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;t=t.exec(e),t=null===t?null:{full:e,scheme:t[1],host:t[2],port:t[3],path:t[4]};return t&&(t.fullHost=t.host,t.port?(80!==t.port&&"http"===t.scheme||443!==t.port&&"https"===t.scheme)&&(t.fullHost+=":"+t.port):"http"===t.scheme?t.port=80:"https"===t.scheme&&(t.port=443),t.full=t.scheme+"://"+t.fullHost),t};var v=null;u.getQueryVariables=function(e){function t(e){for(var t={},r=e.split("&"),n=0;n<r.length;n++){var a,i=r[n].indexOf("="),i=0<i?(a=r[n].substring(0,i),r[n].substring(i+1)):(a=r[n],null);a in t||(t[a]=[]),a in Object.prototype||null===i||t[a].push(unescape(i))}return t}e=void 0===e?v=null===v?"undefined"!=typeof window&&window.location&&window.location.search?t(window.location.search.substring(1)):{}:v:t(e);return e},u.parseFragment=function(e){var t=e,r="",n=e.indexOf("?");0<n&&(t=e.substring(0,n),r=e.substring(n+1));n=t.split("/");return 0<n.length&&""===n[0]&&n.shift(),{pathString:t,queryString:r,path:n,query:""===r?{}:u.getQueryVariables(r)}},u.makeRequest=function(e){var n=u.parseFragment(e),r={path:n.pathString,query:n.queryString,getPath:function(e){return void 0===e?n.path:n.path[e]},getQuery:function(e,t){var r;return void 0===e?r=n.query:(r=n.query[e])&&void 0!==t&&(r=r[t]),r},getQueryLast:function(e,t){e=r.getQuery(e),t=e?e[e.length-1]:t;return t}};return r},u.makeLink=function(e,t,r){e=jQuery.isArray(e)?e.join("/"):e;t=jQuery.param(t||{});return e+(0<t.length?"?"+t:"")+(0<(r=r||"").length?"#"+r:"")},u.setPath=function(e,t,r){if("object"==typeof e&&null!==e)for(var n=0,a=t.length;n<a;){var i,o=t[n++];n==a?e[o]=r:((!(i=o in e)||i&&"object"!=typeof e[o]||i&&null===e[o])&&(e[o]={}),e=e[o])}},u.getPath=function(e,t,r){for(var n=0,a=t.length,i=!0;i&&n<a&&"object"==typeof e&&null!==e;){var o=t[n++];(i=o in e)&&(e=e[o])}return i?e:r},u.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var r=0,n=t.length;r<n;){var a=t[r++];if(r==n)delete e[a];else{if(!(a in e&&"object"==typeof e[a]&&null!==e[a]))break;e=e[a]}}},u.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},u.format=function(e){for(var t,r,n=/%./g,a=0,i=[],o=0;t=n.exec(e);){0<(r=e.substring(o,n.lastIndex-2)).length&&i.push(r);var o=n.lastIndex,s=t[0][1];switch(s){case"s":case"o":a<arguments.length?i.push(arguments[1+a++]):i.push("<?>");break;case"%":i.push("%");break;default:i.push("<%"+s+"?>")}}return i.push(e.substring(o)),i.join("")},u.formatNumber=function(e,t,r,n){var a=e,i=isNaN(t=Math.abs(t))?2:t,o=void 0===r?",":r,e=void 0===n?".":n,t=a<0?"-":"",r=parseInt(a=Math.abs(+a||0).toFixed(i),10)+"",n=3<r.length?r.length%3:0;return t+(n?r.substr(0,n)+e:"")+r.substr(n).replace(/(\d{3})(?=\d)/g,"$1"+e)+(i?o+Math.abs(a-r).toFixed(i).slice(2):"")},u.formatSize=function(e){return e=1073741824<=e?u.formatNumber(e/1073741824,2,".","")+" GiB":1048576<=e?u.formatNumber(e/1048576,2,".","")+" MiB":1024<=e?u.formatNumber(e/1024,0)+" KiB":u.formatNumber(e,0)+" bytes"},u.bytesFromIP=function(e){return-1!==e.indexOf(".")?u.bytesFromIPv4(e):-1!==e.indexOf(":")?u.bytesFromIPv6(e):null},u.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=u.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},u.bytesFromIPv6=function(e){for(var t,r=0,n=2*(8-(e=e.split(":").filter(function(e){return 0===e.length&&++r,!0})).length+r),a=u.createBuffer(),i=0;i<8;++i)e[i]&&0!==e[i].length?((t=u.hexToBytes(e[i])).length<2&&a.putByte(0),a.putBytes(t)):(a.fillWithByte(0,n),n=0);return a.getBytes()},u.bytesToIP=function(e){return 4===e.length?u.bytesToIPv4(e):16===e.length?u.bytesToIPv6(e):null},u.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},u.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t,r=[],n=[],a=0,i=0;i<e.length;i+=2){for(var o,s,l=u.bytesToHex(e[i]+e[i+1]);"0"===l[0]&&"0"!==l;)l=l.substr(1);"0"===l&&(o=n[n.length-1],s=r.length,o&&s===o.end+1?(o.end=s,o.end-o.start>n[a].end-n[a].start&&(a=n.length-1)):n.push({start:s,end:s})),r.push(l)}return 0<n.length&&(0<(t=n[a]).end-t.start&&(r.splice(t.start,t.end-t.start+1,""),0===t.start&&r.unshift(""),7===t.end&&r.push(""))),r.join(":")},u.estimateCores=function(e,t){if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in u&&!e.update)return t(null,u.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&0<navigator.hardwareConcurrency)return u.cores=navigator.hardwareConcurrency,t(null,u.cores);if("undefined"==typeof Worker)return u.cores=1,t(null,u.cores);if("undefined"==typeof Blob)return u.cores=2,t(null,u.cores);var o=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){for(var t=Date.now(),r=t+4;Date.now()<r;);self.postMessage({st:t,et:r})})}.toString(),")()"],{type:"application/javascript"}));!function r(n,a,i){if(0===a){var e=Math.floor(n.reduce(function(e,t){return e+t},0)/n.length);return u.cores=Math.max(1,e),URL.revokeObjectURL(o),t(null,u.cores)}!function(r,n){for(var a=[],i=[],e=0;e<r;++e){var t=new Worker(o);t.addEventListener("message",function(e){if(i.push(e.data),i.length===r){for(var t=0;t<r;++t)a[t].terminate();n(null,i)}}),a.push(t)}for(e=0;e<r;++e)a[e].postMessage(e)}(i,function(e,t){n.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var a,i=t[n],o=r[n]=[],s=0;s<e;++s)n!==s&&(a=t[s],(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&o.push(s));return r.reduce(function(e,t){return Math.max(e,t.length)},0)}(i,t)),r(n,a-1,i)})}([],5,16)}}var i="util";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/util",["require","module"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(n){n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(e,t){var r=e;if(!(r="string"==typeof r?(r=n.cipher.getAlgorithm(r))&&r():r))throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},n.cipher.createDecipher=function(e,t){var r=e;if(!(r="string"==typeof r?(r=n.cipher.getAlgorithm(r))&&r():r))throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},n.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),n.cipher.algorithms[e]=t},n.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[e]:null};var e=n.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};e.prototype.start=function(e){var t,r={};for(t in e=e||{})r[t]=e[t];r.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=e.output||n.util.createBuffer(),this.mode.start(r)},e.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},e.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}}var i="cipher";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/cipher",["require","module","./util"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(i){function t(e){if("string"==typeof e&&(e=i.util.createBuffer(e)),i.util.isArray(e)&&4<e.length){var t=e;e=i.util.createBuffer();for(var r=0;r<t.length;++r)e.putByte(t[r])}return e=!i.util.isArray(e)?[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]:e}function s(e){e[e.length-1]=e[e.length-1]+1&4294967295}function o(e){return[e/4294967296|0,4294967295&e]}i.cipher=i.cipher||{};var e=i.cipher.modes=i.cipher.modes||{};e.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},e.ecb.prototype.start=function(e){},e.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&0<e.length()))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},e.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&0<e.length()))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},e.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},e.ecb.prototype.unpad=function(e,t){if(0<t.overflow)return!1;t=e.length(),t=e.at(t-1);return!(t>this.blockSize<<2)&&(e.truncate(t),!0)},e.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},e.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._prev=this._iv.slice(0)}},e.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&0<e.length()))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},e.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&0<e.length()))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},e.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},e.cbc.prototype.unpad=function(e,t){if(0<t.overflow)return!1;t=e.length(),t=e.at(t-1);return!(t>this.blockSize<<2)&&(e.truncate(t),!0)},e.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=i.util.createBuffer(),this._partialBytes=0},e.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32()^this._outBlock[a],t.putInt32(this._inBlock[a]);else{var i=(this.blockSize-n)%this.blockSize;0<i&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32()^this._outBlock[a],this._partialOutput.putInt32(this._partialBlock[a]);if(0<i)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<i&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},e.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32(),t.putInt32(this._inBlock[a]^this._outBlock[a]);else{var i=(this.blockSize-n)%this.blockSize;0<i&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[a]^this._outBlock[a]);if(0<i)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<i&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},e.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=i.util.createBuffer(),this._partialBytes=0},e.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]),this._inBlock[a]=this._outBlock[a];else{var i=(this.blockSize-n)%this.blockSize;0<i&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(0<i)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._outBlock[a];if(0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<i&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},e.ofb.prototype.decrypt=e.ofb.prototype.encrypt,e.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=i.util.createBuffer(),this._partialBytes=0},e.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=t(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]);else{var i=(this.blockSize-n)%this.blockSize;0<i&&(i=this.blockSize-i),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(0<i&&(e.read-=this.blockSize),0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<i&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}s(this._inBlock)},e.ctr.prototype.decrypt=e.ctr.prototype.encrypt,e.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=i.util.createBuffer(),this._partialBytes=0,this._R=3774873600},e.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=i.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?i.util.createBuffer(e.additionalData):i.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=i.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);e=r.length();if(12===e)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];0<r.length();)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(o(8*e)))}this._inBlock=this._j0.slice(0),s(this._inBlock),this._partialBytes=0,t=i.util.createBuffer(t),this._aDataLength=o(8*t.length());e=t.length()%this.blockSize;for(e&&t.fillWithByte(0,this.blockSize-e),this._s=[0,0,0,0];0<t.length();)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},e.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^=e.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-n)%this.blockSize;0<i&&(i=this.blockSize-i),this._partialOutput.clear();for(var o,a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(0===i||r){r?(o=n%this.blockSize,this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)):this._cipherLength+=this.blockSize;for(a=0;a<this._ints;++a)this._outBlock[a]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<i&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),s(this._inBlock)},e.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&0<n))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),s(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^this._hashBlock[a]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},e.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=i.util.createBuffer();e=this._aDataLength.concat(o(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,e);var n=[];this.cipher.encrypt(this._j0,n);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^n[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),r=t.decrypt&&this.tag.bytes()!==this._tag?!1:r},e.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),a=0;a<128;++a)e[a/32|0]&1<<31-a%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n);return r},e.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;0<n;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},e.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,n=this._m[r][n];t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3]}return t},e.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},e.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,a=16*r,i=new Array(a),o=0;o<a;++o){var s=[0,0,0,0];s[o/n|0]=1<<t-1<<(n-1-o%n)*t,i[o]=this.generateSubHashTable(this.multiply(s,e),t)}return i},e.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,a=new Array(r);a[n]=e.slice(0);for(var i=n>>>1;0<i;)this.pow(a[2*i],a[i]=[]),i>>=1;for(i=2;i<n;){for(var o=1;o<i;++o){var s=a[i],l=a[o];a[i+o]=[s[0]^l[0],s[1]^l[1],s[2]^l[2],s[3]^l[3]]}i*=2}for(a[0]=[0,0,0,0],i=1+n;i<r;++i){var u=a[i^n];a[i]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return a}}var i="cipherModes";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/cipherModes",["require","module","./util"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(o){function e(e,t){o.cipher.registerAlgorithm(e,function(){return new o.aes.Algorithm(e,t)})}function n(){d=!0,g=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;C=new Array(256),E=new Array(256),S=new Array(4),T=new Array(4);for(t=0;t<4;++t)S[t]=new Array(256),T[t]=new Array(256);for(var r,n=0,a=0,t=0;t<256;++t){C[n]=r=(r=a^a<<1^a<<2^a<<3^a<<4)>>8^255&r^99,E[r]=n;for(var i,o,s,l=(s=e[r])<<24^r<<16^r<<8^r^s,u=((i=e[n])^(o=e[i])^(s=e[o]))<<24^(n^s)<<16^(n^o^s)<<8^n^i^s,c=0;c<4;++c)l=(S[c][n]=l)<<24|l>>>8,u=(T[c][r]=u)<<24|u>>>8;0===n?n=a=1:(n=i^e[e[e[i^s]]],a^=e[e[a]])}}function s(e,t){for(var r,n=e.slice(0),a=1,i=n.length,o=m*(i+6+1),s=i;s<o;++s)r=n[s-1],s%i==0?(r=C[r>>>16&255]<<24^C[r>>>8&255]<<16^C[255&r]<<8^C[r>>>24]^g[a]<<24,a++):6<i&&s%i==4&&(r=C[r>>>24]<<24^C[r>>>16&255]<<16^C[r>>>8&255]<<8^C[255&r]),n[s]=n[s-i]^r;if(t){for(var l,u=T[0],c=T[1],d=T[2],p=T[3],f=n.slice(0),s=0,h=(o=n.length)-m;s<o;s+=m,h-=m)if(0===s||s===o-m)f[s]=n[h],f[s+1]=n[h+3],f[s+2]=n[h+2],f[s+3]=n[h+1];else for(var y=0;y<m;++y)l=n[h+y],f[s+(3&-y)]=u[C[l>>>24]]^c[C[l>>>16&255]]^d[C[l>>>8&255]]^p[C[255&l]];n=f}return n}function a(e,t,r,n){for(var a,i,o,s,l,u,c,d=e.length/4-1,p=n?(a=T[0],i=T[1],o=T[2],s=T[3],E):(a=S[0],i=S[1],o=S[2],s=S[3],C),f=t[0]^e[0],h=t[n?3:1]^e[1],y=t[2]^e[2],g=t[n?1:3]^e[3],m=3,v=1;v<d;++v)l=a[f>>>24]^i[h>>>16&255]^o[y>>>8&255]^s[255&g]^e[++m],u=a[h>>>24]^i[y>>>16&255]^o[g>>>8&255]^s[255&f]^e[++m],c=a[y>>>24]^i[g>>>16&255]^o[f>>>8&255]^s[255&h]^e[++m],g=a[g>>>24]^i[f>>>16&255]^o[h>>>8&255]^s[255&y]^e[++m],f=l,h=u,y=c;r[0]=p[f>>>24]<<24^p[h>>>16&255]<<16^p[y>>>8&255]<<8^p[255&g]^e[++m],r[n?3:1]=p[h>>>24]<<24^p[y>>>16&255]<<16^p[g>>>8&255]<<8^p[255&f]^e[++m],r[2]=p[y>>>24]<<24^p[g>>>16&255]<<16^p[f>>>8&255]<<8^p[255&h]^e[++m],r[n?1:3]=p[g>>>24]<<24^p[f>>>16&255]<<16^p[h>>>8&255]<<8^p[255&y]^e[++m]}function i(e){var t="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),n=e.decrypt?o.cipher.createDecipher(t,e.key):o.cipher.createCipher(t,e.key),a=n.start;return n.start=function(e,t){var r=null;t instanceof o.util.ByteBuffer&&(r=t,t={}),(t=t||{}).output=r,t.iv=e,a.call(n,t)},n}o.aes=o.aes||{},o.aes.startEncrypting=function(e,t,r,n){n=i({key:e,output:r,decrypt:!1,mode:n});return n.start(t),n},o.aes.createEncryptionCipher=function(e,t){return i({key:e,output:null,decrypt:!1,mode:t})},o.aes.startDecrypting=function(e,t,r,n){n=i({key:e,output:r,decrypt:!0,mode:n});return n.start(t),n},o.aes.createDecryptionCipher=function(e,t){return i({key:e,output:null,decrypt:!0,mode:t})},o.aes.Algorithm=function(e,t){d||n();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return a(r._w,e,t,!1)},decrypt:function(e,t){return a(r._w,e,t,!0)}}}),r._init=!1},o.aes.Algorithm.prototype.initialize=function(e){if(!this._init){if("string"!=typeof(r=e.key)||16!==r.length&&24!==r.length&&32!==r.length){if(o.util.isArray(r)&&(16===r.length||24===r.length||32===r.length))for(var t=r,r=o.util.createBuffer(),n=0;n<t.length;++n)r.putByte(t[n])}else r=o.util.createBuffer(r);if(!o.util.isArray(r)){t=r,r=[];var a=t.length();if(16===a||24===a||32===a){a>>>=2;for(n=0;n<a;++n)r.push(t.getInt32())}}if(!o.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var i=this.mode.name,i=-1!==["CFB","OFB","CTR","GCM"].indexOf(i);this._w=s(r,e.decrypt&&!i),this._init=!0}},o.aes._expandKey=function(e,t){return d||n(),s(e,t)},o.aes._updateBlock=a,e("AES-ECB",o.cipher.modes.ecb),e("AES-CBC",o.cipher.modes.cbc),e("AES-CFB",o.cipher.modes.cfb),e("AES-OFB",o.cipher.modes.ofb),e("AES-CTR",o.cipher.modes.ctr),e("AES-GCM",o.cipher.modes.gcm);var C,E,g,S,T,d=!1,m=4}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/aes",["require","module","./cipher","./cipherModes","./util"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.aes)return e.aes;e.defined.aes=!0;for(var r=0;r<t.length;++r)t[r](e);return e.aes}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(e){e.pki=e.pki||{};e=e.pki.oids=e.oids=e.oids||{};e["1.2.840.113549.1.1.1"]="rsaEncryption",e.rsaEncryption="1.2.840.113549.1.1.1",e["1.2.840.113549.1.1.4"]="md5WithRSAEncryption",e.md5WithRSAEncryption="1.2.840.113549.1.1.4",e["1.2.840.113549.1.1.5"]="sha1WithRSAEncryption",e.sha1WithRSAEncryption="1.2.840.113549.1.1.5",e["1.2.840.113549.1.1.7"]="RSAES-OAEP",e["RSAES-OAEP"]="1.2.840.113549.1.1.7",e["1.2.840.113549.1.1.8"]="mgf1",e.mgf1="1.2.840.113549.1.1.8",e["1.2.840.113549.1.1.9"]="pSpecified",e.pSpecified="1.2.840.113549.1.1.9",e["1.2.840.113549.1.1.10"]="RSASSA-PSS",e["RSASSA-PSS"]="1.2.840.113549.1.1.10",e["1.2.840.113549.1.1.11"]="sha256WithRSAEncryption",e.sha256WithRSAEncryption="1.2.840.113549.1.1.11",e["1.2.840.113549.1.1.12"]="sha384WithRSAEncryption",e.sha384WithRSAEncryption="1.2.840.113549.1.1.12",e["1.2.840.113549.1.1.13"]="sha512WithRSAEncryption",e.sha512WithRSAEncryption="1.2.840.113549.1.1.13",e["1.3.14.3.2.7"]="desCBC",e.desCBC="1.3.14.3.2.7",e["1.3.14.3.2.26"]="sha1",e.sha1="1.3.14.3.2.26",e["2.16.840.1.101.3.4.2.1"]="sha256",e.sha256="2.16.840.1.101.3.4.2.1",e["2.16.840.1.101.3.4.2.2"]="sha384",e.sha384="2.16.840.1.101.3.4.2.2",e["2.16.840.1.101.3.4.2.3"]="sha512",e.sha512="2.16.840.1.101.3.4.2.3",e["1.2.840.113549.2.5"]="md5",e.md5="1.2.840.113549.2.5",e["1.2.840.113549.1.7.1"]="data",e.data="1.2.840.113549.1.7.1",e["1.2.840.113549.1.7.2"]="signedData",e.signedData="1.2.840.113549.1.7.2",e["1.2.840.113549.1.7.3"]="envelopedData",e.envelopedData="1.2.840.113549.1.7.3",e["1.2.840.113549.1.7.4"]="signedAndEnvelopedData",e.signedAndEnvelopedData="1.2.840.113549.1.7.4",e["1.2.840.113549.1.7.5"]="digestedData",e.digestedData="1.2.840.113549.1.7.5",e["1.2.840.113549.1.7.6"]="encryptedData",e.encryptedData="1.2.840.113549.1.7.6",e["1.2.840.113549.1.9.1"]="emailAddress",e.emailAddress="1.2.840.113549.1.9.1",e["1.2.840.113549.1.9.2"]="unstructuredName",e.unstructuredName="1.2.840.113549.1.9.2",e["1.2.840.113549.1.9.3"]="contentType",e.contentType="1.2.840.113549.1.9.3",e["1.2.840.113549.1.9.4"]="messageDigest",e.messageDigest="1.2.840.113549.1.9.4",e["1.2.840.113549.1.9.5"]="signingTime",e.signingTime="1.2.840.113549.1.9.5",e["1.2.840.113549.1.9.6"]="counterSignature",e.counterSignature="1.2.840.113549.1.9.6",e["1.2.840.113549.1.9.7"]="challengePassword",e.challengePassword="1.2.840.113549.1.9.7",e["1.2.840.113549.1.9.8"]="unstructuredAddress",e.unstructuredAddress="1.2.840.113549.1.9.8",e["1.2.840.113549.1.9.14"]="extensionRequest",e.extensionRequest="1.2.840.113549.1.9.14",e["1.2.840.113549.1.9.20"]="friendlyName",e.friendlyName="1.2.840.113549.1.9.20",e["1.2.840.113549.1.9.21"]="localKeyId",e.localKeyId="1.2.840.113549.1.9.21",e["1.2.840.113549.1.9.22.1"]="x509Certificate",e.x509Certificate="1.2.840.113549.1.9.22.1",e["1.2.840.113549.1.12.10.1.1"]="keyBag",e.keyBag="1.2.840.113549.1.12.10.1.1",e["1.2.840.113549.1.12.10.1.2"]="pkcs8ShroudedKeyBag",e.pkcs8ShroudedKeyBag="1.2.840.113549.1.12.10.1.2",e["1.2.840.113549.1.12.10.1.3"]="certBag",e.certBag="1.2.840.113549.1.12.10.1.3",e["1.2.840.113549.1.12.10.1.4"]="crlBag",e.crlBag="1.2.840.113549.1.12.10.1.4",e["1.2.840.113549.1.12.10.1.5"]="secretBag",e.secretBag="1.2.840.113549.1.12.10.1.5",e["1.2.840.113549.1.12.10.1.6"]="safeContentsBag",e.safeContentsBag="1.2.840.113549.1.12.10.1.6",e["1.2.840.113549.1.5.13"]="pkcs5PBES2",e.pkcs5PBES2="1.2.840.113549.1.5.13",e["1.2.840.113549.1.5.12"]="pkcs5PBKDF2",e.pkcs5PBKDF2="1.2.840.113549.1.5.12",e["1.2.840.113549.1.12.1.1"]="pbeWithSHAAnd128BitRC4",e.pbeWithSHAAnd128BitRC4="1.2.840.113549.1.12.1.1",e["1.2.840.113549.1.12.1.2"]="pbeWithSHAAnd40BitRC4",e.pbeWithSHAAnd40BitRC4="1.2.840.113549.1.12.1.2",e["1.2.840.113549.1.12.1.3"]="pbeWithSHAAnd3-KeyTripleDES-CBC",e["pbeWithSHAAnd3-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.3",e["1.2.840.113549.1.12.1.4"]="pbeWithSHAAnd2-KeyTripleDES-CBC",e["pbeWithSHAAnd2-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.4",e["1.2.840.113549.1.12.1.5"]="pbeWithSHAAnd128BitRC2-CBC",e["pbeWithSHAAnd128BitRC2-CBC"]="1.2.840.113549.1.12.1.5",e["1.2.840.113549.1.12.1.6"]="pbewithSHAAnd40BitRC2-CBC",e["pbewithSHAAnd40BitRC2-CBC"]="1.2.840.113549.1.12.1.6",e["1.2.840.113549.3.7"]="des-EDE3-CBC",e["des-EDE3-CBC"]="1.2.840.113549.3.7",e["2.16.840.1.101.3.4.1.2"]="aes128-CBC",e["aes128-CBC"]="2.16.840.1.101.3.4.1.2",e["2.16.840.1.101.3.4.1.22"]="aes192-CBC",e["aes192-CBC"]="2.16.840.1.101.3.4.1.22",e["2.16.840.1.101.3.4.1.42"]="aes256-CBC",e["aes256-CBC"]="2.16.840.1.101.3.4.1.42",e["2.5.4.3"]="commonName",e.commonName="2.5.4.3",e["2.5.4.5"]="serialName",e.serialName="2.5.4.5",e["2.5.4.6"]="countryName",e.countryName="2.5.4.6",e["2.5.4.7"]="localityName",e.localityName="2.5.4.7",e["2.5.4.8"]="stateOrProvinceName",e.stateOrProvinceName="2.5.4.8",e["2.5.4.10"]="organizationName",e.organizationName="2.5.4.10",e["2.5.4.11"]="organizationalUnitName",e.organizationalUnitName="2.5.4.11",e["2.16.840.1.113730.1.1"]="nsCertType",e.nsCertType="2.16.840.1.113730.1.1",e["2.5.29.1"]="authorityKeyIdentifier",e["2.5.29.2"]="keyAttributes",e["2.5.29.3"]="certificatePolicies",e["2.5.29.4"]="keyUsageRestriction",e["2.5.29.5"]="policyMapping",e["2.5.29.6"]="subtreesConstraint",e["2.5.29.7"]="subjectAltName",e["2.5.29.8"]="issuerAltName",e["2.5.29.9"]="subjectDirectoryAttributes",e["2.5.29.10"]="basicConstraints",e["2.5.29.11"]="nameConstraints",e["2.5.29.12"]="policyConstraints",e["2.5.29.13"]="basicConstraints",e["2.5.29.14"]="subjectKeyIdentifier",e.subjectKeyIdentifier="2.5.29.14",e["2.5.29.15"]="keyUsage",e.keyUsage="2.5.29.15",e["2.5.29.16"]="privateKeyUsagePeriod",e["2.5.29.17"]="subjectAltName",e.subjectAltName="2.5.29.17",e["2.5.29.18"]="issuerAltName",e.issuerAltName="2.5.29.18",e["2.5.29.19"]="basicConstraints",e.basicConstraints="2.5.29.19",e["2.5.29.20"]="cRLNumber",e["2.5.29.21"]="cRLReason",e["2.5.29.22"]="expirationDate",e["2.5.29.23"]="instructionCode",e["2.5.29.24"]="invalidityDate",e["2.5.29.25"]="cRLDistributionPoints",e["2.5.29.26"]="issuingDistributionPoint",e["2.5.29.27"]="deltaCRLIndicator",e["2.5.29.28"]="issuingDistributionPoint",e["2.5.29.29"]="certificateIssuer",e["2.5.29.30"]="nameConstraints",e["2.5.29.31"]="cRLDistributionPoints",e["2.5.29.32"]="certificatePolicies",e["2.5.29.33"]="policyMappings",e["2.5.29.34"]="policyConstraints",e["2.5.29.35"]="authorityKeyIdentifier",e.authorityKeyIdentifier="2.5.29.35",e["2.5.29.36"]="policyConstraints",e["2.5.29.37"]="extKeyUsage",e.extKeyUsage="2.5.29.37",e["2.5.29.46"]="freshestCRL",e["2.5.29.54"]="inhibitAnyPolicy",e["1.3.6.1.5.5.7.3.1"]="serverAuth",e.serverAuth="1.3.6.1.5.5.7.3.1",e["1.3.6.1.5.5.7.3.2"]="clientAuth",e.clientAuth="1.3.6.1.5.5.7.3.2",e["1.3.6.1.5.5.7.3.3"]="codeSigning",e.codeSigning="1.3.6.1.5.5.7.3.3",e["1.3.6.1.5.5.7.3.4"]="emailProtection",e.emailProtection="1.3.6.1.5.5.7.3.4",e["1.3.6.1.5.5.7.3.8"]="timeStamping",e.timeStamping="1.3.6.1.5.5.7.3.8"}var i="oids";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/oids",["require","module"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(p){var f=p.asn1=p.asn1||{};f.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},f.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},f.create=function(e,t,r,n){if(p.util.isArray(n)){for(var a=[],i=0;i<n.length;++i)void 0!==n[i]&&a.push(n[i]);n=a}return{tagClass:e,type:t,constructed:r,composed:r||p.util.isArray(n),value:n}};var h=f.getBerValueLength=function(e){var t=e.getByte();if(128!==t){t=128&t?e.getInt((127&t)<<3):t;return t}};f.fromDer=function(e,t){if(void 0===t&&(t=!0),(e="string"==typeof e?p.util.createBuffer(e):e).length()<2)throw(o=new Error("Too few bytes to parse DER.")).bytes=e.length(),o;var r=192&(l=e.getByte()),n=31&l,a=h(e);if(e.length()<a){if(t)throw(o=new Error("Too few bytes to read ASN.1 value.")).detail=e.length()+" < "+a,o;a=e.length()}var i=32==(32&l);if(!(s=i)&&r===f.Class.UNIVERSAL&&n===f.Type.BITSTRING&&1<a){var o=e.read;if(0===e.getByte()){var s,l=192&(l=e.getByte());if(l===f.Class.UNIVERSAL||l===f.Class.CONTEXT_SPECIFIC)try{(s=h(e)===a-(e.read-o))&&(++o,--a)}catch(e){}}e.read=o}if(s)if(c=[],void 0===a)for(;;){if(e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2);break}c.push(f.fromDer(e,t))}else for(var u=e.length();0<a;)c.push(f.fromDer(e,t)),a-=u-e.length(),u=e.length();else{if(void 0===a){if(t)throw new Error("Non-constructed ASN.1 object of indefinite length.");a=e.length()}if(n===f.Type.BMPSTRING)for(var c="",d=0;d<a;d+=2)c+=String.fromCharCode(e.getInt16());else c=e.getBytes(a)}return f.create(r,n,i,c)},f.toDer=function(e){var t=p.util.createBuffer(),r=e.tagClass|e.type,n=p.util.createBuffer();if(e.composed){e.constructed?r|=32:n.putByte(0);for(var a=0;a<e.value.length;++a)void 0!==e.value[a]&&n.putBuffer(f.toDer(e.value[a]))}else if(e.type===f.Type.BMPSTRING)for(a=0;a<e.value.length;++a)n.putInt16(e.value.charCodeAt(a));else n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(127&n.length());else{for(var i=n.length(),o="";o+=String.fromCharCode(255&i),0<(i>>>=8););t.putByte(128|o.length);for(a=o.length-1;0<=a;--a)t.putByte(o.charCodeAt(a))}return t.putBuffer(n),t},f.oidToDer=function(e){var t,r,n,a,i=e.split("."),o=p.util.createBuffer();o.putByte(40*parseInt(i[0],10)+parseInt(i[1],10));for(var s=2;s<i.length;++s){for(t=!0,r=[],n=parseInt(i[s],10);a=127&n,n>>>=7,t||(a|=128),r.push(a),t=!1,0<n;);for(var l=r.length-1;0<=l;--l)o.putByte(r[l])}return o},f.derToOid=function(e){for(var t=(e="string"==typeof e?p.util.createBuffer(e):e).getByte(),r=Math.floor(t/40)+"."+t%40,n=0;0<e.length();)n<<=7,128&(t=e.getByte())?n+=127&t:(r+="."+(n+t),n=0);return r},f.utcTimeToDate=function(e){var t,r,n=new Date,a=50<=(a=parseInt(e.substr(0,2),10))?1900+a:2e3+a,i=parseInt(e.substr(2,2),10)-1,o=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),l=parseInt(e.substr(8,2),10),u=0;return 11<e.length&&("+"!==(r=e.charAt(t=10))&&"-"!==r&&(u=parseInt(e.substr(10,2),10),t+=2)),n.setUTCFullYear(a,i,o),n.setUTCHours(s,l,u,0),t&&("+"!==(r=e.charAt(t))&&"-"!==r||(t=60*parseInt(e.substr(t+1,2),10)+parseInt(e.substr(t+4,2),10),t*=6e4,"+"===r?n.setTime(+n-t):n.setTime(+n+t))),n},f.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,a=parseInt(e.substr(6,2),10),i=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),l=0,u=0,c=!1;"Z"===e.charAt(e.length-1)&&(c=!0);var d=e.length-5,p=e.charAt(d);return"+"!==p&&"-"!==p||(u=60*parseInt(e.substr(1+d,2),10)+parseInt(e.substr(4+d,2),10),u*=6e4,"+"===p&&(u*=-1),c=!0),"."===e.charAt(14)&&(l=1e3*parseFloat(e.substr(14),10)),c?(t.setUTCFullYear(r,n,a),t.setUTCHours(i,o,s,l),t.setTime(+t+u)):(t.setFullYear(r,n,a),t.setHours(i,o,s,l)),t},f.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},f.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},f.integerToDer=function(e){var t=p.util.createBuffer();if(-128<=e&&e<128)return t.putSignedInt(e,8);if(-32768<=e&&e<32768)return t.putSignedInt(e,16);if(-8388608<=e&&e<8388608)return t.putSignedInt(e,24);if(-2147483648<=e&&e<2147483648)return t.putSignedInt(e,32);t=new Error("Integer too large; max is 32-bits.");throw t.integer=e,t},f.derToInteger=function(e){var t=8*(e="string"==typeof e?p.util.createBuffer(e):e).length();if(32<t)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},f.validate=function(e,t,r,n){var a=!1;if(e.tagClass!==t.tagClass&&void 0!==t.tagClass||e.type!==t.type&&void 0!==t.type)n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||void 0===t.constructed){if(a=!0,t.value&&p.util.isArray(t.value))for(var i=0,o=0;a&&o<t.value.length;++o)a=t.value[o].optional||!1,e.value[i]&&((a=f.validate(e.value[i],t.value[o],r,n))?++i:t.value[o].optional&&(a=!0)),!a&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');a&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e))}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return a};var u=/[^\\u0000-\\u00ff]/;f.prettyPrint=function(t,e,r){var n="";r=r||2,0<(e=e||0)&&(n+="\n");for(var a,i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case f.Class.UNIVERSAL:n+="Universal:";break;case f.Class.APPLICATION:n+="Application:";break;case f.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case f.Class.PRIVATE:n+="Private:"}if(t.tagClass===f.Class.UNIVERSAL)switch(n+=t.type,t.type){case f.Type.NONE:n+=" (None)";break;case f.Type.BOOLEAN:n+=" (Boolean)";break;case f.Type.BITSTRING:n+=" (Bit string)";break;case f.Type.INTEGER:n+=" (Integer)";break;case f.Type.OCTETSTRING:n+=" (Octet string)";break;case f.Type.NULL:n+=" (Null)";break;case f.Type.OID:n+=" (Object Identifier)";break;case f.Type.ODESC:n+=" (Object Descriptor)";break;case f.Type.EXTERNAL:n+=" (External or Instance of)";break;case f.Type.REAL:n+=" (Real)";break;case f.Type.ENUMERATED:n+=" (Enumerated)";break;case f.Type.EMBEDDED:n+=" (Embedded PDV)";break;case f.Type.UTF8:n+=" (UTF8)";break;case f.Type.ROID:n+=" (Relative Object Identifier)";break;case f.Type.SEQUENCE:n+=" (Sequence)";break;case f.Type.SET:n+=" (Set)";break;case f.Type.PRINTABLESTRING:n+=" (Printable String)";break;case f.Type.IA5String:n+=" (IA5String (ASCII))";break;case f.Type.UTCTIME:n+=" (UTC time)";break;case f.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case f.Type.BMPSTRING:n+=" (BMP String)"}else n+=t.type;if(n+="\n",n+=i+"Constructed: "+t.constructed+"\n",t.composed){for(var s=0,l="",o=0;o<t.value.length;++o)void 0!==t.value[o]&&(s+=1,l+=f.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(l+=","));n+=i+"Sub values: "+s+l}else if(n+=i+"Value: ",t.type===f.Type.OID&&(n+=a=f.derToOid(t.value),p.pki&&p.pki.oids&&a in p.pki.oids&&(n+=" ("+p.pki.oids[a]+") ")),t.type===f.Type.INTEGER)try{n+=f.derToInteger(t.value)}catch(e){n+="0x"+p.util.bytesToHex(t.value)}else t.type===f.Type.OCTETSTRING?(u.test(t.value)||(n+="("+t.value+") "),n+="0x"+p.util.bytesToHex(t.value)):t.type===f.Type.UTF8?n+=p.util.decodeUtf8(t.value):t.type===f.Type.PRINTABLESTRING||t.type===f.Type.IA5String?n+=t.value:u.test(t.value)?n+="0x"+p.util.bytesToHex(t.value):0===t.value.length?n+="[null]":n+=t.value;return n}}var i="asn1";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/asn1",["require","module","./util","./oids"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(c){function d(e,t,r){for(var n,a,i,o,s,l,u,c=r.length();64<=c;){for(a=e.h0,i=e.h1,o=e.h2,s=e.h3,u=0;u<16;++u)t[u]=r.getInt32Le(),n=a+(s^i&(o^s))+y[u]+t[u],a=s,s=o,o=i,i+=n<<(l=h[u])|n>>>32-l;for(;u<32;++u)n=a+(o^s&(i^o))+y[u]+t[f[u]],a=s,s=o,o=i,i+=n<<(l=h[u])|n>>>32-l;for(;u<48;++u)n=a+(i^o^s)+y[u]+t[f[u]],a=s,s=o,o=i,i+=n<<(l=h[u])|n>>>32-l;for(;u<64;++u)n=a+(o^(i|~s))+y[u]+t[f[u]],a=s,s=o,o=i,i+=n<<(l=h[u])|n>>>32-l;e.h0=e.h0+a|0,e.h1=e.h1+i|0,e.h2=e.h2+o|0,e.h3=e.h3+s|0,c-=64}}var e=c.md5=c.md5||{};c.md=c.md||{},c.md.algorithms=c.md.algorithms||{},(c.md.md5=c.md.algorithms.md5=e).create=function(){t||function(){p=String.fromCharCode(128),p+=c.util.fillString(String.fromCharCode(0),64),f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],h=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],y=new Array(64);for(var e=0;e<64;++e)y[e]=Math.floor(4294967296*Math.abs(Math.sin(e+1)));t=!0}();var o=null,s=c.util.createBuffer(),l=new Array(16),u={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){u.messageLength=0,u.fullMessageLength=u.messageLength64=[];for(var e=u.messageLengthSize/4,t=0;t<e;++t)u.fullMessageLength.push(0);return s=c.util.createBuffer(),o={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},u}};return u.start(),u.update=function(e,t){var r=(e="utf8"===t?c.util.encodeUtf8(e):e).length;u.messageLength+=r;for(var r=[r/4294967296>>>0,r>>>0],n=u.fullMessageLength.length-1;0<=n;--n)u.fullMessageLength[n]+=r[1],r[1]=r[0]+(u.fullMessageLength[n]/4294967296>>>0),u.fullMessageLength[n]=u.fullMessageLength[n]>>>0,r[0]=r[1]/4294967296>>>0;return s.putBytes(e),d(o,l,s),(2048<s.read||0===s.length())&&s.compact(),u},u.digest=function(){var e=c.util.createBuffer();e.putBytes(s.bytes());var t=u.fullMessageLength[u.fullMessageLength.length-1]+u.messageLengthSize&u.blockLength-1;e.putBytes(p.substr(0,u.blockLength-t));for(var r,n=0,a=u.fullMessageLength.length-1;0<=a;--a)n=(r=8*u.fullMessageLength[a]+n)/4294967296>>>0,e.putInt32Le(r>>>0);var i={h0:o.h0,h1:o.h1,h2:o.h2,h3:o.h3};d(i,l,e);t=c.util.createBuffer();return t.putInt32Le(i.h0),t.putInt32Le(i.h1),t.putInt32Le(i.h2),t.putInt32Le(i.h3),t},u};var p=null,f=null,h=null,y=null,t=!1}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/md5",["require","module","./util"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.md5)return e.md5;e.defined.md5=!0;for(var r=0;r<t.length;++r)t[r](e);return e.md5}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(c){function d(e,t,r){for(var n,a,i,o,s,l,u,c=r.length();64<=c;){for(a=e.h0,i=e.h1,o=e.h2,s=e.h3,l=e.h4,u=0;u<16;++u)n=r.getInt32(),n=(a<<5|a>>>27)+(s^i&(o^s))+l+1518500249+(t[u]=n),l=s,s=o,o=i<<30|i>>>2,i=a,a=n;for(;u<20;++u)n=t[u-3]^t[u-8]^t[u-14]^t[u-16],n=(a<<5|a>>>27)+(s^i&(o^s))+l+1518500249+(t[u]=n=n<<1|n>>>31),l=s,s=o,o=i<<30|i>>>2,i=a,a=n;for(;u<32;++u)n=t[u-3]^t[u-8]^t[u-14]^t[u-16],n=(a<<5|a>>>27)+(i^o^s)+l+1859775393+(t[u]=n=n<<1|n>>>31),l=s,s=o,o=i<<30|i>>>2,i=a,a=n;for(;u<40;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=(a<<5|a>>>27)+(i^o^s)+l+1859775393+(t[u]=n=n<<2|n>>>30),l=s,s=o,o=i<<30|i>>>2,i=a,a=n;for(;u<60;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=(a<<5|a>>>27)+(i&o|s&(i^o))+l+2400959708+(t[u]=n=n<<2|n>>>30),l=s,s=o,o=i<<30|i>>>2,i=a,a=n;for(;u<80;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=(a<<5|a>>>27)+(i^o^s)+l+3395469782+(t[u]=n=n<<2|n>>>30),l=s,s=o,o=i<<30|i>>>2,i=a,a=n;e.h0=e.h0+a|0,e.h1=e.h1+i|0,e.h2=e.h2+o|0,e.h3=e.h3+s|0,e.h4=e.h4+l|0,c-=64}}var e=c.sha1=c.sha1||{};c.md=c.md||{},c.md.algorithms=c.md.algorithms||{},(c.md.sha1=c.md.algorithms.sha1=e).create=function(){t||(p=String.fromCharCode(128),p+=c.util.fillString(String.fromCharCode(0),64),t=!0);var o=null,s=c.util.createBuffer(),l=new Array(80),u={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){u.messageLength=0,u.fullMessageLength=u.messageLength64=[];for(var e=u.messageLengthSize/4,t=0;t<e;++t)u.fullMessageLength.push(0);return s=c.util.createBuffer(),o={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},u}};return u.start(),u.update=function(e,t){var r=(e="utf8"===t?c.util.encodeUtf8(e):e).length;u.messageLength+=r;for(var r=[r/4294967296>>>0,r>>>0],n=u.fullMessageLength.length-1;0<=n;--n)u.fullMessageLength[n]+=r[1],r[1]=r[0]+(u.fullMessageLength[n]/4294967296>>>0),u.fullMessageLength[n]=u.fullMessageLength[n]>>>0,r[0]=r[1]/4294967296>>>0;return s.putBytes(e),d(o,l,s),(2048<s.read||0===s.length())&&s.compact(),u},u.digest=function(){var e=c.util.createBuffer();e.putBytes(s.bytes());var t=u.fullMessageLength[u.fullMessageLength.length-1]+u.messageLengthSize&u.blockLength-1;e.putBytes(p.substr(0,u.blockLength-t));c.util.createBuffer();for(var r,n=8*u.fullMessageLength[0],a=0;a<u.fullMessageLength.length;++a)r=8*u.fullMessageLength[a+1],e.putInt32((n+=r/4294967296>>>0)>>>0),n=r;var i={h0:o.h0,h1:o.h1,h2:o.h2,h3:o.h3,h4:o.h4};d(i,l,e);t=c.util.createBuffer();return t.putInt32(i.h0),t.putInt32(i.h1),t.putInt32(i.h2),t.putInt32(i.h3),t.putInt32(i.h4),t},u};var p=null,t=!1}var i="sha1";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/sha1",["require","module","./util"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(c){function d(e,t,r){for(var n,a,i,o,s,l,u,c,d,p,f,h,y=r.length();64<=y;){for(o=0;o<16;++o)t[o]=r.getInt32();for(;o<64;++o)n=t[o-2],a=t[o-15],t[o]=(n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10)+t[o-7]+(a=(a>>>7|a<<25)^(a>>>18|a<<14)^a>>>3)+t[o-16]|0;for(s=e.h0,l=e.h1,u=e.h2,c=e.h3,d=e.h4,p=e.h5,f=e.h6,h=e.h7,o=0;o<64;++o)i=s&l|u&(s^l),n=h+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(f^d&(p^f))+g[o]+t[o],h=f,f=p,p=d,d=c+n|0,c=u,u=l,s=n+(a=(((l=s)>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+i)|0;e.h0=e.h0+s|0,e.h1=e.h1+l|0,e.h2=e.h2+u|0,e.h3=e.h3+c|0,e.h4=e.h4+d|0,e.h5=e.h5+p|0,e.h6=e.h6+f|0,e.h7=e.h7+h|0,y-=64}}var e=c.sha256=c.sha256||{};c.md=c.md||{},c.md.algorithms=c.md.algorithms||{},(c.md.sha256=c.md.algorithms.sha256=e).create=function(){t||(p=String.fromCharCode(128),p+=c.util.fillString(String.fromCharCode(0),64),g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],t=!0);var o=null,s=c.util.createBuffer(),l=new Array(64),u={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){u.messageLength=0,u.fullMessageLength=u.messageLength64=[];for(var e=u.messageLengthSize/4,t=0;t<e;++t)u.fullMessageLength.push(0);return s=c.util.createBuffer(),o={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},u}};return u.start(),u.update=function(e,t){var r=(e="utf8"===t?c.util.encodeUtf8(e):e).length;u.messageLength+=r;for(var r=[r/4294967296>>>0,r>>>0],n=u.fullMessageLength.length-1;0<=n;--n)u.fullMessageLength[n]+=r[1],r[1]=r[0]+(u.fullMessageLength[n]/4294967296>>>0),u.fullMessageLength[n]=u.fullMessageLength[n]>>>0,r[0]=r[1]/4294967296>>>0;return s.putBytes(e),d(o,l,s),(2048<s.read||0===s.length())&&s.compact(),u},u.digest=function(){var e=c.util.createBuffer();e.putBytes(s.bytes());var t=u.fullMessageLength[u.fullMessageLength.length-1]+u.messageLengthSize&u.blockLength-1;e.putBytes(p.substr(0,u.blockLength-t));c.util.createBuffer();for(var r,n=8*u.fullMessageLength[0],a=0;a<u.fullMessageLength.length;++a)r=8*u.fullMessageLength[a+1],e.putInt32((n+=r/4294967296>>>0)>>>0),n=r;var i={h0:o.h0,h1:o.h1,h2:o.h2,h3:o.h3,h4:o.h4,h5:o.h5,h6:o.h6,h7:o.h7};d(i,l,e);t=c.util.createBuffer();return t.putInt32(i.h0),t.putInt32(i.h1),t.putInt32(i.h2),t.putInt32(i.h3),t.putInt32(i.h4),t.putInt32(i.h5),t.putInt32(i.h6),t.putInt32(i.h7),t},u};var p=null,t=!1,g=null}var i="sha256";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/sha256",["require","module","./util"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(f){function h(e,t,r){for(var n,a,i,o,s,l,u,c,d,p,f,h,y,g,m,v,C,E,S,T,b,A,I,_,B,w=r.length();128<=w;){for(b=0;b<16;++b)t[b][0]=r.getInt32()>>>0,t[b][1]=r.getInt32()>>>0;for(;b<80;++b)n=(((A=(_=t[b-2])[0])>>>19|(I=_[1])<<13)^(I>>>29|A<<3)^A>>>6)>>>0,a=((A<<13|I>>>19)^(I<<3|A>>>29)^(A<<26|I>>>6))>>>0,i=(((A=(B=t[b-15])[0])>>>1|(I=B[1])<<31)^(A>>>8|I<<24)^A>>>7)>>>0,_=t[b-7],B=t[b-16],I=a+_[1]+(o=((A<<31|I>>>1)^(A<<24|I>>>8)^(A<<25|I>>>7))>>>0)+B[1],t[b][0]=n+_[0]+i+B[0]+(I/4294967296>>>0)>>>0,t[b][1]=I>>>0;for(s=e[0][0],l=e[0][1],u=e[1][0],c=e[1][1],d=e[2][0],p=e[2][1],f=e[3][0],h=e[3][1],y=e[4][0],g=e[4][1],m=e[5][0],v=e[5][1],C=e[6][0],E=e[6][1],S=e[7][0],T=e[7][1],b=0;b<80;++b)I=T+(((y<<18|g>>>14)^(y<<14|g>>>18)^(g<<23|y>>>9))>>>0)+((E^g&(v^E))>>>0)+N[b][1]+t[b][1],n=S+(((y>>>14|g<<18)^(y>>>18|g<<14)^(g>>>9|y<<23))>>>0)+((C^y&(m^C))>>>0)+N[b][0]+t[b][0]+(I/4294967296>>>0)>>>0,a=I>>>0,i=(((s>>>28|l<<4)^(l>>>2|s<<30)^(l>>>7|s<<25))>>>0)+((s&u|d&(s^u))>>>0)+((I=(((s<<4|l>>>28)^(l<<30|s>>>2)^(l<<25|s>>>7))>>>0)+((l&c|p&(l^c))>>>0))/4294967296>>>0)>>>0,o=I>>>0,S=C,T=E,C=m,E=v,m=y,v=g,y=f+n+((I=h+a)/4294967296>>>0)>>>0,g=I>>>0,f=d,h=p,d=u,p=c,u=s,c=l,s=n+i+((I=a+o)/4294967296>>>0)>>>0,l=I>>>0;I=e[0][1]+l,e[0][0]=e[0][0]+s+(I/4294967296>>>0)>>>0,e[0][1]=I>>>0,I=e[1][1]+c,e[1][0]=e[1][0]+u+(I/4294967296>>>0)>>>0,e[1][1]=I>>>0,I=e[2][1]+p,e[2][0]=e[2][0]+d+(I/4294967296>>>0)>>>0,e[2][1]=I>>>0,I=e[3][1]+h,e[3][0]=e[3][0]+f+(I/4294967296>>>0)>>>0,e[3][1]=I>>>0,I=e[4][1]+g,e[4][0]=e[4][0]+y+(I/4294967296>>>0)>>>0,e[4][1]=I>>>0,I=e[5][1]+v,e[5][0]=e[5][0]+m+(I/4294967296>>>0)>>>0,e[5][1]=I>>>0,I=e[6][1]+E,e[6][0]=e[6][0]+C+(I/4294967296>>>0)>>>0,e[6][1]=I>>>0,I=e[7][1]+T,e[7][0]=e[7][0]+S+(I/4294967296>>>0)>>>0,e[7][1]=I>>>0,w-=128}}var e=f.sha512=f.sha512||{};f.md=f.md||{},f.md.algorithms=f.md.algorithms||{},f.md.sha512=f.md.algorithms.sha512=e;var t=f.sha384=f.sha512.sha384=f.sha512.sha384||{};t.create=function(){return e.create("SHA-384")},f.md.sha384=f.md.algorithms.sha384=t,f.sha512.sha256=f.sha512.sha256||{create:function(){return e.create("SHA-512/256")}},f.md["sha512/256"]=f.md.algorithms["sha512/256"]=f.sha512.sha256,f.sha512.sha224=f.sha512.sha224||{create:function(){return e.create("SHA-512/224")}},f.md["sha512/224"]=f.md.algorithms["sha512/224"]=f.sha512.sha224,e.create=function(l){if(n||(y=String.fromCharCode(128),y+=f.util.fillString(String.fromCharCode(0),128),N=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],a={"SHA-512":[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],"SHA-384":[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],"SHA-512/256":[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],"SHA-512/224":[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]]},n=!0),(l=void 0===l?"SHA-512":l)in a){for(var r=a[l],u=null,c=f.util.createBuffer(),d=new Array(80),e=0;e<80;++e)d[e]=new Array(2);var p={algorithm:l.replace("-","").toLowerCase(),blockLength:128,digestLength:64,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){p.messageLength=0,p.fullMessageLength=p.messageLength128=[];for(var e=p.messageLengthSize/4,t=0;t<e;++t)p.fullMessageLength.push(0);c=f.util.createBuffer(),u=new Array(r.length);for(t=0;t<r.length;++t)u[t]=r[t].slice(0);return p}};return p.start(),p.update=function(e,t){var r=(e="utf8"===t?f.util.encodeUtf8(e):e).length;p.messageLength+=r;for(var r=[r/4294967296>>>0,r>>>0],n=p.fullMessageLength.length-1;0<=n;--n)p.fullMessageLength[n]+=r[1],r[1]=r[0]+(p.fullMessageLength[n]/4294967296>>>0),p.fullMessageLength[n]=p.fullMessageLength[n]>>>0,r[0]=r[1]/4294967296>>>0;return c.putBytes(e),h(u,d,c),(2048<c.read||0===c.length())&&c.compact(),p},p.digest=function(){var e=f.util.createBuffer();e.putBytes(c.bytes());var t=p.fullMessageLength[p.fullMessageLength.length-1]+p.messageLengthSize&p.blockLength-1;e.putBytes(y.substr(0,p.blockLength-t));f.util.createBuffer();for(var r,n=8*p.fullMessageLength[0],a=0;a<p.fullMessageLength.length;++a)r=8*p.fullMessageLength[a+1],e.putInt32((n+=r/4294967296>>>0)>>>0),n=r;for(var i=new Array(u.length),a=0;a<u.length;++a)i[a]=u[a].slice(0);h(i,d,e);for(var o=f.util.createBuffer(),s="SHA-512"===l?i.length:"SHA-384"===l?i.length-2:i.length-4,a=0;a<s;++a)o.putInt32(i[a][0]),a===s-1&&"SHA-512/224"===l||o.putInt32(i[a][1]);return o},p}throw new Error("Invalid SHA-512 algorithm: "+l)};var y=null,n=!1,N=null,a=null}var i="sha512";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/sha512",["require","module","./util"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(e){e.md=e.md||{},e.md.algorithms={md5:e.md5,sha1:e.sha1,sha256:e.sha256},e.md.md5=e.md5,e.md.sha1=e.sha1,e.md.sha256=e.sha256}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/md",["require","module","./md5","./sha1","./sha256","./sha512"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.md)return e.md;e.defined.md=!0;for(var r=0;r<t.length;++r)t[r](e);return e.md}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(u){(u.hmac=u.hmac||{}).create=function(){var i=null,o=null,s=null,l=null,e={start:function(e,t){if(null!==e)if("string"==typeof e){if(!((e=e.toLowerCase())in u.md.algorithms))throw new Error('Unknown hash algorithm "'+e+'"');o=u.md.algorithms[e].create()}else o=e;if(null===t)t=i;else{if("string"==typeof t)t=u.util.createBuffer(t);else if(u.util.isArray(t)){var r=t;t=u.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}(a=t.length())>o.blockLength&&(o.start(),o.update(t.bytes()),t=o.digest()),s=u.util.createBuffer(),l=u.util.createBuffer();for(var a=t.length(),n=0;n<a;++n){r=t.at(n);s.putByte(54^r),l.putByte(92^r)}if(a<o.blockLength)for(r=o.blockLength-a,n=0;n<r;++n)s.putByte(54),l.putByte(92);i=t,s=s.bytes(),l=l.bytes()}o.start(),o.update(s)},update:function(e){o.update(e)},getMac:function(){var e=o.digest().bytes();return o.start(),o.update(l),o.update(e),o.digest()}};return e.digest=e.getMac,e}}var i="hmac";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/hmac",["require","module","./md","./util"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(y){function i(e){function t(e,t){return" "+t}for(var r=e.name+": ",n=[],a=0;a<e.values.length;++a)n.push(e.values[a].replace(/^(\S+\r\n)/,t));r+=n.join(",")+"\r\n";for(var i,o=0,s=-1,a=0;a<r.length;++a,++o)65<o&&-1!==s?(r=","===(i=r[s])?(++s,r.substr(0,s)+"\r\n "+r.substr(s)):r.substr(0,s)+"\r\n"+i+r.substr(s+1),o=a-s-1,s=-1,++a):" "!==r[a]&&"\t"!==r[a]&&","!==r[a]||(s=a);return r}var e=y.pem=y.pem||{};e.encode=function(e,t){t=t||{};var r,n="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(n+=i(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(n+=i(r={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),n+=i(r)),e.headers)for(var a=0;a<e.headers.length;++a)n+=i(e.headers[a]);return e.procType&&(n+="\r\n"),n+=y.util.encode64(e.body,t.maxline||64)+"\r\n",n+="-----END "+e.type+"-----\r\n"},e.decode=function(e){for(var t,r=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,a=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/;t=n.exec(e);){var o={type:t[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:y.util.decode64(t[3])};if(r.push(o),t[2]){for(var s=t[2].split(i),l=0;t&&l<s.length;){for(var u=s[l].replace(/\s+$/,""),c=l+1;c<s.length;++c){var d=s[c];if(!/\s/.test(d[0]))break;u+=d,l=c}if(t=u.match(a)){for(var p={name:t[1],values:[]},f=t[2].split(","),h=0;h<f.length;++h)p.values.push(f[h].replace(/^\s+/,""));if(o.procType)if(o.contentDomain||"Content-Domain"!==p.name)if(o.dekInfo||"DEK-Info"!==p.name)o.headers.push(p);else{if(0===p.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:f[0],parameters:f[1]||null}}else o.contentDomain=f[0]||"";else{if("Proc-Type"!==p.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==p.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:f[0],type:f[1]}}}++l}if("ENCRYPTED"===o.procType&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/pem",["require","module","./util"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.pem)return e.pem;e.defined.pem=!0;for(var r=0;r<t.length;++r)t[r](e);return e.pem}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(i){function e(e,t){i.cipher.registerAlgorithm(e,function(){return new i.des.Algorithm(e,t)})}function n(e,t,r,n){var a=32===e.length?3:9,i=3==a?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2],o=t[0];o^=(f=252645135&(o>>>4^(h=t[1])))<<4,o^=(f=65535&(o>>>16^(h^=f)))<<16,o^=f=858993459&((h^=f)>>>2^o),o^=f=16711935&((h^=f<<2)>>>8^o),o=(o^=(f=1431655765&(o>>>1^(h^=f<<8)))<<1)<<1|o>>>31,h=(h^=f)<<1|h>>>31;for(var s=0;s<a;s+=3){for(var l=i[s+1],u=i[s+2],c=i[s];c!=l;c+=u)var d=h^e[c],p=(h>>>4|h<<28)^e[c+1],f=o,o=h,h=f^(g[d>>>24&63]|v[d>>>16&63]|E[d>>>8&63]|T[63&d]|y[p>>>24&63]|m[p>>>16&63]|C[p>>>8&63]|S[63&p]);f=o,o=h,h=f}h=h>>>1|h<<31,h^=f=1431655765&((o=o>>>1|o<<31)>>>1^h),h^=(f=16711935&(h>>>8^(o^=f<<1)))<<8,h^=(f=858993459&(h>>>2^(o^=f)))<<2,h^=f=65535&((o^=f)>>>16^h),h^=f=252645135&((o^=f<<16)>>>4^h),r[0]=o^=f<<4,r[1]=h}function a(e){var t="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),n=e.decrypt?i.cipher.createDecipher(t,e.key):i.cipher.createCipher(t,e.key),a=n.start;return n.start=function(e,t){var r=null;t instanceof i.util.ByteBuffer&&(r=t,t={}),(t=t||{}).output=r,t.iv=e,a.call(n,t)},n}i.des=i.des||{},i.des.startEncrypting=function(e,t,r,n){n=a({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return n.start(t),n},i.des.createEncryptionCipher=function(e,t){return a({key:e,output:null,decrypt:!1,mode:t})},i.des.startDecrypting=function(e,t,r,n){n=a({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return n.start(t),n},i.des.createDecryptionCipher=function(e,t){return a({key:e,output:null,decrypt:!0,mode:t})},i.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return n(r._keys,e,t,!1)},decrypt:function(e,t){return n(r._keys,e,t,!0)}}}),r._init=!1},i.des.Algorithm.prototype.initialize=function(e){if(!this._init){e=i.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==e.length())throw new Error("Invalid Triple-DES key size: "+8*e.length());this._keys=function(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],a=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],i=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],s=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],c=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],f=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],h=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=8<e.length()?3:1,g=[],m=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],v=0,C=0;C<y;C++){var E=e.getInt32();E^=(T=252645135&(E>>>4^(b=e.getInt32())))<<4,E^=T=65535&((b^=T)>>>-16^E),E^=(T=858993459&(E>>>2^(b^=T<<-16)))<<2,E^=T=65535&((b^=T)>>>-16^E),E^=(T=1431655765&(E>>>1^(b^=T<<-16)))<<1,E^=T=16711935&((b^=T)>>>8^E),T=(E^=(T=1431655765&(E>>>1^(b^=T<<8)))<<1)<<8|(b^=T)>>>20&240,E=b<<24|b<<8&16711680|b>>>8&65280|b>>>24&240,b=T;for(var S=0;S<m.length;++S){var T,b=m[S]?(E=E<<2|E>>>26,b<<2|b>>>26):(E=E<<1|E>>>27,b<<1|b>>>27),A=t[(E&=-15)>>>28]|r[E>>>24&15]|n[E>>>20&15]|a[E>>>16&15]|i[E>>>12&15]|o[E>>>8&15]|s[E>>>4&15],I=l[(b&=-15)>>>28]|u[b>>>24&15]|c[b>>>20&15]|d[b>>>16&15]|p[b>>>12&15]|f[b>>>8&15]|h[b>>>4&15];g[v++]=A^(T=65535&(I>>>16^A)),g[v++]=I^T<<16}}return g}(e),this._init=!0}},e("DES-ECB",i.cipher.modes.ecb),e("DES-CBC",i.cipher.modes.cbc),e("DES-CFB",i.cipher.modes.cfb),e("DES-OFB",i.cipher.modes.ofb),e("DES-CTR",i.cipher.modes.ctr),e("3DES-ECB",i.cipher.modes.ecb),e("3DES-CBC",i.cipher.modes.cbc),e("3DES-CFB",i.cipher.modes.cfb),e("3DES-OFB",i.cipher.modes.ofb),e("3DES-CTR",i.cipher.modes.ctr);var y=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],g=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],m=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],v=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],C=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],E=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],S=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],T=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696]}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/des",["require","module","./cipher","./cipherModes","./util"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.des)return e.des;e.defined.des=!0;for(var r=0;r<t.length;++r)t[r](e);return e.des}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(C){var E,e=C.pkcs5=C.pkcs5||{},S="undefined"!=typeof process&&process.versions&&process.versions.node;S&&!C.disableNativeCode&&(E=s("crypto")),C.pbkdf2=e.pbkdf2=function(e,t,r,n,a,i){function o(){if(c<g)return i(null,y);p.start(null,null),p.update(t),p.update(C.util.int32ToBytes(g)),m=h=p.digest().getBytes(),v=2,s()}function s(){if(v<=r)return p.start(null,null),p.update(h),f=p.digest().getBytes(),m=C.util.xorBytes(m,f,l),h=f,++v,C.util.setImmediate(s);y+=g<c?m:m.substr(0,d),++g,o()}if("function"==typeof a&&(i=a,a=null),S&&!C.disableNativeCode&&E.pbkdf2&&(null===a||"object"!=typeof a)&&(4<E.pbkdf2Sync.length||!a||"sha1"===a))return"string"!=typeof a&&(a="sha1"),t=new Buffer(t,"binary"),i?4===E.pbkdf2Sync.length?E.pbkdf2(e,t,r,n,function(e,t){return e?i(e):void i(null,t.toString("binary"))}):E.pbkdf2(e,t,r,n,a,function(e,t){return e?i(e):void i(null,t.toString("binary"))}):(4===E.pbkdf2Sync.length?E.pbkdf2Sync(e,t,r,n):E.pbkdf2Sync(e,t,r,n,a)).toString("binary");if("string"==typeof(a=null==a?C.md.sha1.create():a)){if(!(a in C.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=C.md[a].create()}var l=a.digestLength;if(4294967295*l<n){var u=new Error("Derived key is too long.");if(i)return i(u);throw u}var c=Math.ceil(n/l),d=n-(c-1)*l,p=C.hmac.create();p.start(a,e);var f,h,y="";if(!i){for(var g=1;g<=c;++g){p.start(null,null),p.update(t),p.update(C.util.int32ToBytes(g));for(var m=h=p.digest().getBytes(),v=2;v<=r;++v)p.start(null,null),p.update(h),f=p.digest().getBytes(),m=C.util.xorBytes(m,f,l),h=f;y+=g<c?m:m.substr(0,d)}return y}g=1;o()}}var i="pbkdf2";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/pbkdf2",["require","module","./hmac","./md","./util"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(d){var e="undefined"!=typeof process&&process.versions&&process.versions.node,i=null;d.disableNativeCode||!e||process.versions["node-webkit"]||(i=s("crypto")),(d.prng=d.prng||{}).create=function(e){function u(){var e=c.plugin.md.create();e.update(c.pools[0].digest().getBytes()),c.pools[0].start();for(var t=1,r=1;r<32;++r)(t=31===t?2147483648:t<<2)%c.reseeds==0&&(e.update(c.pools[r].digest().getBytes()),c.pools[r].start());var n=e.digest().getBytes();e.start(),e.update(n);var a=e.digest().getBytes();c.key=c.plugin.formatKey(n),c.seed=c.plugin.formatSeed(a),c.reseeds=4294967295===c.reseeds?0:c.reseeds+1,c.generated=0}function r(e){var t,r=null;"undefined"==typeof window||(t=window.crypto||window.msCrypto)&&t.getRandomValues&&(r=function(e){return t.getRandomValues(e)});var n=d.util.createBuffer();if(r)for(;n.length()<e;){var a=Math.max(1,Math.min(e-n.length(),65536)/4),i=new Uint32Array(Math.floor(a));try{r(i);for(var o=0;o<i.length;++o)n.putInt32(i[o])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(n.length()<e)for(var s,l,u=Math.floor(65536*Math.random());n.length()<e;){c=16807*(65535&u),c+=(32767&(s=16807*(u>>16)))<<16;for(var c,u=4294967295&(c=(2147483647&(c+=s>>15))+(c>>31)),o=0;o<3;++o)l=u>>>(o<<3),l^=Math.floor(256*Math.random()),n.putByte(String.fromCharCode(255&l))}return n.getBytes(e)}for(var c={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0},t=e.md,n=new Array(32),a=0;a<32;++a)n[a]=t.create();return c.pools=n,c.pool=0,c.generate=function(r,n){if(!n)return c.generateSync(r);var a=c.plugin.cipher,i=c.plugin.increment,o=c.plugin.formatKey,s=c.plugin.formatSeed,l=d.util.createBuffer();c.key=null,function e(t){if(t)return n(t);if(l.length()>=r)return n(null,l.getBytes(r));if(1048575<c.generated&&(c.key=null),null===c.key)return d.util.nextTick(function(){!function(r){if(32<=c.pools[0].messageLength)return u(),r();var e=32-c.pools[0].messageLength<<5;c.seedFile(e,function(e,t){return e?r(e):(c.collect(t),u(),void r())})}(e)});t=a(c.key,c.seed);c.generated+=t.length,l.putBytes(t),c.key=o(a(c.key,i(c.seed))),c.seed=s(a(c.key,c.seed)),d.util.setImmediate(e)}()},c.generateSync=function(e){var t=c.plugin.cipher,r=c.plugin.increment,n=c.plugin.formatKey,a=c.plugin.formatSeed;c.key=null;for(var i=d.util.createBuffer();i.length()<e;){1048575<c.generated&&(c.key=null),null===c.key&&function(){if(32<=c.pools[0].messageLength)return u();var e=32-c.pools[0].messageLength<<5;c.collect(c.seedFileSync(e)),u()}();var o=t(c.key,c.seed);c.generated+=o.length,i.putBytes(o),c.key=n(t(c.key,r(c.seed))),c.seed=a(t(c.key,c.seed))}return i.getBytes(e)},i?(c.seedFile=function(e,r){i.randomBytes(e,function(e,t){return e?r(e):void r(null,t.toString())})},c.seedFileSync=function(e){return i.randomBytes(e).toString()}):(c.seedFile=function(e,t){try{t(null,r(e))}catch(e){t(e)}},c.seedFileSync=r),c.collect=function(e){for(var t=e.length,r=0;r<t;++r)c.pools[c.pool].update(e.substr(r,1)),c.pool=31===c.pool?0:c.pool+1},c.collectInt=function(e,t){for(var r="",n=0;n<t;n+=8)r+=String.fromCharCode(e>>n&255);c.collect(r)},c.registerWorker=function(r){r===self?c.seedFile=function(e,r){self.addEventListener("message",function e(t){t=t.data;t.forge&&t.forge.prng&&(self.removeEventListener("message",e),r(t.forge.prng.err,t.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:e}}})}:r.addEventListener("message",function(e){e=e.data;e.forge&&e.forge.prng&&c.seedFile(e.forge.prng.needed,function(e,t){r.postMessage({forge:{prng:{err:e,bytes:t}}})})})},c}}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/prng",["require","module","./md","./util"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.prng)return e.prng;e.defined.prng=!0;for(var r=0;r<t.length;++r)t[r](e);return e.prng}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(d){d.random&&d.random.getBytes||function(e){function t(){var r=d.prng.create(n);return r.getBytes=function(e,t){return r.generate(e,t)},r.getBytesSync=function(e){return r.generate(e)},r}var n={},r=new Array(4),a=d.util.createBuffer();n.formatKey=function(e){var t=d.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),d.aes._expandKey(e,!1)},n.formatSeed=function(e){var t=d.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},n.cipher=function(e,t){return d.aes._updateBlock(e,t,r,!1),a.putInt32(r[0]),a.putInt32(r[1]),a.putInt32(r[2]),a.putInt32(r[3]),a.getBytes()},n.increment=function(e){return++e[3],e},n.md=d.md.sha256;var i,o=t(),s="undefined"!=typeof process&&process.versions&&process.versions.node,l=null;if("undefined"==typeof window||(i=window.crypto||window.msCrypto)&&i.getRandomValues&&(l=function(e){return i.getRandomValues(e)}),d.disableNativeCode||!s&&!l){if(o.collectInt(+new Date,32),"undefined"!=typeof navigator){var u="";for(c in navigator)try{"string"==typeof navigator[c]&&(u+=navigator[c])}catch(e){}o.collect(u),u=null}e&&(e().mousemove(function(e){o.collectInt(e.clientX,16),o.collectInt(e.clientY,16)}),e().keypress(function(e){o.collectInt(e.charCode,8)}))}if(d.random)for(var c in o)d.random[c]=o[c];else d.random=o;d.random.createInstance=t}("undefined"!=typeof jQuery?jQuery:null)}var i="random";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/random",["require","module","./aes","./md","./prng","./util"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(f){var o=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],h=[1,2,3,5];f.rc2=f.rc2||{},f.rc2.expandKey=function(e,t){t=t||128;for(var r=e="string"==typeof e?f.util.createBuffer(e):e,n=e.length(),t=t,a=Math.ceil(t/8),t=255>>(7&t),i=n;i<128;i++)r.putByte(o[r.at(i-1)+r.at(i-n)&255]);for(r.setAt(128-a,o[r.at(128-a)&t]),i=127-a;0<=i;i--)r.setAt(i,o[r.at(i+1)^r.at(i+a)]);return r};function r(e,t,i){var r,o,s,n=!1,l=null,u=null,c=null,a=[];for(e=f.rc2.expandKey(e,t),o=0;o<64;o++)a.push(e.getInt16Le());var d=i?(r=function(e){for(o=0;o<4;o++)e[o]+=a[s]+(e[(o+3)%4]&e[(o+2)%4])+(~e[(o+3)%4]&e[(o+1)%4]),e[o]=(t=e[o])<<(r=h[o])&65535|(65535&t)>>16-r,s++;var t,r},function(e){for(o=0;o<4;o++)e[o]+=a[63&e[(o+3)%4]]}):(r=function(e){for(o=3;0<=o;o--)e[o]=(65535&(t=e[o]))>>(r=h[o])|t<<16-r&65535,e[o]-=a[s]+(e[(o+3)%4]&e[(o+2)%4])+(~e[(o+3)%4]&e[(o+1)%4]),s--;var t,r},function(e){for(o=3;0<=o;o--)e[o]-=a[63&e[(o+3)%4]]}),p=null;return p={start:function(e,t){e&&"string"==typeof e&&(e=f.util.createBuffer(e)),n=!1,l=f.util.createBuffer(),u=t||new f.util.createBuffer,c=e,p.output=u},update:function(e){for(n||l.putBuffer(e);8<=l.length();)!function(e){var t=[];for(o=0;o<4;o++){var r=l.getInt16Le();null!==c&&(i?r^=c.getInt16Le():c.putInt16Le(r)),t.push(65535&r)}s=i?0:63;for(var n=0;n<e.length;n++)for(var a=0;a<e[n][0];a++)e[n][1](t);for(o=0;o<4;o++)null!==c&&(i?c.putInt16Le(t[o]):t[o]^=c.getInt16Le()),u.putInt16Le(t[o])}([[5,r],[1,d],[6,r],[1,d],[5,r]])},finish:function(e){var t,r=!0;return i&&(e?r=e(8,l,!i):(t=8===l.length()?8:8-l.length(),l.fillWithByte(t,t))),r&&(n=!0,p.update()),i||(r=0===l.length())&&(e?r=e(8,u,!i):(e=u.length())<(e=u.at(e-1))?r=!1:u.truncate(e)),r}}}f.rc2.startEncrypting=function(e,t,r){e=f.rc2.createEncryptionCipher(e,128);return e.start(t,r),e},f.rc2.createEncryptionCipher=function(e,t){return r(e,t,!0)},f.rc2.startDecrypting=function(e,t,r){e=f.rc2.createDecryptionCipher(e,128);return e.start(t,r),e},f.rc2.createDecryptionCipher=function(e,t){return r(e,t,!1)}}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/rc2",["require","module","./util"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.rc2)return e.rc2;e.defined.rc2=!0;for(var r=0;r<t.length;++r)t[r](e);return e.rc2}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(e){function m(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function v(){return new m(null)}function t(e,t,r,n,a,i){for(var o=16383&t,s=t>>14;0<=--i;){var l=16383&this.data[e],u=this.data[e++]>>14,c=s*l+u*o;a=((l=o*l+((16383&c)<<14)+r.data[n]+a)>>28)+(c>>14)+s*u,r.data[n++]=268435455&l}return a}function l(e){return d.charAt(e)}function u(e,t){t=p[e.charCodeAt(t)];return null==t?-1:t}function g(e){var t=v();return t.fromInt(e),t}function C(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function E(e){this.m=e}function S(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function r(e,t){return e&t}function a(e,t){return e|t}function n(e,t){return e^t}function i(e,t){return e&~t}function o(){}function s(e){return e}function T(e){this.r2=v(),this.q3=v(),m.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}var c="undefined"==typeof navigator?(m.prototype.am=t,28):"Microsoft Internet Explorer"==navigator.appName?(m.prototype.am=function(e,t,r,n,a,i){for(var o=32767&t,s=t>>15;0<=--i;){var l=32767&this.data[e],u=this.data[e++]>>15,c=s*l+u*o;a=((l=o*l+((32767&c)<<15)+r.data[n]+(1073741823&a))>>>30)+(c>>>15)+s*u+(a>>>30),r.data[n++]=1073741823&l}return a},30):"Netscape"!=navigator.appName?(m.prototype.am=function(e,t,r,n,a,i){for(;0<=--i;){var o=t*this.data[e++]+r.data[n]+a;a=Math.floor(o/67108864),r.data[n++]=67108863&o}return a},26):(m.prototype.am=t,28);m.prototype.DB=c,m.prototype.DM=(1<<c)-1,m.prototype.DV=1<<c;m.prototype.FV=Math.pow(2,52),m.prototype.F1=52-c,m.prototype.F2=2*c-52;for(var d="0123456789abcdefghijklmnopqrstuvwxyz",p=new Array,f="0".charCodeAt(0),h=0;h<=9;++h)p[f++]=h;for(f="a".charCodeAt(0),h=10;h<36;++h)p[f++]=h;for(f="A".charCodeAt(0),h=10;h<36;++h)p[f++]=h;E.prototype.convert=function(e){return e.s<0||0<=e.compareTo(this.m)?e.mod(this.m):e},E.prototype.revert=function(e){return e},E.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},E.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},E.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},S.prototype.convert=function(e){var t=v();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(m.ZERO)&&this.m.subTo(t,t),t},S.prototype.revert=function(e){var t=v();return e.copyTo(t),this.reduce(t),t},S.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=(n=32767&e.data[t])*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM,n=t+this.m.t;for(e.data[n]+=this.m.am(0,r,e,t,0,this.m.t);e.data[n]>=e.DV;)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},S.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},S.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},m.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},m.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},m.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,a=!1,i=0;0<=--n;){var o=8==r?255&e[n]:u(e,n);o<0?"-"==e.charAt(n)&&(a=!0):(a=!1,0==i?this.data[this.t++]=o:i+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-i)-1)<<i,this.data[this.t++]=o>>this.DB-i):this.data[this.t-1]|=o<<i,(i+=r)>=this.DB&&(i-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,0<i&&(this.data[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),a&&m.ZERO.subTo(this,this)},m.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this.data[this.t-1]==e;)--this.t},m.prototype.dlShiftTo=function(e,t){for(var r=this.t-1;0<=r;--r)t.data[r+e]=this.data[r];for(r=e-1;0<=r;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},m.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},m.prototype.lShiftTo=function(e,t){for(var r=e%this.DB,n=this.DB-r,a=(1<<n)-1,i=Math.floor(e/this.DB),o=this.s<<r&this.DM,s=this.t-1;0<=s;--s)t.data[s+i+1]=this.data[s]>>n|o,o=(this.data[s]&a)<<r;for(s=i-1;0<=s;--s)t.data[s]=0;t.data[i]=o,t.t=this.t+i+1,t.s=this.s,t.clamp()},m.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,a=this.DB-n,i=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&i)<<a,t.data[o-r]=this.data[o]>>n;0<n&&(t.data[this.t-r-1]|=(this.s&i)<<a),t.t=this.t-r,t.clamp()}},m.prototype.subTo=function(e,t){for(var r=0,n=0,a=Math.min(e.t,this.t);r<a;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:0<n&&(t.data[r++]=n),t.t=r,t.clamp()},m.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),a=r.t;for(t.t=a+n.t;0<=--a;)t.data[a]=0;for(a=0;a<n.t;++a)t.data[a+r.t]=r.am(0,n.data[a],t,a,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&m.ZERO.subTo(t,t)},m.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;0<=--r;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}0<e.t&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},m.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var a=this.abs();if(a.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=v());var i=v(),o=this.s,s=e.s,e=this.DB-C(n.data[n.t-1]);0<e?(n.lShiftTo(e,i),a.lShiftTo(e,r)):(n.copyTo(i),a.copyTo(r));var l=i.t,u=i.data[l-1];if(0!=u){var a=u*(1<<this.F1)+(1<l?i.data[l-2]>>this.F2:0),c=this.FV/a,d=(1<<this.F1)/a,p=1<<this.F2,f=r.t,h=f-l,y=null==t?v():t;for(i.dlShiftTo(h,y),0<=r.compareTo(y)&&(r.data[r.t++]=1,r.subTo(y,r)),m.ONE.dlShiftTo(l,y),y.subTo(i,i);i.t<l;)i.data[i.t++]=0;for(;0<=--h;){var g=r.data[--f]==u?this.DM:Math.floor(r.data[f]*c+(r.data[f-1]+p)*d);if((r.data[f]+=i.am(0,g,r,h,0,l))<g)for(i.dlShiftTo(h,y),r.subTo(y,r);r.data[f]<--g;)r.subTo(y,r)}null!=t&&(r.drShiftTo(l,t),o!=s&&m.ZERO.subTo(t,t)),r.t=l,r.clamp(),0<e&&r.rShiftTo(e,r),o<0&&m.ZERO.subTo(r,r)}}},m.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},m.prototype.isEven=function(){return 0==(0<this.t?1&this.data[0]:this.s)},m.prototype.exp=function(e,t){if(4294967295<e||e<1)return m.ONE;var r,n=v(),a=v(),i=t.convert(this),o=C(e)-1;for(i.copyTo(n);0<=--o;)t.sqrTo(n,a),0<(e&1<<o)?t.mulTo(a,i,n):(r=n,n=a,a=r);return t.revert(n)},m.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,a=!1,i="",o=this.t,s=this.DB-o*this.DB%t;if(0<o--)for(s<this.DB&&0<(r=this.data[o]>>s)&&(a=!0,i=l(r));0<=o;)s<t?(r=(this.data[o]&(1<<s)-1)<<t-s,r|=this.data[--o]>>(s+=this.DB-t)):(r=this.data[o]>>(s-=t)&n,s<=0&&(s+=this.DB,--o)),(a=0<r?!0:a)&&(i+=l(r));return a?i:"0"},m.prototype.negate=function(){var e=v();return m.ZERO.subTo(this,e),e},m.prototype.abs=function(){return this.s<0?this.negate():this},m.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;0<=--r;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0},m.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+C(this.data[this.t-1]^this.s&this.DM)},m.prototype.mod=function(e){var t=v();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(m.ZERO)&&e.subTo(t,t),t},m.prototype.modPowInt=function(e,t){return t=new(e<256||t.isEven()?E:S)(t),this.exp(e,t)},m.ZERO=g(0),m.ONE=g(1),o.prototype.convert=s,o.prototype.revert=s,o.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},o.prototype.sqrTo=function(e,t){e.squareTo(t)},T.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=v();return e.copyTo(t),this.reduce(t),t},T.prototype.revert=function(e){return e},T.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);0<=e.compareTo(this.m);)e.subTo(this.m,e)},T.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},T.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var y=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],b=(1<<26)/y[y.length-1];m.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},m.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||36<e)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=g(r),a=v(),i=v(),o="";for(this.divRemTo(n,a,i);0<a.signum();)o=(r+i.intValue()).toString(e).substr(1)+o,a.divRemTo(n,a,i);return i.intValue().toString(e)+o},m.prototype.fromRadix=function(e,t){this.fromInt(0);for(var r=this.chunkSize(t=null==t?10:t),n=Math.pow(t,r),a=!1,i=0,o=0,s=0;s<e.length;++s){var l=u(e,s);l<0?"-"==e.charAt(s)&&0==this.signum()&&(a=!0):(o=t*o+l,++i>=r&&(this.dMultiply(n),this.dAddOffset(o,0),o=i=0))}0<i&&(this.dMultiply(Math.pow(t,i)),this.dAddOffset(o,0)),a&&m.ZERO.subTo(this,this)},m.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(m.ONE.shiftLeft(e-1),a,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(m.ONE.shiftLeft(e-1),this);else{var n=new Array,r=7&e;n.length=1+(e>>3),t.nextBytes(n),0<r?n[0]&=(1<<r)-1:n[0]=0,this.fromString(n,256)}},m.prototype.bitwiseTo=function(e,t,r){for(var n,a=Math.min(e.t,this.t),i=0;i<a;++i)r.data[i]=t(this.data[i],e.data[i]);if(e.t<this.t){for(n=e.s&this.DM,i=a;i<this.t;++i)r.data[i]=t(this.data[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=a;i<e.t;++i)r.data[i]=t(n,e.data[i]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},m.prototype.changeBit=function(e,t){return e=m.ONE.shiftLeft(e),this.bitwiseTo(e,t,e),e},m.prototype.addTo=function(e,t){for(var r=0,n=0,a=Math.min(e.t,this.t);r<a;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,0<n?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},m.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},m.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},m.prototype.multiplyLowerTo=function(e,t,r){var n,a=Math.min(this.t+e.t,t);for(r.s=0,r.t=a;0<a;)r.data[--a]=0;for(n=r.t-this.t;a<n;++a)r.data[a+this.t]=this.am(0,e.data[a],r,a,0,this.t);for(n=Math.min(e.t,t);a<n;++a)this.am(0,e.data[a],r,a,0,t-a);r.clamp()},m.prototype.multiplyUpperTo=function(e,t,r){var n=r.t=this.t+e.t- --t;for(r.s=0;0<=--n;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},m.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(0<this.t)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;0<=n;--n)r=(t*r+this.data[n])%e;return r},m.prototype.millerRabin=function(e){var t=this.subtract(m.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,a=t.shiftRight(r),i={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},o=0;o<e;++o){for(;(n=new m(this.bitLength(),i)).compareTo(m.ONE)<=0||0<=n.compareTo(t););var s=n.modPow(a,this);if(0!=s.compareTo(m.ONE)&&0!=s.compareTo(t)){for(var l=1;l++<r&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(m.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},m.prototype.clone=function(){var e=v();return this.copyTo(e),e},m.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},m.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},m.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},m.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},m.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,a=0;if(0<e--)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[a++]=r|this.s<<this.DB-n);0<=e;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==a&&(128&this.s)!=(128&r)&&++a,(0<a||r!=this.s)&&(t[a++]=r);return t},m.prototype.equals=function(e){return 0==this.compareTo(e)},m.prototype.min=function(e){return this.compareTo(e)<0?this:e},m.prototype.max=function(e){return 0<this.compareTo(e)?this:e},m.prototype.and=function(e){var t=v();return this.bitwiseTo(e,r,t),t},m.prototype.or=function(e){var t=v();return this.bitwiseTo(e,a,t),t},m.prototype.xor=function(e){var t=v();return this.bitwiseTo(e,n,t),t},m.prototype.andNot=function(e){var t=v();return this.bitwiseTo(e,i,t),t},m.prototype.not=function(){for(var e=v(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},m.prototype.shiftLeft=function(e){var t=v();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},m.prototype.shiftRight=function(e){var t=v();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},m.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+function(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}(this.data[e]);return this.s<0?this.t*this.DB:-1},m.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=function(e){for(var t=0;0!=e;)e&=e-1,++t;return t}(this.data[r]^t);return e},m.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},m.prototype.setBit=function(e){return this.changeBit(e,a)},m.prototype.clearBit=function(e){return this.changeBit(e,i)},m.prototype.flipBit=function(e){return this.changeBit(e,n)},m.prototype.add=function(e){var t=v();return this.addTo(e,t),t},m.prototype.subtract=function(e){var t=v();return this.subTo(e,t),t},m.prototype.multiply=function(e){var t=v();return this.multiplyTo(e,t),t},m.prototype.divide=function(e){var t=v();return this.divRemTo(e,t,null),t},m.prototype.remainder=function(e){var t=v();return this.divRemTo(e,null,t),t},m.prototype.divideAndRemainder=function(e){var t=v(),r=v();return this.divRemTo(e,t,r),new Array(t,r)},m.prototype.modPow=function(e,t){var r=e.bitLength(),n=g(1);if(r<=0)return n;var a=r<18?1:r<48?3:r<144?4:r<768?5:6,i=new(r<8?E:t.isEven()?T:S)(t),o=new Array,s=3,l=a-1,u=(1<<a)-1;if(o[1]=i.convert(this),1<a){var c=v();for(i.sqrTo(o[1],c);s<=u;)o[s]=v(),i.mulTo(c,o[s-2],o[s]),s+=2}for(var d,p,f=e.t-1,h=!0,y=v(),r=C(e.data[f])-1;0<=f;){for(l<=r?d=e.data[f]>>r-l&u:(d=(e.data[f]&(1<<r+1)-1)<<l-r,0<f&&(d|=e.data[f-1]>>this.DB+r-l)),s=a;0==(1&d);)d>>=1,--s;if((r-=s)<0&&(r+=this.DB,--f),h)o[d].copyTo(n),h=!1;else{for(;1<s;)i.sqrTo(n,y),i.sqrTo(y,n),s-=2;0<s?i.sqrTo(n,y):(p=n,n=y,y=p),i.mulTo(y,o[d],n)}for(;0<=f&&0==(e.data[f]&1<<r);)i.sqrTo(n,y),p=n,n=y,y=p,--r<0&&(r=this.DB-1,--f)}return i.revert(n)},m.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return m.ZERO;for(var r=e.clone(),n=this.clone(),a=g(1),i=g(0),o=g(0),s=g(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(a.isEven()&&i.isEven()||(a.addTo(this,a),i.subTo(e,i)),a.rShiftTo(1,a)):i.isEven()||i.subTo(e,i),i.rShiftTo(1,i);for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);0<=r.compareTo(n)?(r.subTo(n,r),t&&a.subTo(o,a),i.subTo(s,i)):(n.subTo(r,n),t&&o.subTo(a,o),s.subTo(i,s))}return 0!=n.compareTo(m.ONE)?m.ZERO:0<=s.compareTo(e)?s.subtract(e):s.signum()<0?(s.addTo(e,s),s.signum()<0?s.add(e):s):s},m.prototype.pow=function(e){return this.exp(e,new o)},m.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();t.compareTo(r)<0&&(a=t,t=r,r=a);var n=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(0<(a=n<a?n:a)&&(t.rShiftTo(a,t),r.rShiftTo(a,r));0<t.signum();)0<(n=t.getLowestSetBit())&&t.rShiftTo(n,t),0<(n=r.getLowestSetBit())&&r.rShiftTo(n,r),0<=t.compareTo(r)?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return 0<a&&r.lShiftTo(a,r),r},m.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=y[y.length-1]){for(t=0;t<y.length;++t)if(r.data[0]==y[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<y.length;){for(var n=y[t],a=t+1;a<y.length&&n<b;)n*=y[a++];for(n=r.modInt(n);t<a;)if(n%y[t++]==0)return!1}return r.millerRabin(e)},e.jsbn=e.jsbn||{},e.jsbn.BigInteger=m}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/jsbn",["require","module"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.jsbn)return e.jsbn;e.defined.jsbn=!0;for(var r=0;r<t.length;++r)t[r](e);return e.jsbn}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(C){function E(e,t,r){r=r||C.md.sha1.create();for(var n="",a=Math.ceil(t/r.digestLength),i=0;i<a;++i){var o=String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,255&i);r.start(),r.update(e+o),n+=r.digest().getBytes()}return n.substring(0,t)}var e=C.pkcs1=C.pkcs1||{};e.encode_rsa_oaep=function(e,t,r){var n,a;"string"==typeof r?(l=r,n=arguments[3]||void 0,a=arguments[4]||void 0):r&&(l=r.label||void 0,n=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(i=r.mgf1.md)),a?a.start():a=C.md.sha1.create();var i=i||a,o=Math.ceil(e.n.bitLength()/8),s=o-2*a.digestLength-2;if(t.length>s)throw(p=new Error("RSAES-OAEP input message length is too long.")).length=t.length,p.maxLength=s,p;a.update(l=l||"","raw");for(var l=a.digest(),u="",c=s-t.length,d=0;d<c;d++)u+="\0";var p,l=l.getBytes()+u+""+t;if(n){if(n.length!==a.digestLength)throw(p=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=n.length,p.digestLength=a.digestLength,p}else n=C.random.getBytes(a.digestLength);o=E(n,o-a.digestLength-1,i),l=C.util.xorBytes(l,o,l.length),i=E(l,a.digestLength,i);return"\0"+C.util.xorBytes(n,i,n.length)+l},e.decode_rsa_oaep=function(e,t,r){var n;"string"==typeof r?(u=r,n=arguments[3]||void 0):r&&(u=r.label||void 0,n=r.md||void 0,r.mgf1&&r.mgf1.md&&(c=r.mgf1.md));var a=Math.ceil(e.n.bitLength()/8);if(t.length!==a)throw(f=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,f.expectedLength=a,f;if(void 0===n?n=C.md.sha1.create():n.start(),c=c||n,a<2*n.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n.update(u=u||"","raw");for(var i=n.digest().getBytes(),o=t.charAt(0),s=t.substring(1,n.digestLength+1),l=t.substring(1+n.digestLength),u=E(l,n.digestLength,c),c=E(C.util.xorBytes(s,u,s.length),a-n.digestLength-1,c),d=C.util.xorBytes(l,c,l.length),p=d.substring(0,n.digestLength),f="\0"!==o,h=0;h<n.digestLength;++h)f|=i.charAt(h)!==p.charAt(h);for(var y=1,g=n.digestLength,m=n.digestLength;m<d.length;m++){var v=d.charCodeAt(m);f|=v&(y?65534:0),g+=y&=1&v^1}if(f||1!==d.charCodeAt(g))throw new Error("Invalid RSAES-OAEP padding.");return d.substring(g+1)}}var i="pkcs1";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/pkcs1",["require","module","./util","./random","./sha1"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(f){function i(e,t,r,n){return("workers"in r?function(i,o,e,s){function r(){function e(e){if(!a){0;var t=e.data;if(t.found){for(var r=0;r<n.length;++r)n[r].terminate();return a=!0,s(null,new g(t.prime,16))}t=(l=l.bitLength()>i?y(i,o):l).toString(16);e.target.postMessage({hex:t,workLoad:c}),l.dAddOffset(d,0)}}u=Math.max(1,u);for(var n=[],t=0;t<u;++t)n[t]=new Worker(p);for(t=0;t<u;++t)n[t].addEventListener("message",e);var a=!1}if("undefined"==typeof Worker)return h(i,o,e,s);var l=y(i,o),u=e.workers,c=e.workLoad||100,d=30*c/8,p=e.workerScript||"forge/prime.worker.js";if(-1===u)return f.util.estimateCores(function(e,t){u=(t=e?2:t)-1,r()});r()}:h)(e,t,r,n)}function h(e,t,r,n){var a,i=y(e,t),o=0,s=(a=i.bitLength())<=100?27:a<=150?18:a<=200?15:a<=250?12:a<=300?9:a<=350?8:a<=400?7:a<=500?6:a<=600?5:a<=800?4:a<=1250?3:2;"millerRabinTests"in r&&(s=r.millerRabinTests);var l=10;"maxBlockTime"in r&&(l=r.maxBlockTime);var u=+new Date;do{if((i=i.bitLength()>e?y(e,t):i).isProbablePrime(s))return n(null,i)}while(i.dAddOffset(c[o++%8],0),l<0||+new Date-u<l);f.util.setImmediate(function(){h(e,t,r,n)})}function y(e,t){t=new g(e,t),e-=1;return t.testBit(e)||t.bitwiseTo(g.ONE.shiftLeft(e),n,t),t.dAddOffset(31-t.mod(r).byteValue(),0),t}var e,g,c,r,n;f.prime||(e=f.prime=f.prime||{},g=f.jsbn.BigInteger,c=[6,4,2,4,2,4,6,2],(r=new g(null)).fromInt(30),n=function(e,t){return e|t},e.generateProbablePrime=function(e,t,r){"function"==typeof t&&(r=t,t={});var n=(t=t||{}).algorithm||"PRIMEINC";(n="string"==typeof n?{name:n}:n).options=n.options||{};var a=t.prng||f.random;if("PRIMEINC"===n.name)return i(e,{nextBytes:function(e){for(var t=a.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},n.options,r);throw new Error("Invalid prime generation algorithm: "+n.name)})}var i="prime";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/prime",["require","module","./util","./jsbn","./random"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(c){function l(e,t,r){var n=c.util.createBuffer(),a=Math.ceil(t.n.bitLength()/8);if(e.length>a-11){t=new Error("Message is too long for PKCS#1 v1.5 padding.");throw t.length=e.length,t.max=a-11,t}n.putByte(0),n.putByte(r);var i=a-3-e.length;if(0===r||1===r)for(var o=0===r?0:255,s=0;s<i;++s)n.putByte(o);else for(;0<i;){for(var l=0,u=c.random.getBytes(i),s=0;s<i;++s)0===(o=u.charCodeAt(s))?++l:n.putByte(o);i=l}return n.putByte(0),n.putBytes(e),n}function u(e,t,r,n){var a=Math.ceil(t.n.bitLength()/8),i=c.util.createBuffer(e),t=i.getByte(),e=i.getByte();if(0!==t||r&&0!==e&&1!==e||!r&&2!=e||r&&0===e&&void 0===n)throw new Error("Encryption block is invalid.");var o=0;if(0===e){for(var o=a-3-n,s=0;s<o;++s)if(0!==i.getByte())throw new Error("Encryption block is invalid.")}else if(1===e)for(o=0;1<i.length();){if(255!==i.getByte()){--i.read;break}++o}else if(2===e)for(o=0;1<i.length();){if(0===i.getByte()){--i.read;break}++o}if(0!==i.getByte()||o!==a-3-i.length())throw new Error("Encryption block is invalid.");return i.getBytes()}function t(e){e=e.toString(16);return"8"<=e[0]&&(e="00"+e),c.util.hexToBytes(e)}function i(e){return"undefined"!=typeof window&&"object"==typeof window.crypto&&"object"==typeof window.crypto.subtle&&"function"==typeof window.crypto.subtle[e]}function o(e){return"undefined"!=typeof window&&"object"==typeof window.msCrypto&&"object"==typeof window.msCrypto.subtle&&"function"==typeof window.msCrypto.subtle[e]}function s(e){for(var t=c.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}var d;void 0===d&&(d=c.jsbn.BigInteger);var p=c.asn1;c.pki=c.pki||{},c.pki.rsa=c.rsa=c.rsa||{};function f(e){if(e.algorithm in y.oids){var t=y.oids[e.algorithm],r=p.oidToDer(t).getBytes(),n=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]),t=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);t.value.push(p.create(p.Class.UNIVERSAL,p.Type.OID,!1,r)),t.value.push(p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,""));r=p.create(p.Class.UNIVERSAL,p.Type.OCTETSTRING,!1,e.digest().getBytes());return n.value.push(t),n.value.push(r),p.toDer(n).getBytes()}throw(n=new Error("Unknown message digest algorithm.")).algorithm=e.algorithm,n}function h(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var n;for(t.dP||(t.dP=t.d.mod(t.p.subtract(d.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(d.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));0<=(n=new d(c.util.bytesToHex(c.random.getBytes(t.n.bitLength()/8)),16)).compareTo(t.n)||!n.gcd(t.n).equals(d.ONE););for(var a=(e=e.multiply(n.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),i=e.mod(t.q).modPow(t.dQ,t.q);a.compareTo(i)<0;)a=a.add(t.p);return a.subtract(i).multiply(t.qInv).mod(t.p).multiply(t.q).add(i).multiply(n.modInverse(t.n)).mod(t.n)}var y=c.pki,g=[6,4,2,4,2,4,6,2],m={name:"PrivateKeyInfo",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:p.Class.UNIVERSAL,type:p.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},v={name:"RSAPrivateKey",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},C={name:"RSAPublicKey",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},E=c.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:p.Class.UNIVERSAL,type:p.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]};y.rsa.encrypt=function(e,t,r){var n=r,a=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(n=2===r,i=l(e,t,r)):(i=c.util.createBuffer()).putBytes(e);for(var i=new d(i.toHex(),16),n=h(i,t,n).toString(16),o=c.util.createBuffer(),s=a-Math.ceil(n.length/2);0<s;)o.putByte(0),--s;return o.putBytes(c.util.hexToBytes(n)),o.getBytes()},y.rsa.decrypt=function(e,t,r,n){var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var i=new Error("Encrypted message length is invalid.");throw i.length=e.length,i.expected=a,i}e=new d(c.util.createBuffer(e).toHex(),16);if(0<=e.compareTo(t.n))throw new Error("Encrypted message is invalid.");for(var e=h(e,t,r).toString(16),o=c.util.createBuffer(),s=a-Math.ceil(e.length/2);0<s;)o.putByte(0),--s;return o.putBytes(c.util.hexToBytes(e)),!1!==n?u(o.getBytes(),t,r):o.getBytes()},y.rsa.createKeyPairGenerationState=function(e,t,r){e=(e="string"==typeof e?parseInt(e,10):e)||2048;var n=(r=r||{}).prng||c.random,a={nextBytes:function(e){for(var t=n.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},r=r.algorithm||"PRIMEINC";if("PRIMEINC"!==r)throw new Error("Invalid key generation algorithm: "+r);return(e={algorithm:r,state:0,bits:e,rng:a,eInt:t||65537,e:new d(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(e.eInt),e},y.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new d(null);r.fromInt(30);function n(e,t){return e|t}for(var a,i,o,s=0,l=+new Date,u=0;null===e.keys&&(t<=0||u<t);)0===e.state?(a=(o=null===e.p?e.pBits:e.qBits)-1,0===e.pqState?(e.num=new d(o,e.rng),e.num.testBit(a)||e.num.bitwiseTo(d.ONE.shiftLeft(a),n,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),s=0,++e.pqState):1===e.pqState?e.num.bitLength()>o?e.pqState=0:e.num.isProbablePrime((o=e.num.bitLength())<=100?27:o<=150?18:o<=200?15:o<=250?12:o<=300?9:o<=350?8:o<=400?7:o<=500?6:o<=600?5:o<=800?4:o<=1250?3:2)?++e.pqState:e.num.dAddOffset(g[s++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(d.ONE).gcd(e.e).compareTo(d.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)):1===e.state?(e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state):2===e.state?(e.p1=e.p.subtract(d.ONE),e.q1=e.q.subtract(d.ONE),e.phi=e.p1.multiply(e.q1),++e.state):3===e.state?0===e.phi.gcd(e.e).compareTo(d.ONE)?++e.state:(e.p=null,e.q=null,e.state=0):4===e.state?(e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0)):5===e.state&&(i=e.e.modInverse(e.phi),e.keys={privateKey:y.rsa.setPrivateKey(e.n,e.e,i,e.p,e.q,i.mod(e.p1),i.mod(e.q1),e.q.modInverse(e.p)),publicKey:y.rsa.setPublicKey(e.n,e.e)}),u+=(i=+new Date)-l,l=i;return null!==e.keys},y.rsa.generateKeyPair=function(e,t,r,n){if(1===arguments.length?"object"==typeof e?(r=e,e=void 0):"function"==typeof e&&(n=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof t?(n=t,t=void 0):"number"!=typeof t&&(r=t,t=void 0):(r=e,n=t,t=e=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof r&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),!c.disableNativeCode&&n&&256<=e&&e<=16384&&(65537===t||3===t)){if(i("generateKey")&&i("exportKey"))return window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:s(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(e){return window.crypto.subtle.exportKey("pkcs8",e.privateKey)}).catch(function(e){n(e)}).then(function(e){e&&(e=y.privateKeyFromAsn1(p.fromDer(c.util.createBuffer(e))),n(null,{privateKey:e,publicKey:y.setRsaPublicKey(e.n,e.e)}))});if(o("generateKey")&&o("exportKey")){var a=window.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:s(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return a.oncomplete=function(e){e=e.target.result,e=window.msCrypto.subtle.exportKey("pkcs8",e.privateKey);e.oncomplete=function(e){e=e.target.result,e=y.privateKeyFromAsn1(p.fromDer(c.util.createBuffer(e)));n(null,{privateKey:e,publicKey:y.setRsaPublicKey(e.n,e.e)})},e.onerror=function(e){n(e)}},void(a.onerror=function(e){n(e)})}}a=y.rsa.createKeyPairGenerationState(e,t,r);if(!n)return y.rsa.stepKeyPairGenerationState(a,0),a.keys;!function(n,e,a){function i(){o(n.pBits,function(e,t){return e?a(e):(n.p=t,null!==n.q?s(e,n.q):void o(n.qBits,s))})}function o(e,t){c.prime.generateProbablePrime(e,r,t)}function s(e,t){if(e)return a(e);if(n.q=t,n.p.compareTo(n.q)<0&&(r=n.p,n.p=n.q,n.q=r),0!==n.p.subtract(d.ONE).gcd(n.e).compareTo(d.ONE))return n.p=null,void i();if(0!==n.q.subtract(d.ONE).gcd(n.e).compareTo(d.ONE))return n.q=null,void o(n.qBits,s);if(n.p1=n.p.subtract(d.ONE),n.q1=n.q.subtract(d.ONE),n.phi=n.p1.multiply(n.q1),0!==n.phi.gcd(n.e).compareTo(d.ONE))return n.p=n.q=null,void i();if(n.n=n.p.multiply(n.q),n.n.bitLength()!==n.bits)return n.q=null,void o(n.qBits,s);var r=n.e.modInverse(n.phi);n.keys={privateKey:y.rsa.setPrivateKey(n.n,n.e,r,n.p,n.q,r.mod(n.p1),r.mod(n.q1),n.q.modInverse(n.p)),publicKey:y.rsa.setPublicKey(n.n,n.e)},a(null,n.keys)}"function"==typeof e&&(a=e,e={});var r={algorithm:{name:(e=e||{}).algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(r.prng=e.prng),i()}(a,r,n)},y.setRsaPublicKey=y.rsa.setPublicKey=function(e,t){var n={n:e,e:t,encrypt:function(e,t,r){if("string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return l(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return c.pkcs1.encode_rsa_oaep(t,e,r)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"==typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');e=t.encode(e,n,!0);return y.rsa.encrypt(e,n,!0)},verify:function(e,t,r){"string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===r?r={verify:function(e,t){return t=u(t,n,!0),e===p.fromDer(t).value[1].value}}:"NONE"!==r&&"NULL"!==r&&null!==r||(r={verify:function(e,t){return e===(t=u(t,n,!0))}});t=y.rsa.decrypt(t,n,!0,!1);return r.verify(e,t,n.n.bitLength())}};return n},y.setRsaPrivateKey=y.rsa.setPrivateKey=function(e,t,r,n,a,i,o,s){var l={n:e,e:t,d:r,p:n,q:a,dP:i,dQ:o,qInv:s,decrypt:function(e,t,r){"string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");e=y.rsa.decrypt(e,l,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:u};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return c.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(e,l,!1)},sign:function(e,t){var r=!1;void 0===(t="string"==typeof t?t.toUpperCase():t)||"RSASSA-PKCS1-V1_5"===t?(t={encode:f},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);t=t.encode(e,l.n.bitLength());return y.rsa.encrypt(t,l,r)}};return l},y.wrapRsaPrivateKey=function(e){return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(0).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(y.oids.rsaEncryption).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,"")]),p.create(p.Class.UNIVERSAL,p.Type.OCTETSTRING,!1,p.toDer(e).getBytes())])},y.privateKeyFromAsn1=function(e){var t,r,n,a,i,o,s={},l=[];if(p.validate(e,m,s,l)&&(e=p.fromDer(c.util.createBuffer(s.privateKey))),p.validate(e,v,s={},l=[]))return t=c.util.createBuffer(s.privateKeyModulus).toHex(),r=c.util.createBuffer(s.privateKeyPublicExponent).toHex(),n=c.util.createBuffer(s.privateKeyPrivateExponent).toHex(),a=c.util.createBuffer(s.privateKeyPrime1).toHex(),i=c.util.createBuffer(s.privateKeyPrime2).toHex(),o=c.util.createBuffer(s.privateKeyExponent1).toHex(),e=c.util.createBuffer(s.privateKeyExponent2).toHex(),u=c.util.createBuffer(s.privateKeyCoefficient).toHex(),y.setRsaPrivateKey(new d(t,16),new d(r,16),new d(n,16),new d(a,16),new d(i,16),new d(o,16),new d(e,16),new d(u,16));var u=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw u.errors=l,u},y.privateKeyToAsn1=y.privateKeyToRSAPrivateKey=function(e){return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(0).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,t(e.n)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,t(e.e)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,t(e.d)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,t(e.p)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,t(e.q)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,t(e.dP)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,t(e.dQ)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,t(e.qInv))])},y.publicKeyFromAsn1=function(e){var t={},r=[];if(p.validate(e,E,t,r)){var n=p.derToOid(t.publicKeyOid);if(n!==y.oids.rsaEncryption)throw(a=new Error("Cannot read public key. Unknown OID.")).oid=n,a;e=t.rsaPublicKey}if(!p.validate(e,C,t,r=[]))throw(a=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,a;var a=c.util.createBuffer(t.publicKeyModulus).toHex(),t=c.util.createBuffer(t.publicKeyExponent).toHex();return y.setRsaPublicKey(new d(a,16),new d(t,16))},y.publicKeyToAsn1=y.publicKeyToSubjectPublicKeyInfo=function(e){return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(y.oids.rsaEncryption).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,"")]),p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,[y.publicKeyToRSAPublicKey(e)])])},y.publicKeyToRSAPublicKey=function(e){return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,t(e.n)),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,t(e.e))])}}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/rsa",["require","module","./asn1","./jsbn","./oids","./pkcs1","./prime","./random","./util"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.rsa)return e.rsa;e.defined.rsa=!0;for(var r=0;r<t.length;++r)t[r](e);return e.rsa}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(N){function s(e,t){return e.start().update(t).digest().getBytes()}N.jsbn.BigInteger;var m=N.asn1,v=N.pki=N.pki||{};v.pbe=N.pbe=N.pbe||{};var C=v.oids,o={name:"EncryptedPrivateKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},l={name:"PBES2Algorithms",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,onstructed:!0,capture:"kdfIterationCount"}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},u={name:"pkcs-12PbeParams",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"iterations"}]};v.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128";var n,a,i,o,s,l,u=N.random.getBytesSync(r.saltSize),c=r.count,d=m.integerToDer(c);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){switch(r.algorithm){case"aes128":i=y=16,o=C["aes128-CBC"],s=N.aes.createEncryptionCipher;break;case"aes192":y=24,i=16,o=C["aes192-CBC"],s=N.aes.createEncryptionCipher;break;case"aes256":y=32,i=16,o=C["aes256-CBC"],s=N.aes.createEncryptionCipher;break;case"des":i=y=8,o=C.desCBC,s=N.des.createEncryptionCipher;break;default:throw(l=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,l}var p=N.pkcs5.pbkdf2(t,u,c,y),f=N.random.getBytesSync(i);(h=s(p)).start(f),h.update(m.toDer(e)),h.finish(),a=h.output.getBytes(),n=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(C.pkcs5PBES2).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(C.pkcs5PBKDF2).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,u),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,d.getBytes())])]),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(o).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,f)])])])}else{if("3des"!==r.algorithm)throw(l=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,l;var h,y=24,g=new N.util.ByteBuffer(u),p=v.pbe.generatePkcs12Key(t,g,1,c,y),f=v.pbe.generatePkcs12Key(t,g,2,c,y);(h=N.des.createEncryptionCipher(p)).start(f),h.update(m.toDer(e)),h.finish(),a=h.output.getBytes(),n=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(C["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,u),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,d.getBytes())])])}return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[n,m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,a)])},v.decryptPrivateKeyInfo=function(e,t){var r=null,n={},a=[];if(!m.validate(e,o,n,a)){var i=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw i.errors=a,i}i=m.derToOid(n.encryptionOid),t=v.pbe.getCipher(i,n.encryptionParams,t),n=N.util.createBuffer(n.encryptedData);return t.update(n),r=t.finish()?m.fromDer(t.output):r},v.encryptedPrivateKeyToPem=function(e,t){e={type:"ENCRYPTED PRIVATE KEY",body:m.toDer(e).getBytes()};return N.pem.encode(e,{maxline:t})},v.encryptedPrivateKeyFromPem=function(e){var t=N.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){e=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw e.headerType=t.type,e}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return m.fromDer(t.body)},v.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var n=v.wrapRsaPrivateKey(v.privateKeyToAsn1(e)),n=v.encryptPrivateKeyInfo(n,t,r);return v.encryptedPrivateKeyToPem(n)}var a,i,o,s;switch(r.algorithm){case"aes128":a="AES-128-CBC",i=N.random.getBytesSync(o=16),s=N.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",o=24,i=N.random.getBytesSync(16),s=N.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",o=32,i=N.random.getBytesSync(16),s=N.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",o=24,i=N.random.getBytesSync(8),s=N.des.createEncryptionCipher;break;case"des":a="DES-CBC",i=N.random.getBytesSync(o=8),s=N.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}t=s(N.pbe.opensslDeriveBytes(t,i.substr(0,8),o));t.start(i),t.update(m.toDer(v.privateKeyToAsn1(e))),t.finish();t={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:N.util.bytesToHex(i).toUpperCase()},body:t.output.getBytes()};return N.pem.encode(t)},v.decryptRsaPrivateKey=function(e,t){var r,n,a,i=null,o=N.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==o.type&&"PRIVATE KEY"!==o.type&&"RSA PRIVATE KEY"!==o.type)throw(a=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=a;if(o.procType&&"ENCRYPTED"===o.procType.type){switch(o.dekInfo.algorithm){case"DES-CBC":r=8,n=N.des.createDecryptionCipher;break;case"DES-EDE3-CBC":r=24,n=N.des.createDecryptionCipher;break;case"AES-128-CBC":r=16,n=N.aes.createDecryptionCipher;break;case"AES-192-CBC":r=24,n=N.aes.createDecryptionCipher;break;case"AES-256-CBC":r=32,n=N.aes.createDecryptionCipher;break;case"RC2-40-CBC":r=5,n=function(e){return N.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":r=8,n=function(e){return N.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":r=16,n=function(e){return N.rc2.createDecryptionCipher(e,128)};break;default:throw(a=new Error('Could not decrypt private key; unsupported encryption algorithm "'+o.dekInfo.algorithm+'".')).algorithm=o.dekInfo.algorithm,a}var s=N.util.hexToBytes(o.dekInfo.parameters),e=n(N.pbe.opensslDeriveBytes(t,s.substr(0,8),r));if(e.start(s),e.update(N.util.createBuffer(o.body)),!e.finish())return i;i=e.output.getBytes()}else i=o.body;return i=null!==(i="ENCRYPTED PRIVATE KEY"===o.type?v.decryptPrivateKeyInfo(m.fromDer(i),t):m.fromDer(i))?v.privateKeyFromAsn1(i):i},v.pbe.generatePkcs12Key=function(e,t,r,n,a,i){var o=(i=null==i?N.md.sha1.create():i).digestLength,s=i.blockLength,l=new N.util.ByteBuffer,u=new N.util.ByteBuffer;if(null!=e){for(w=0;w<e.length;w++)u.putInt16(e.charCodeAt(w));u.putInt16(0)}var c=u.length(),d=t.length(),p=new N.util.ByteBuffer;p.fillWithByte(r,s);var f=s*Math.ceil(d/s),h=new N.util.ByteBuffer;for(w=0;w<f;w++)h.putByte(t.at(w%d));var y=s*Math.ceil(c/s),g=new N.util.ByteBuffer;for(w=0;w<y;w++)g.putByte(u.at(w%c));var m=h;m.putBuffer(g);for(var v=Math.ceil(a/o),C=1;C<=v;C++){var E=new N.util.ByteBuffer;E.putBytes(p.bytes()),E.putBytes(m.bytes());for(var S=0;S<n;S++)i.start(),i.update(E.getBytes()),E=i.digest();var T=new N.util.ByteBuffer;for(w=0;w<s;w++)T.putByte(E.at(w%o));for(var b=Math.ceil(d/s)+Math.ceil(c/s),A=new N.util.ByteBuffer,I=0;I<b;I++){for(var _=new N.util.ByteBuffer(m.getBytes(s)),B=511,w=T.length()-1;0<=w;w--)B>>=8,B+=T.at(w)+_.at(w),_.setAt(w,255&B);A.putBuffer(_)}m=A,l.putBuffer(E)}return l.truncate(l.length()-a),l},v.pbe.getCipher=function(e,t,r){switch(e){case v.oids.pkcs5PBES2:return v.pbe.getCipherForPBES2(e,t,r);case v.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case v.oids["pbewithSHAAnd40BitRC2-CBC"]:return v.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},v.pbe.getCipherForPBES2=function(e,t,r){var n={},a=[];if(!m.validate(t,l,n,a))throw(s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,s;if((e=m.derToOid(n.kdfOid))!==v.oids.pkcs5PBKDF2)throw(s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,s.supportedOids=["pkcs5PBKDF2"],s;if((e=m.derToOid(n.encOid))!==v.oids["aes128-CBC"]&&e!==v.oids["aes192-CBC"]&&e!==v.oids["aes256-CBC"]&&e!==v.oids["des-EDE3-CBC"]&&e!==v.oids.desCBC)throw(s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s;var i,o,a=n.kdfSalt,s=(s=N.util.createBuffer(n.kdfIterationCount)).getInt(s.length()<<3);switch(v.oids[e]){case"aes128-CBC":i=16,o=N.aes.createDecryptionCipher;break;case"aes192-CBC":i=24,o=N.aes.createDecryptionCipher;break;case"aes256-CBC":i=32,o=N.aes.createDecryptionCipher;break;case"des-EDE3-CBC":i=24,o=N.des.createDecryptionCipher;break;case"desCBC":i=8,o=N.des.createDecryptionCipher}s=N.pkcs5.pbkdf2(r,a,s,i),n=n.encIv,s=o(s);return s.start(n),s},v.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},a=[];if(!m.validate(t,u,n,a))throw(l=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,l;var i,o,s,l,a=N.util.createBuffer(n.salt),n=(n=N.util.createBuffer(n.iterations)).getInt(n.length()<<3);switch(e){case v.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:i=24,o=8,s=N.des.startDecrypting;break;case v.oids["pbewithSHAAnd40BitRC2-CBC"]:i=5,o=8,s=function(e,t){e=N.rc2.createDecryptionCipher(e,40);return e.start(t,null),e};break;default:throw(l=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,l}return s(v.pbe.generatePkcs12Key(r,a,1,n,i),v.pbe.generatePkcs12Key(r,a,2,n,o))},v.pbe.opensslDeriveBytes=function(e,t,r,n){for(var a=[s(n=null==n?N.md.md5.create():n,e+(t=null===t?"":t))],i=16,o=1;i<r;++o,i+=16)a.push(s(n,a[o-1]+e+t));return a.join("").substr(0,r)}}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/pbe",["require","module","./aes","./asn1","./des","./md","./oids","./pem","./pbkdf2","./random","./rc2","./rsa","./util"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.pbe)return e.pbe;e.defined.pbe=!0;for(var r=0;r<t.length;++r)t[r](e);return e.pbe}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(e){var t=e.asn1,r=e.pkcs7asn1=e.pkcs7asn1||{};e.pkcs7=e.pkcs7||{},e.pkcs7.asn1=r;var n={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};r.contentInfoValidator=n;e={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};r.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(e)},r.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(e)};e={name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};r.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},n,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[e]}]},r.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}}var i="pkcs7asn1";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/pkcs7asn1",["require","module","./asn1","./util"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(s){s.mgf=s.mgf||{},(s.mgf.mgf1=s.mgf1=s.mgf1||{}).create=function(o){return{generate:function(e,t){for(var r=new s.util.ByteBuffer,n=Math.ceil(t/o.digestLength),a=0;a<n;a++){var i=new s.util.ByteBuffer;i.putInt32(a),o.start(),o.update(e+i.getBytes()),r.putBuffer(o.digest())}return r.truncate(r.length()-t),r.getBytes()}}}}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/mgf1",["require","module","./util"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.mgf1)return e.mgf1;e.defined.mgf1=!0;for(var r=0;r<t.length;++r)t[r](e);return e.mgf1}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(e){e.mgf=e.mgf||{},e.mgf.mgf1=e.mgf1}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/mgf",["require","module","./mgf1"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.mgf)return e.mgf;e.defined.mgf=!0;for(var r=0;r<t.length;++r)t[r](e);return e.mgf}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(g){(g.pss=g.pss||{}).create=function(e){var c,d=(e=3===arguments.length?{md:arguments[0],mgf:arguments[1],saltLength:arguments[2]}:e).md,p=e.mgf,f=d.digestLength,h=e.salt||null;if("string"==typeof h&&(h=g.util.createBuffer(h)),"saltLength"in e)c=e.saltLength;else{if(null===h)throw new Error("Salt length not specified or specific salt not given.");c=h.length()}if(null!==h&&h.length()!==c)throw new Error("Given salt length does not match length of given salt.");var y=e.prng||g.random,t={encode:function(e,t){var r=t-1,n=Math.ceil(r/8),a=e.digest().getBytes();if(n<f+c+2)throw new Error("Message is too long to encrypt.");t=null===h?y.getBytesSync(c):h.bytes(),e=new g.util.ByteBuffer;e.fillWithByte(0,8),e.putBytes(a),e.putBytes(t),d.start(),d.update(e.getBytes());a=d.digest().getBytes(),e=new g.util.ByteBuffer;e.fillWithByte(0,n-c-f-2),e.putByte(1),e.putBytes(t);for(var i=e.getBytes(),o=n-f-1,s=p.generate(a,o),l="",u=0;u<o;u++)l+=String.fromCharCode(i.charCodeAt(u)^s.charCodeAt(u));r=65280>>8*n-r&255;return(l=String.fromCharCode(l.charCodeAt(0)&~r)+l.substr(1))+a+String.fromCharCode(188)},verify:function(e,t,r){var n=r-1,r=Math.ceil(n/8);if(t=t.substr(-r),r<f+c+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==t.charCodeAt(r-1))throw new Error("Encoded message does not end in 0xBC.");var a=r-f-1,i=t.substr(0,a),t=t.substr(a,f),n=65280>>8*r-n&255;if(0!=(i.charCodeAt(0)&n))throw new Error("Bits beyond keysize not zero as expected.");for(var o=p.generate(t,a),s="",l=0;l<a;l++)s+=String.fromCharCode(i.charCodeAt(l)^o.charCodeAt(l));var s=String.fromCharCode(s.charCodeAt(0)&~n)+s.substr(1),u=r-f-c-2;for(l=0;l<u;l++)if(0!==s.charCodeAt(l))throw new Error("Leftmost octets not zero as expected");if(1!==s.charCodeAt(u))throw new Error("Inconsistent PSS signature, 0x01 marker not found");n=s.substr(-c),r=new g.util.ByteBuffer;return r.fillWithByte(0,8),r.putBytes(e),r.putBytes(n),d.start(),d.update(r.getBytes()),t===d.digest().getBytes()}};return t}}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/pss",["require","module","./random","./util"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.pss)return e.pss;e.defined.pss=!0;for(var r=0;r<t.length;++r)t[r](e);return e.pss}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(v){function c(e,t){"string"==typeof t&&(t={shortName:t});for(var r,n=null,a=0;null===n&&a<e.attributes.length;++a)r=e.attributes[a],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}function h(e){for(var t=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]),r=e.attributes,n=0;n<r.length;++n){var a,i=(a=r[n]).value,o=y.Type.PRINTABLESTRING;"valueTagClass"in a&&((o=a.valueTagClass)===y.Type.UTF8&&(i=v.util.encodeUtf8(i))),i=y.create(y.Class.UNIVERSAL,y.Type.SET,!0,[y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(a.type).getBytes()),y.create(y.Class.UNIVERSAL,o,!1,i)])]),t.value.push(i)}return t}function d(e){for(var t,r,n=0;n<e.length;++n){if(void 0===(t=e[n]).name&&(t.type&&t.type in C.oids?t.name=C.oids[t.type]:t.shortName&&t.shortName in u&&(t.name=C.oids[u[t.shortName]])),void 0===t.type){if(!(t.name&&t.name in C.oids))throw(r=new Error("Attribute type not specified.")).attribute=t,r;t.type=C.oids[t.name]}if(void 0===t.shortName&&t.name&&t.name in u&&(t.shortName=u[t.name]),t.type===g.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=y.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var a=0;a<t.extensions.length;++a)t.value.push(C.certificateExtensionToAsn1(i(t.extensions[a])))}if(void 0===t.value)throw(r=new Error("Attribute value not specified.")).attribute=t,r}}function i(e,t){if(t=t||{},void 0===e.name&&e.id&&e.id in C.oids&&(e.name=C.oids[e.id]),void 0===e.id){if(!(e.name&&e.name in C.oids))throw(f=new Error("Extension ID not specified.")).extension=e,f;e.id=C.oids[e.name]}if(void 0!==e.value)return e;if("keyUsage"===e.name){var r=0,n=0,a=0;e.digitalSignature&&(n|=128,r=7),e.nonRepudiation&&(n|=64,r=6),e.keyEncipherment&&(n|=32,r=5),e.dataEncipherment&&(n|=16,r=4),e.keyAgreement&&(n|=8,r=3),e.keyCertSign&&(n|=4,r=2),e.cRLSign&&(n|=2,r=1),e.encipherOnly&&(n|=1,r=0),e.decipherOnly&&(a|=128,r=7);var i=String.fromCharCode(r);0!==a?i+=String.fromCharCode(n)+String.fromCharCode(a):0!==n&&(i+=String.fromCharCode(n)),e.value=y.create(y.Class.UNIVERSAL,y.Type.BITSTRING,!1,i)}else if("basicConstraints"===e.name)e.value=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(y.create(y.Class.UNIVERSAL,y.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]);var o,s=e.value.value;for(o in e)!0===e[o]&&(o in g?s.push(y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(g[o]).getBytes())):-1!==o.indexOf(".")&&s.push(y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(o).getBytes())))}else if("nsCertType"===e.name){r=0,n=0;e.client&&(n|=128,r=7),e.server&&(n|=64,r=6),e.email&&(n|=32,r=5),e.objsign&&(n|=16,r=4),e.reserved&&(n|=8,r=3),e.sslCA&&(n|=4,r=2),e.emailCA&&(n|=2,r=1),e.objCA&&(n|=1,r=0);i=String.fromCharCode(r);0!==n&&(i+=String.fromCharCode(n)),e.value=y.create(y.Class.UNIVERSAL,y.Type.BITSTRING,!1,i)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]);for(var l=0;l<e.altNames.length;++l){i=(c=e.altNames[l]).value;if(7===c.type&&c.ip){if(null===(i=v.util.bytesFromIP(c.ip)))throw(f=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,f}else 8===c.type&&(i=c.oid?y.oidToDer(y.oidToDer(c.oid)):y.oidToDer(i));e.value.value.push(y.create(y.Class.CONTEXT_SPECIFIC,c.type,!1,i))}}else if("subjectKeyIdentifier"===e.name&&t.cert){n=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=n.toHex(),e.value=y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,n.getBytes())}else if("authorityKeyIdentifier"===e.name&&t.cert){e.value=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]);var u,s=e.value.value;e.keyIdentifier&&(u=!0===e.keyIdentifier?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier,s.push(y.create(y.Class.CONTEXT_SPECIFIC,0,!1,u))),e.authorityCertIssuer&&(u=[y.create(y.Class.CONTEXT_SPECIFIC,4,!0,[h(!0===e.authorityCertIssuer?t.cert.issuer:e.authorityCertIssuer)])],s.push(y.create(y.Class.CONTEXT_SPECIFIC,1,!0,u))),e.serialNumber&&(d=v.util.hexToBytes((!0===e.serialNumber?t.cert:e).serialNumber),s.push(y.create(y.Class.CONTEXT_SPECIFIC,2,!1,d)))}else if("cRLDistributionPoints"===e.name){e.value=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]);for(var c,s=e.value.value,d=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]),p=y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[]),l=0;l<e.altNames.length;++l){i=(c=e.altNames[l]).value;if(7===c.type&&c.ip){if(null===(i=v.util.bytesFromIP(c.ip)))throw(f=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,f}else 8===c.type&&(i=c.oid?y.oidToDer(y.oidToDer(c.oid)):y.oidToDer(i));p.value.push(y.create(y.Class.CONTEXT_SPECIFIC,c.type,!1,i))}d.value.push(y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[p])),s.push(d)}if(void 0!==e.value)return e;var f;throw(f=new Error("Extension value not specified.")).extension=e,f}function r(e,t){if(e!==g["RSASSA-PSS"])return y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"");e=[];return void 0!==t.hash.algorithmOid&&e.push(y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(t.hash.algorithmOid).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&e.push(y.create(y.Class.CONTEXT_SPECIFIC,1,!0,[y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(t.mgf.algorithmOid).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(t.mgf.hash.algorithmOid).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&e.push(y.create(y.Class.CONTEXT_SPECIFIC,2,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(t.saltLength).getBytes())])),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,e)}var y=v.asn1,C=v.pki=v.pki||{},g=C.oids,u={};u.CN=g.commonName,u.commonName="CN",u.C=g.countryName,u.countryName="C",u.L=g.localityName,u.localityName="L",u.ST=g.stateOrProvinceName,u.stateOrProvinceName="ST",u.O=g.organizationName,u.organizationName="O",u.OU=g.organizationalUnitName,u.organizationalUnitName="OU",u.E=g.emailAddress,u.emailAddress="E";var e=v.pki.rsa.publicKeyValidator,p={name:"Certificate",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:y.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:y.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:y.Class.UNIVERSAL,type:y.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:y.Class.UNIVERSAL,type:y.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:y.Class.UNIVERSAL,type:y.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:y.Class.UNIVERSAL,type:y.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},e,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:y.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:y.Class.UNIVERSAL,type:y.Type.BITSTRING,constructed:!1,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:y.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:y.Class.UNIVERSAL,type:y.Type.BITSTRING,constructed:!1,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:y.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:y.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:y.Class.UNIVERSAL,type:y.Type.BITSTRING,constructed:!1,capture:"certSignature"}]},a={name:"rsapss",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:y.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:y.Class.UNIVERSAL,type:y.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:y.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:y.Class.UNIVERSAL,type:y.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:y.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:y.Class.UNIVERSAL,type:y.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:y.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:y.Class.UNIVERSAL,type:y.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},e={name:"CertificationRequestInfo",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},e,{name:"CertificationRequestInfo.attributes",tagClass:y.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:y.Class.UNIVERSAL,type:y.Type.SET,constructed:!0}]}]}]},f={name:"CertificationRequest",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[e,{name:"CertificationRequest.signatureAlgorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:y.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:y.Class.UNIVERSAL,type:y.Type.BITSTRING,constructed:!1,capture:"csrSignature"}]};C.RDNAttributesAsArray=function(e,t){for(var r,n,a=[],i=0;i<e.value.length;++i)for(var o=e.value[i],s=0;s<o.value.length;++s)r=o.value[s],(n={}).type=y.derToOid(r.value[0].value),n.value=r.value[1].value,n.valueTagClass=r.value[1].type,n.type in g&&(n.name=g[n.type],n.name in u&&(n.shortName=u[n.name])),t&&(t.update(n.type),t.update(n.value)),a.push(n);return a},C.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],a=y.derToOid(n.value[0].value),i=n.value[1].value,o=0;o<i.length;++o){var s={};if(s.type=a,s.value=i[o].value,s.valueTagClass=i[o].type,s.type in g&&(s.name=g[s.type],s.name in u&&(s.shortName=u[s.name])),s.type===g.extensionRequest){s.extensions=[];for(var l=0;l<s.value.length;++l)s.extensions.push(C.certificateExtensionFromAsn1(s.value[l]))}t.push(s)}return t};function m(e,t,r){var n={};if(e!==g["RSASSA-PSS"])return n;if(r&&(n={hash:{algorithmOid:g.sha1},mgf:{algorithmOid:g.mgf1,hash:{algorithmOid:g.sha1}},saltLength:20}),e={},r=[],y.validate(t,a,e,r))return void 0!==e.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=y.derToOid(e.hashOid)),void 0!==e.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=y.derToOid(e.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=y.derToOid(e.maskGenHashOid)),void 0!==e.saltLength&&(n.saltLength=e.saltLength.charCodeAt(0)),n;throw(n=new Error("Cannot read RSASSA-PSS parameter block.")).errors=r,n}C.certificateFromPem=function(e,t,r){var n=v.pem.decode(e)[0];if("CERTIFICATE"!==n.type&&"X509 CERTIFICATE"!==n.type&&"TRUSTED CERTIFICATE"!==n.type){e=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw e.headerType=n.type,e}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");r=y.fromDer(n.body,r);return C.certificateFromAsn1(r,t)},C.certificateToPem=function(e,t){e={type:"CERTIFICATE",body:y.toDer(C.certificateToAsn1(e)).getBytes()};return v.pem.encode(e,{maxline:t})},C.publicKeyFromPem=function(e){var t=v.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){e=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw e.headerType=t.type,e}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");t=y.fromDer(t.body);return C.publicKeyFromAsn1(t)},C.publicKeyToPem=function(e,t){e={type:"PUBLIC KEY",body:y.toDer(C.publicKeyToAsn1(e)).getBytes()};return v.pem.encode(e,{maxline:t})},C.publicKeyToRSAPublicKeyPem=function(e,t){e={type:"RSA PUBLIC KEY",body:y.toDer(C.publicKeyToRSAPublicKey(e)).getBytes()};return v.pem.encode(e,{maxline:t})},C.getPublicKeyFingerprint=function(e,t){var r,n=(t=t||{}).md||v.md.sha1.create();switch(t.type||"RSAPublicKey"){case"RSAPublicKey":r=y.toDer(C.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":r=y.toDer(C.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}n.start(),n.update(r);var a=n.digest();if("hex"===t.encoding){n=a.toHex();return t.delimiter?n.match(/.{2}/g).join(t.delimiter):n}if("binary"===t.encoding)return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return a},C.certificationRequestFromPem=function(e,t,r){var n=v.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==n.type){e=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw e.headerType=n.type,e}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");r=y.fromDer(n.body,r);return C.certificationRequestFromAsn1(r,t)},C.certificationRequestToPem=function(e,t){e={type:"CERTIFICATE REQUEST",body:y.toDer(C.certificationRequestToAsn1(e)).getBytes()};return v.pem.encode(e,{maxline:t})},C.createCertificate=function(){var u={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return u.siginfo.algorithmOid=null,u.validity={},u.validity.notBefore=new Date,u.validity.notAfter=new Date,u.issuer={},u.issuer.getField=function(e){return c(u.issuer,e)},u.issuer.addField=function(e){d([e]),u.issuer.attributes.push(e)},u.issuer.attributes=[],u.issuer.hash=null,u.subject={},u.subject.getField=function(e){return c(u.subject,e)},u.subject.addField=function(e){d([e]),u.subject.attributes.push(e)},u.subject.attributes=[],u.subject.hash=null,u.extensions=[],u.publicKey=null,u.md=null,u.setSubject=function(e,t){d(e),u.subject.attributes=e,delete u.subject.uniqueId,t&&(u.subject.uniqueId=t),u.subject.hash=null},u.setIssuer=function(e,t){d(e),u.issuer.attributes=e,delete u.issuer.uniqueId,t&&(u.issuer.uniqueId=t),u.issuer.hash=null},u.setExtensions=function(e){for(var t=0;t<e.length;++t)i(e[t],{cert:u});u.extensions=e},u.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var t,r=null,n=0;null===r&&n<u.extensions.length;++n)t=u.extensions[n],(e.id&&t.id===e.id||e.name&&t.name===e.name)&&(r=t);return r},u.sign=function(e,t){u.md=t||v.md.sha1.create();var r=g[u.md.algorithm+"WithRSAEncryption"];if(!r){t=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw t.algorithm=u.md.algorithm,t}u.signatureOid=u.siginfo.algorithmOid=r,u.tbsCertificate=C.getTBSCertificate(u);r=y.toDer(u.tbsCertificate);u.md.update(r.getBytes()),u.signature=e.sign(u.md)},u.verify=function(e){var t=!1;if(!u.issued(e)){var r=e.issuer,n=u.subject;throw(s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.")).expectedIssuer=r.attributes,s.actualIssuer=n.attributes,s}var a,i=e.md;if(null===i){if(e.signatureOid in g)switch(g[e.signatureOid]){case"sha1WithRSAEncryption":i=v.md.sha1.create();break;case"md5WithRSAEncryption":i=v.md.md5.create();break;case"sha256WithRSAEncryption":i=v.md.sha256.create();break;case"sha512WithRSAEncryption":i=v.md.sha512.create();break;case"RSASSA-PSS":i=v.md.sha256.create()}if(null===i)throw(s=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=e.signatureOid,s;n=e.tbsCertificate||C.getTBSCertificate(e),n=y.toDer(n);i.update(n.getBytes())}if(null!==i){switch(e.signatureOid){case g.sha1WithRSAEncryption:a=void 0;break;case g["RSASSA-PSS"]:var o,s,l=g[e.signatureParameters.mgf.hash.algorithmOid];if(void 0===l||void 0===v.md[l])throw(s=new Error("Unsupported MGF hash function.")).oid=e.signatureParameters.mgf.hash.algorithmOid,s.name=l,s;if(void 0===(o=g[e.signatureParameters.mgf.algorithmOid])||void 0===v.mgf[o])throw(s=new Error("Unsupported MGF function.")).oid=e.signatureParameters.mgf.algorithmOid,s.name=o,s;if(o=v.mgf[o].create(v.md[l].create()),void 0===(l=g[e.signatureParameters.hash.algorithmOid])||void 0===v.md[l])throw{message:"Unsupported RSASSA-PSS hash function.",oid:e.signatureParameters.hash.algorithmOid,name:l};a=v.pss.create(v.md[l].create(),o,e.signatureParameters.saltLength)}t=u.publicKey.verify(i.digest().getBytes(),e.signature,a)}return t},u.isIssuer=function(e){var t=!1,r=u.issuer,n=e.subject;if(r.hash&&n.hash)t=r.hash===n.hash;else if(r.attributes.length===n.attributes.length)for(var a,i,t=!0,o=0;t&&o<r.attributes.length;++o)a=r.attributes[o],i=n.attributes[o],a.type===i.type&&a.value===i.value||(t=!1);return t},u.issued=function(e){return e.isIssuer(u)},u.generateSubjectKeyIdentifier=function(){return C.getPublicKeyFingerprint(u.publicKey,{type:"RSAPublicKey"})},u.verifySubjectKeyIdentifier=function(){for(var e=g.subjectKeyIdentifier,t=0;t<u.extensions.length;++t){var r=u.extensions[t];if(r.id===e){var n=u.generateSubjectKeyIdentifier().getBytes();return v.util.hexToBytes(r.subjectKeyIdentifier)===n}}return!1},u},C.certificateFromAsn1=function(e,t){var r={},n=[];if(!y.validate(e,p,r,n))throw(s=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.")).errors=n,s;if("string"!=typeof r.certSignature){for(var a="\0",i=0;i<r.certSignature.length;++i)a+=y.toDer(r.certSignature[i]).getBytes();r.certSignature=a}e=y.derToOid(r.publicKeyOid);if(e!==C.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=C.createCertificate();o.version=r.certVersion?r.certVersion.charCodeAt(0):0;n=v.util.createBuffer(r.certSerialNumber);o.serialNumber=n.toHex(),o.signatureOid=v.asn1.derToOid(r.certSignatureOid),o.signatureParameters=m(o.signatureOid,r.certSignatureParams,!0),o.siginfo.algorithmOid=v.asn1.derToOid(r.certinfoSignatureOid),o.siginfo.parameters=m(o.siginfo.algorithmOid,r.certinfoSignatureParams,!1);n=v.util.createBuffer(r.certSignature);++n.read,o.signature=n.getBytes();var s,n=[];if(void 0!==r.certValidity1UTCTime&&n.push(y.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&n.push(y.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&n.push(y.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&n.push(y.generalizedTimeToDate(r.certValidity4GeneralizedTime)),2<n.length)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(n.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(o.validity.notBefore=n[0],o.validity.notAfter=n[1],o.tbsCertificate=r.tbsCertificate,t){if(o.md=null,o.signatureOid in g)switch(e=g[o.signatureOid]){case"sha1WithRSAEncryption":o.md=v.md.sha1.create();break;case"md5WithRSAEncryption":o.md=v.md.md5.create();break;case"sha256WithRSAEncryption":o.md=v.md.sha256.create();break;case"sha512WithRSAEncryption":o.md=v.md.sha512.create();break;case"RSASSA-PSS":o.md=v.md.sha256.create()}if(null===o.md)throw(s=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=o.signatureOid,s;var l=y.toDer(o.tbsCertificate);o.md.update(l.getBytes())}l=v.md.sha1.create();o.issuer.getField=function(e){return c(o.issuer,e)},o.issuer.addField=function(e){d([e]),o.issuer.attributes.push(e)},o.issuer.attributes=C.RDNAttributesAsArray(r.certIssuer,l),r.certIssuerUniqueId&&(o.issuer.uniqueId=r.certIssuerUniqueId),o.issuer.hash=l.digest().toHex();l=v.md.sha1.create();return o.subject.getField=function(e){return c(o.subject,e)},o.subject.addField=function(e){d([e]),o.subject.attributes.push(e)},o.subject.attributes=C.RDNAttributesAsArray(r.certSubject,l),r.certSubjectUniqueId&&(o.subject.uniqueId=r.certSubjectUniqueId),o.subject.hash=l.digest().toHex(),r.certExtensions?o.extensions=C.certificateExtensionsFromAsn1(r.certExtensions):o.extensions=[],o.publicKey=C.publicKeyFromAsn1(r.subjectPublicKeyInfo),o},C.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],a=0;a<n.value.length;++a)t.push(C.certificateExtensionFromAsn1(n.value[a]));return t},C.certificateExtensionFromAsn1=function(e){var t={};if(t.id=y.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===y.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in g)if(t.name=g[t.id],"keyUsage"===t.name){var r=0,n=0;1<(a=y.fromDer(t.value)).value.length&&(r=a.value.charCodeAt(1),n=2<a.value.length?a.value.charCodeAt(2):0),t.digitalSignature=128==(128&r),t.nonRepudiation=64==(64&r),t.keyEncipherment=32==(32&r),t.dataEncipherment=16==(16&r),t.keyAgreement=8==(8&r),t.keyCertSign=4==(4&r),t.cRLSign=2==(2&r),t.encipherOnly=1==(1&r),t.decipherOnly=128==(128&n)}else if("basicConstraints"===t.name){0<(a=y.fromDer(t.value)).value.length&&a.value[0].type===y.Type.BOOLEAN?t.cA=0!==a.value[0].value.charCodeAt(0):t.cA=!1;n=null;0<a.value.length&&a.value[0].type===y.Type.INTEGER?n=a.value[0].value:1<a.value.length&&(n=a.value[1].value),null!==n&&(t.pathLenConstraint=y.derToInteger(n))}else if("extKeyUsage"===t.name)for(var a=y.fromDer(t.value),i=0;i<a.value.length;++i){var o=y.derToOid(a.value[i].value);o in g?t[g[o]]=!0:t[o]=!0}else if("nsCertType"===t.name){r=0;1<(a=y.fromDer(t.value)).value.length&&(r=a.value.charCodeAt(1)),t.client=128==(128&r),t.server=64==(64&r),t.email=32==(32&r),t.objsign=16==(16&r),t.reserved=8==(8&r),t.sslCA=4==(4&r),t.emailCA=2==(2&r),t.objCA=1==(1&r)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.altNames=[];for(var a=y.fromDer(t.value),s=0;s<a.value.length;++s){var l,u={type:(l=a.value[s]).type,value:l.value};switch(t.altNames.push(u),l.type){case 1:case 2:case 6:break;case 7:u.ip=v.util.bytesToIP(l.value);break;case 8:u.oid=y.derToOid(l.value)}}}else"subjectKeyIdentifier"===t.name&&(a=y.fromDer(t.value),t.subjectKeyIdentifier=v.util.bytesToHex(a.value));return t},C.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!y.validate(e,f,r,n))throw(s=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.")).errors=n,s;if("string"!=typeof r.csrSignature){for(var a="\0",i=0;i<r.csrSignature.length;++i)a+=y.toDer(r.csrSignature[i]).getBytes();r.csrSignature=a}e=y.derToOid(r.publicKeyOid);if(e!==C.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=C.createCertificationRequest();o.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,o.signatureOid=v.asn1.derToOid(r.csrSignatureOid),o.signatureParameters=m(o.signatureOid,r.csrSignatureParams,!0),o.siginfo.algorithmOid=v.asn1.derToOid(r.csrSignatureOid),o.siginfo.parameters=m(o.siginfo.algorithmOid,r.csrSignatureParams,!1);var s,n=v.util.createBuffer(r.csrSignature);if(++n.read,o.signature=n.getBytes(),o.certificationRequestInfo=r.certificationRequestInfo,t){if(o.md=null,o.signatureOid in g)switch(e=g[o.signatureOid]){case"sha1WithRSAEncryption":o.md=v.md.sha1.create();break;case"md5WithRSAEncryption":o.md=v.md.md5.create();break;case"sha256WithRSAEncryption":o.md=v.md.sha256.create();break;case"sha512WithRSAEncryption":o.md=v.md.sha512.create();break;case"RSASSA-PSS":o.md=v.md.sha256.create()}if(null===o.md)throw(s=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=o.signatureOid,s;var l=y.toDer(o.certificationRequestInfo);o.md.update(l.getBytes())}l=v.md.sha1.create();return o.subject.getField=function(e){return c(o.subject,e)},o.subject.addField=function(e){d([e]),o.subject.attributes.push(e)},o.subject.attributes=C.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),o.subject.hash=l.digest().toHex(),o.publicKey=C.publicKeyFromAsn1(r.subjectPublicKeyInfo),o.getAttribute=function(e){return c(o,e)},o.addAttribute=function(e){d([e]),o.attributes.push(e)},o.attributes=C.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),o},C.createCertificationRequest=function(){var s={version:0,signatureOid:null,signature:null,siginfo:{}};return s.siginfo.algorithmOid=null,s.subject={},s.subject.getField=function(e){return c(s.subject,e)},s.subject.addField=function(e){d([e]),s.subject.attributes.push(e)},s.subject.attributes=[],s.subject.hash=null,s.publicKey=null,s.attributes=[],s.getAttribute=function(e){return c(s,e)},s.addAttribute=function(e){d([e]),s.attributes.push(e)},s.md=null,s.setSubject=function(e){d(e),s.subject.attributes=e,s.subject.hash=null},s.setAttributes=function(e){d(e),s.attributes=e},s.sign=function(e,t){s.md=t||v.md.sha1.create();var r=g[s.md.algorithm+"WithRSAEncryption"];if(!r){t=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw t.algorithm=s.md.algorithm,t}s.signatureOid=s.siginfo.algorithmOid=r,s.certificationRequestInfo=C.getCertificationRequestInfo(s);r=y.toDer(s.certificationRequestInfo);s.md.update(r.getBytes()),s.signature=e.sign(s.md)},s.verify=function(){var e,t=!1,r=s.md;if(null===r){if(s.signatureOid in g)switch(g[s.signatureOid]){case"sha1WithRSAEncryption":r=v.md.sha1.create();break;case"md5WithRSAEncryption":r=v.md.md5.create();break;case"sha256WithRSAEncryption":r=v.md.sha256.create();break;case"sha512WithRSAEncryption":r=v.md.sha512.create();break;case"RSASSA-PSS":r=v.md.sha256.create()}if(null===r)throw(i=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=s.signatureOid,i;var n=s.certificationRequestInfo||C.getCertificationRequestInfo(s),n=y.toDer(n);r.update(n.getBytes())}if(null!==r){switch(s.signatureOid){case g.sha1WithRSAEncryption:break;case g["RSASSA-PSS"]:var a,i,o=g[s.signatureParameters.mgf.hash.algorithmOid];if(void 0===o||void 0===v.md[o])throw(i=new Error("Unsupported MGF hash function.")).oid=s.signatureParameters.mgf.hash.algorithmOid,i.name=o,i;if(void 0===(a=g[s.signatureParameters.mgf.algorithmOid])||void 0===v.mgf[a])throw(i=new Error("Unsupported MGF function.")).oid=s.signatureParameters.mgf.algorithmOid,i.name=a,i;if(a=v.mgf[a].create(v.md[o].create()),void 0===(o=g[s.signatureParameters.hash.algorithmOid])||void 0===v.md[o])throw(i=new Error("Unsupported RSASSA-PSS hash function.")).oid=s.signatureParameters.hash.algorithmOid,i.name=o,i;e=v.pss.create(v.md[o].create(),a,s.signatureParameters.saltLength)}t=s.publicKey.verify(r.digest().getBytes(),s.signature,e)}return t},s},C.getTBSCertificate=function(e){var t=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(e.version).getBytes())]),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,v.util.hexToBytes(e.serialNumber)),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.siginfo.algorithmOid).getBytes()),r(e.siginfo.algorithmOid,e.siginfo.parameters)]),h(e.issuer),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.UTCTIME,!1,y.dateToUtcTime(e.validity.notBefore)),y.create(y.Class.UNIVERSAL,y.Type.UTCTIME,!1,y.dateToUtcTime(e.validity.notAfter))]),h(e.subject),C.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&t.value.push(y.create(y.Class.CONTEXT_SPECIFIC,1,!0,[y.create(y.Class.UNIVERSAL,y.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&t.value.push(y.create(y.Class.CONTEXT_SPECIFIC,2,!0,[y.create(y.Class.UNIVERSAL,y.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),0<e.extensions.length&&t.value.push(C.certificateExtensionsToAsn1(e.extensions)),t},C.getCertificationRequestInfo=function(e){return y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(e.version).getBytes()),h(e.subject),C.publicKeyToAsn1(e.publicKey),function(e){var t=y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var r=e.attributes,n=0;n<r.length;++n){var a=r[n],i=a.value,o=y.Type.UTF8;(o="valueTagClass"in a?a.valueTagClass:o)===y.Type.UTF8&&(i=v.util.encodeUtf8(i));var s=!1;"valueConstructed"in a&&(s=a.valueConstructed);i=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(a.type).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SET,!0,[y.create(y.Class.UNIVERSAL,o,s,i)])]);t.value.push(i)}return t}(e)])},C.distinguishedNameToAsn1=h,C.certificateToAsn1=function(e){var t=e.tbsCertificate||C.getTBSCertificate(e);return y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[t,y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.signatureOid).getBytes()),r(e.signatureOid,e.signatureParameters)]),y.create(y.Class.UNIVERSAL,y.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},C.certificateExtensionsToAsn1=function(e){var t=y.create(y.Class.CONTEXT_SPECIFIC,3,!0,[]),r=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(C.certificateExtensionToAsn1(e[n]));return t},C.certificateExtensionToAsn1=function(e){var t=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]);t.value.push(y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.id).getBytes())),e.critical&&t.value.push(y.create(y.Class.UNIVERSAL,y.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!=typeof e.value&&(r=y.toDer(r).getBytes()),t.value.push(y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,r)),t},C.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||C.getCertificationRequestInfo(e);return y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[t,y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.signatureOid).getBytes()),r(e.signatureOid,e.signatureParameters)]),y.create(y.Class.UNIVERSAL,y.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},C.createCaStore=function(e){function a(e){var t;return e.hash||(t=v.md.sha1.create(),e.attributes=C.RDNAttributesAsArray(h(e),t),e.hash=t.digest().toHex()),r.certs[e.hash]||null}var r={certs:{},getIssuer:function(e){return a(e.issuer)},addCertificate:function(e){var t;(e="string"==typeof e?v.pki.certificateFromPem(e):e).subject.hash||(t=v.md.sha1.create(),e.subject.attributes=C.RDNAttributesAsArray(h(e.subject),t),e.subject.hash=t.digest().toHex()),e.subject.hash in r.certs?(t=r.certs[e.subject.hash],(t=!v.util.isArray(t)?[t]:t).push(e)):r.certs[e.subject.hash]=e},hasCertificate:function(e){var t=a(e.subject);if(!t)return!1;v.util.isArray(t)||(t=[t]);for(var r=y.toDer(C.certificateToAsn1(e)).getBytes(),n=0;n<t.length;++n)if(r===y.toDer(C.certificateToAsn1(t[n])).getBytes())return!0;return!1}};if(e)for(var t=0;t<e.length;++t){var n=e[t];r.addCertificate(n)}return r},C.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},C.verifyCertificateChain=function(e,t,r){var n=(t=t.slice(0)).slice(0),a=new Date,i=!0,o=null,s=0;do{var l=t.shift(),u=null,c=!1;if(null===(o=a<l.validity.notBefore||a>l.validity.notAfter?{message:"Certificate is not valid yet or has expired.",error:C.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:a}:o)){if(null===(u=t[0]||e.getIssuer(l))&&l.isIssuer(l)&&(c=!0,u=l),u){var d=u;v.util.isArray(d)||(d=[d]);for(var p=!1;!p&&0<d.length;){u=d.shift();try{p=u.verify(l)}catch(e){}}p||(o={message:"Certificate signature is invalid.",error:C.certificateError.bad_certificate})}null!==o||u&&!c||e.hasCertificate(l)||(o={message:"Certificate is not trusted.",error:C.certificateError.unknown_ca})}if(null===(o=null===o&&u&&!l.isIssuer(u)?{message:"Certificate issuer is invalid.",error:C.certificateError.bad_certificate}:o))for(var f={keyUsage:!0,basicConstraints:!0},h=0;null===o&&h<l.extensions.length;++h){var y=l.extensions[h];!y.critical||y.name in f||(o={message:"Certificate has an unsupported critical extension.",error:C.certificateError.unsupported_certificate})}null!==o||i&&(0!==t.length||u&&!c)||(m=l.getExtension("basicConstraints"),null===(o=null===(o=!(null===(g=l.getExtension("keyUsage"))||g.keyCertSign&&null!==m)?{message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:C.certificateError.bad_certificate}:o)&&null!==m&&!m.cA?{message:"Certificate basicConstraints indicates the certificate is not a CA.",error:C.certificateError.bad_certificate}:o)&&null!==g&&"pathLenConstraint"in m&&s-1>m.pathLenConstraint&&(o={message:"Certificate basicConstraints pathLenConstraint violated.",error:C.certificateError.bad_certificate}));var g=null===o||o.error,m=r?r(g,s,n):g;if(!0!==m)throw!0===g&&(o={message:"The application rejected the certificate.",error:C.certificateError.bad_certificate}),!m&&0!==m||("object"!=typeof m||v.util.isArray(m)?"string"==typeof m&&(o.error=m):(m.message&&(o.message=m.message),m.error&&(o.error=m.error))),o}while(o=null,i=!1,++s,0<t.length);return!0}}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/x509",["require","module","./aes","./asn1","./des","./md","./mgf","./oids","./pem","./pss","./rsa","./util"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.x509)return e.x509;e.defined.x509=!0;for(var r=0;r<t.length;++r)t[r](e);return e.pki}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(g){function u(e,t,r,n){for(var a=[],i=0;i<e.length;i++)for(var o=0;o<e[i].safeBags.length;o++){var s=e[i].safeBags[o];void 0!==n&&s.type!==n||(null===t||void 0!==s.attributes[t]&&0<=s.attributes[t].indexOf(r))&&a.push(s)}return a}function p(e){if(e.composed||e.constructed){for(var t=g.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function c(e,t,r,n){if((t=m.fromDer(t,r)).tagClass!==m.Class.UNIVERSAL||t.type!==m.Type.SEQUENCE||!0!==t.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var a=0;a<t.value.length;a++){var i=t.value[a],o={},s=[];if(!m.validate(i,f,o,s))throw(l=new Error("Cannot read ContentInfo.")).errors=s,l;var l,u={encrypted:!1},c=null,d=o.content.value[0];switch(m.derToOid(o.contentType)){case v.oids.data:if(d.tagClass!==m.Class.UNIVERSAL||d.type!==m.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");c=p(d).value;break;case v.oids.encryptedData:c=function(e,t){var r={},n=[];if(!m.validate(e,g.pkcs7.asn1.encryptedDataValidator,r,n))throw(a=new Error("Cannot read EncryptedContentInfo.")).errors=n,a;n=m.derToOid(r.contentType);if(n!==v.oids.data){var a;throw(a=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=n,a}n=m.derToOid(r.encAlgorithm);t=v.pbe.getCipher(n,r.encParameter,t),r=p(r.encryptedContentAsn1),r=g.util.createBuffer(r.value);if(t.update(r),!t.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return t.output.getBytes()}(d,n),u.encrypted=!0;break;default:throw(l=new Error("Unsupported PKCS#12 contentType.")).contentType=m.derToOid(o.contentType),l}u.safeBags=function(e,r,t){if(!r&&0===e.length)return[];if((e=m.fromDer(e,r)).tagClass!==m.Class.UNIVERSAL||e.type!==m.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],a=0;a<e.value.length;a++){var i=e.value[a],o={},s=[];if(!m.validate(i,h,o,s))throw(d=new Error("Cannot read SafeBag.")).errors=s,d;var l={type:m.derToOid(o.bagId),attributes:function(e){var t={};if(void 0!==e)for(var r=0;r<e.length;++r){var n={},a=[];if(!m.validate(e[r],y,n,a)){var i=new Error("Cannot read PKCS#12 BagAttribute.");throw i.errors=a,i}var o=m.derToOid(n.oid);if(void 0!==v.oids[o]){t[v.oids[o]]=[];for(var s=0;s<n.values.length;++s)t[v.oids[o]].push(n.values[s].value)}}return t}(o.bagAttributes)};n.push(l);var u,c,d,p=o.bagValue.value[0];switch(l.type){case v.oids.pkcs8ShroudedKeyBag:if(null===(p=v.decryptPrivateKeyInfo(p,t)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case v.oids.keyBag:try{l.key=v.privateKeyFromAsn1(p)}catch(e){l.key=null,l.asn1=p}continue;case v.oids.certBag:u=E,c=function(){if(m.derToOid(o.certId)!==v.oids.x509Certificate){var t=new Error("Unsupported certificate type, only X.509 supported.");throw t.oid=m.derToOid(o.certId),t}t=m.fromDer(o.cert,r);try{l.cert=v.certificateFromAsn1(t,!0)}catch(e){l.cert=null,l.asn1=t}};break;default:throw(d=new Error("Unsupported PKCS#12 SafeBag type.")).oid=l.type,d}if(void 0!==u&&!m.validate(p,u,o,s))throw(d=new Error("Cannot read PKCS#12 "+u.name)).errors=s,d;c()}return n}(c,r,n),e.safeContents.push(u)}}var m=g.asn1,v=g.pki,C=g.pkcs12=g.pkcs12||{},f={name:"ContentInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:m.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},d={name:"PFX",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"version"},f,{name:"PFX.macData",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:m.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},h={name:"SafeBag",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:m.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:m.Class.UNIVERSAL,type:m.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},y={name:"Attribute",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:m.Class.UNIVERSAL,type:m.Type.SET,constructed:!0,capture:"values"}]},E={name:"CertBag",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:m.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:m.Class.UNIVERSAL,type:m.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};C.pkcs12FromAsn1=function(e,t,r){"string"==typeof t?(r=t,t=!0):void 0===t&&(t=!0);var n={};if(!m.validate(e,d,n,[]))throw(l=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=l;var a={version:n.version.charCodeAt(0),safeContents:[],getBags:function(e){var t,r={};return"localKeyId"in e?t=e.localKeyId:"localKeyIdHex"in e&&(t=g.util.hexToBytes(e.localKeyIdHex)),void 0===t&&!("friendlyName"in e)&&"bagType"in e&&(r[e.bagType]=u(a.safeContents,null,null,e.bagType)),void 0!==t&&(r.localKeyId=u(a.safeContents,"localKeyId",t,e.bagType)),"friendlyName"in e&&(r.friendlyName=u(a.safeContents,"friendlyName",e.friendlyName,e.bagType)),r},getBagsByFriendlyName:function(e,t){return u(a.safeContents,"friendlyName",e,t)},getBagsByLocalKeyId:function(e,t){return u(a.safeContents,"localKeyId",e,t)}};if(3!==n.version.charCodeAt(0))throw(l=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=n.version.charCodeAt(0),l;if(m.derToOid(n.contentType)!==v.oids.data)throw(l=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=m.derToOid(n.contentType),l;var i=n.content.value[0];if(i.tagClass!==m.Class.UNIVERSAL||i.type!==m.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(i=p(i),n.mac){var o=null,s=0,e=m.derToOid(n.macAlgorithm);switch(e){case v.oids.sha1:o=g.md.sha1.create(),s=20;break;case v.oids.sha256:o=g.md.sha256.create(),s=32;break;case v.oids.sha384:o=g.md.sha384.create(),s=48;break;case v.oids.sha512:o=g.md.sha512.create(),s=64;break;case v.oids.md5:o=g.md.md5.create(),s=16}if(null===o)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+e);var l=new g.util.ByteBuffer(n.macSalt),e="macIterations"in n?parseInt(g.util.bytesToHex(n.macIterations),16):1,l=C.generateKey(r,l,3,e,s,o),e=g.hmac.create();if(e.start(o,l),e.update(i.value),e.getMac().getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return c(a,i.value,t,r),a},C.toPkcs12Asn1=function(e,t,r,n){(n=n||{}).saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var a,i=n.localKeyId;null!==i?i=g.util.hexToBytes(i):n.generateLocalKeyId&&(i=t?("string"==typeof(o=g.util.isArray(t)?t[0]:t)&&(o=v.certificateFromPem(o)),(f=g.md.sha1.create()).update(m.toDer(v.certificateToAsn1(o)).getBytes()),f.digest().getBytes()):g.random.getBytes(20));var o=[];null!==i&&o.push(m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(v.oids.localKeyId).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.SET,!0,[m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&o.push(m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(v.oids.friendlyName).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.SET,!0,[m.create(m.Class.UNIVERSAL,m.Type.BMPSTRING,!1,n.friendlyName)])])),0<o.length&&(a=m.create(m.Class.UNIVERSAL,m.Type.SET,!0,o));var o=[],s=[];null!==t&&(s=g.util.isArray(t)?t:[t]);for(var l=[],u=0;u<s.length;++u){"string"==typeof(t=s[u])&&(t=v.certificateFromPem(t));var c=0===u?a:void 0,d=v.certificateToAsn1(t),c=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(v.oids.certBag).getBytes()),m.create(m.Class.CONTEXT_SPECIFIC,0,!0,[m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(v.oids.x509Certificate).getBytes()),m.create(m.Class.CONTEXT_SPECIFIC,0,!0,[m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,m.toDer(d).getBytes())])])]),c]);l.push(c)}0<l.length&&(p=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,l),p=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(v.oids.data).getBytes()),m.create(m.Class.CONTEXT_SPECIFIC,0,!0,[m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,m.toDer(p).getBytes())])]),o.push(p));var p=null;null!==e&&(y=v.wrapRsaPrivateKey(v.privateKeyToAsn1(e)),p=null===r?m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(v.oids.keyBag).getBytes()),m.create(m.Class.CONTEXT_SPECIFIC,0,!0,[y]),a]):m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(v.oids.pkcs8ShroudedKeyBag).getBytes()),m.create(m.Class.CONTEXT_SPECIFIC,0,!0,[v.encryptPrivateKeyInfo(y,r,n)]),a]),y=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[p]),y=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(v.oids.data).getBytes()),m.create(m.Class.CONTEXT_SPECIFIC,0,!0,[m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,m.toDer(y).getBytes())])]),o.push(y));var f,h,y=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,o);return n.useMac&&(f=g.md.sha1.create(),o=new g.util.ByteBuffer(g.random.getBytes(n.saltSize)),h=n.count,e=C.generateKey(r,o,3,h,20),(r=g.hmac.create()).start(f,e),r.update(m.toDer(y).getBytes()),r=r.getMac(),h=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(v.oids.sha1).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,"")]),m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,r.getBytes())]),m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,o.getBytes()),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,m.integerToDer(h).getBytes())])),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,m.integerToDer(3).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(v.oids.data).getBytes()),m.create(m.Class.CONTEXT_SPECIFIC,0,!0,[m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,m.toDer(y).getBytes())])]),h])},C.generateKey=g.pbe.generatePkcs12Key}var i="pkcs12";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/pkcs12",["require","module","./asn1","./hmac","./oids","./pkcs7asn1","./pbe","./random","./rsa","./sha1","./util","./x509"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(r){var n=r.asn1,a=r.pki=r.pki||{};a.pemToDer=function(e){e=r.pem.decode(e)[0];if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return r.util.createBuffer(e.body)},a.privateKeyFromPem=function(e){var t=r.pem.decode(e)[0];if("PRIVATE KEY"!==t.type&&"RSA PRIVATE KEY"!==t.type){e=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw e.headerType=t.type,e}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");t=n.fromDer(t.body);return a.privateKeyFromAsn1(t)},a.privateKeyToPem=function(e,t){e={type:"RSA PRIVATE KEY",body:n.toDer(a.privateKeyToAsn1(e)).getBytes()};return r.pem.encode(e,{maxline:t})},a.privateKeyInfoToPem=function(e,t){e={type:"PRIVATE KEY",body:n.toDer(e).getBytes()};return r.pem.encode(e,{maxline:t})}}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/pki",["require","module","./asn1","./oids","./pbe","./pem","./pbkdf2","./pkcs12","./pss","./rsa","./util","./x509"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.pki)return e.pki;e.defined.pki=!0;for(var r=0;r<t.length;++r)t[r](e);return e.pki}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(y){function s(e,t,r,n){var a=y.util.createBuffer(),i=e.length>>1,o=i+(1&e.length),s=e.substr(0,o),o=e.substr(i,o),l=y.util.createBuffer(),u=y.hmac.create();r=t+r;var c=Math.ceil(n/16),d=Math.ceil(n/20);u.start("MD5",s);var p=y.util.createBuffer();l.putBytes(r);for(var f=0;f<c;++f)u.start(null,null),u.update(l.getBytes()),l.putBuffer(u.digest()),u.start(null,null),u.update(l.bytes()+r),p.putBuffer(u.digest());u.start("SHA1",o);var h=y.util.createBuffer();for(l.clear(),l.putBytes(r),f=0;f<d;++f)u.start(null,null),u.update(l.getBytes()),l.putBuffer(u.digest()),u.start(null,null),u.update(l.bytes()+r),h.putBuffer(u.digest());return a.putBytes(y.util.xorBytes(p.getBytes(),h.getBytes(),n)),a}function a(e,t,r){var n=!1;try{var a=e.deflate(t.fragment.getBytes());t.fragment=y.util.createBuffer(a),t.length=a.length,n=!0}catch(e){}return n}function i(e,t,r){var n=!1;try{var a=e.inflate(t.fragment.getBytes());t.fragment=y.util.createBuffer(a),t.length=a.length,n=!0}catch(e){}return n}function d(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32()}return y.util.createBuffer(e.getBytes(r))}function p(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)}var f={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};f.SupportedVersions=[f.Versions.TLS_1_1,f.Versions.TLS_1_0],f.Version=f.SupportedVersions[0],f.MaxFragment=15360,f.ConnectionEnd={server:0,client:1},f.PRFAlgorithm={tls_prf_sha256:0},f.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},f.CipherType={stream:0,block:1,aead:2},f.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},f.CompressionMethod={none:0,deflate:1},f.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},f.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},f.Alert={},f.Alert.Level={warning:1,fatal:2},f.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},f.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},f.CipherSuites={},f.getCipherSuite=function(e){var t,r=null;for(t in f.CipherSuites){var n=f.CipherSuites[t];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){r=n;break}}return r},f.handleUnexpected=function(e,t){!e.open&&e.entity===f.ConnectionEnd.client||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.unexpected_message}})},f.handleHelloRequest=function(e,t,r){!e.handshaking&&0<e.handshakes&&(f.queue(e,f.createAlert(e,{level:f.Alert.Level.warning,description:f.Alert.Description.no_renegotiation})),f.flush(e)),e.process()},f.parseHelloMessage=function(e,t,r){var n=null,a=e.entity===f.ConnectionEnd.client;if(r<38)e.error(e,{message:a?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.illegal_parameter}});else{var i=t.fragment,t=i.length(),n={version:{major:i.getByte(),minor:i.getByte()},random:y.util.createBuffer(i.getBytes(32)),session_id:d(i,1),extensions:[]};if(a?(n.cipher_suite=i.getBytes(2),n.compression_method=i.getByte()):(n.cipher_suites=d(i,2),n.compression_methods=d(i,1)),0<(t=r-(t-i.length()))){for(var o=d(i,2);0<o.length();)n.extensions.push({type:[o.getByte(),o.getByte()],data:d(o,2)});if(!a)for(var s=0;s<n.extensions.length;++s){var l=n.extensions[s];if(0===l.type[0]&&0===l.type[1])for(var u=d(l.data,2);0<u.length();){if(0!==u.getByte())break;e.session.extensions.server_name.serverNameList.push(d(u,2).getBytes())}}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.protocol_version}});if(a)e.session.cipherSuite=f.getCipherSuite(n.cipher_suite);else for(var c=y.util.createBuffer(n.cipher_suites.bytes());0<c.length()&&(e.session.cipherSuite=f.getCipherSuite(c.getBytes(2)),null===e.session.cipherSuite););if(null===e.session.cipherSuite)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.handshake_failure},cipherSuite:y.util.bytesToHex(n.cipher_suite)});e.session.compressionMethod=a?n.compression_method:f.CompressionMethod.none}return n},f.createSecurityParameters=function(e,t){var r=e.entity===f.ConnectionEnd.client,n=t.random.bytes(),t=r?e.session.sp.client_random:n,n=r?n:f.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:f.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:t,server_random:n}},f.handleServerHello=function(e,t,r){t=f.parseHelloMessage(e,t,r);if(!e.fail){if(!(t.version.minor<=e.version.minor))return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.protocol_version}});e.version.minor=t.version.minor,e.session.version=e.version;r=t.session_id.bytes();0<r.length&&r===e.session.id?(e.expect=c,e.session.resuming=!0,e.session.sp.server_random=t.random.bytes()):(e.expect=n,e.session.resuming=!1,f.createSecurityParameters(e,t)),e.session.id=r,e.process()}},f.handleClientHello=function(e,t,r){var n=f.parseHelloMessage(e,t,r);if(!e.fail){t=n.session_id.bytes(),r=null;if(e.sessionCache&&(null===(r=e.sessionCache.getSession(t))?t="":(r.version.major!==n.version.major||r.version.minor>n.version.minor)&&(r=null,t="")),0===t.length&&(t=y.random.getBytes(32)),e.session.id=t,e.session.clientHelloVersion=n.version,e.session.sp={},r)e.version=e.session.version=r.version,e.session.sp=r.sp;else{for(var a,i=1;i<f.SupportedVersions.length&&!((a=f.SupportedVersions[i]).minor<=n.version.minor);++i);e.version={major:a.major,minor:a.minor},e.session.version=e.version}null!==r?(e.expect=E,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()):(e.expect=!1!==e.verifyClient?m:v,e.session.resuming=!1,f.createSecurityParameters(e,n)),e.open=!0,f.queue(e,f.createRecord(e,{type:f.ContentType.handshake,data:f.createServerHello(e)})),e.session.resuming?(f.queue(e,f.createRecord(e,{type:f.ContentType.change_cipher_spec,data:f.createChangeCipherSpec()})),e.state.pending=f.createConnectionState(e),e.state.current.write=e.state.pending.write,f.queue(e,f.createRecord(e,{type:f.ContentType.handshake,data:f.createFinished(e)}))):(f.queue(e,f.createRecord(e,{type:f.ContentType.handshake,data:f.createCertificate(e)})),e.fail||(f.queue(e,f.createRecord(e,{type:f.ContentType.handshake,data:f.createServerKeyExchange(e)})),!1!==e.verifyClient&&f.queue(e,f.createRecord(e,{type:f.ContentType.handshake,data:f.createCertificateRequest(e)})),f.queue(e,f.createRecord(e,{type:f.ContentType.handshake,data:f.createServerHelloDone(e)})))),f.flush(e),e.process()}},f.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.illegal_parameter}});var n,a,e=e.fragment,i={certificate_list:d(e,3)},o=[];try{for(;0<i.certificate_list.length();)n=d(i.certificate_list,3),a=y.asn1.fromDer(n),n=y.pki.certificateFromAsn1(a,!0),o.push(n)}catch(e){return t.error(t,{message:"Could not parse certificate list.",cause:e,send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.bad_certificate}})}e=t.entity===f.ConnectionEnd.client;!e&&!0!==t.verifyClient||0!==o.length?0===o.length?t.expect=e?l:v:(e?t.session.serverCertificate=o[0]:t.session.clientCertificate=o[0],f.verifyCertificateChain(t,o)&&(t.expect=e?l:v)):t.error(t,{message:e?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.illegal_parameter}}),t.process()},f.handleServerKeyExchange=function(e,t,r){if(0<r)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.unsupported_certificate}});e.expect=o,e.process()},f.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.unsupported_certificate}});r=e.fragment,e={enc_pre_master_secret:d(r,2).getBytes()},r=null;if(t.getPrivateKey)try{r=t.getPrivateKey(t,t.session.serverCertificate),r=y.pki.privateKeyFromPem(r)}catch(e){t.error(t,{message:"Could not get private key.",cause:e,send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.internal_error}})}if(null===r)return t.error(t,{message:"No private key set.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.internal_error}});try{var n=t.session.sp;n.pre_master_secret=r.decrypt(e.enc_pre_master_secret);var a=t.session.clientHelloVersion;if(a.major!==n.pre_master_secret.charCodeAt(0)||a.minor!==n.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(e){n.pre_master_secret=y.random.getBytes(48)}t.expect=E,null!==t.session.clientCertificate&&(t.expect=C),t.process()},f.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.illegal_parameter}});t=t.fragment,t={certificate_types:d(t,1),certificate_authorities:d(t,2)};e.session.certificateRequest=t,e.expect=u,e.process()},f.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;r=n.bytes();n.read+=4;e={signature:d(n,2).getBytes()},n=y.util.createBuffer();n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest()),n=n.getBytes();try{if(!t.session.clientCertificate.publicKey.verify(n,e.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(r),t.session.sha1.update(r)}catch(e){return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.handshake_failure}})}t.expect=E,t.process()},f.handleServerHelloDone=function(e,t,r){if(0<r)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.record_overflow}});if(null===e.serverCertificate){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.insufficient_security}},r=e.verify(e,n.alert.description,0,[]);if(!0!==r)return!r&&0!==r||("object"!=typeof r||y.util.isArray(r)?"number"==typeof r&&(n.alert.description=r):(r.message&&(n.message=r.message),r.alert&&(n.alert.description=r.alert))),e.error(e,n)}null!==e.session.certificateRequest&&(t=f.createRecord(e,{type:f.ContentType.handshake,data:f.createCertificate(e)}),f.queue(e,t)),t=f.createRecord(e,{type:f.ContentType.handshake,data:f.createClientKeyExchange(e)}),f.queue(e,t),e.expect=g;t=function(e,t){null!==e.session.certificateRequest&&null!==e.session.clientCertificate&&f.queue(e,f.createRecord(e,{type:f.ContentType.handshake,data:f.createCertificateVerify(e,t)})),f.queue(e,f.createRecord(e,{type:f.ContentType.change_cipher_spec,data:f.createChangeCipherSpec()})),e.state.pending=f.createConnectionState(e),e.state.current.write=e.state.pending.write,f.queue(e,f.createRecord(e,{type:f.ContentType.handshake,data:f.createFinished(e)})),e.expect=c,f.flush(e),e.process()};if(null===e.session.certificateRequest||null===e.session.clientCertificate)return t(e,null);f.getClientSignature(e,t)},f.handleChangeCipherSpec=function(e,t){if(1!==t.fragment.getByte())return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.illegal_parameter}});t=e.entity===f.ConnectionEnd.client;(e.session.resuming&&t||!e.session.resuming&&!t)&&(e.state.pending=f.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&t||e.session.resuming&&!t)&&(e.state.pending=null),e.expect=t?r:S,e.process()},f.handleFinished=function(e,t,r){var n=t.fragment;n.read-=4;var a=n.bytes();n.read+=4;var i=t.fragment.getBytes();(n=y.util.createBuffer()).putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var o=e.entity===f.ConnectionEnd.client,t=e.session.sp;if((n=s(t.master_secret,o?"server finished":"client finished",n.getBytes(),12)).getBytes()!==i)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.decrypt_error}});e.session.md5.update(a),e.session.sha1.update(a),(e.session.resuming&&o||!e.session.resuming&&!o)&&(f.queue(e,f.createRecord(e,{type:f.ContentType.change_cipher_spec,data:f.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,f.queue(e,f.createRecord(e,{type:f.ContentType.handshake,data:f.createFinished(e)}))),e.expect=o?h:T,e.handshaking=!1,++e.handshakes,e.peerCertificate=o?e.session.serverCertificate:e.session.clientCertificate,f.flush(e),e.isConnected=!0,e.connected(e),e.process()},f.handleAlert=function(e,t){var r,t=t.fragment,t={level:t.getByte(),description:t.getByte()};switch(t.description){case f.Alert.Description.close_notify:r="Connection closed.";break;case f.Alert.Description.unexpected_message:r="Unexpected message.";break;case f.Alert.Description.bad_record_mac:r="Bad record MAC.";break;case f.Alert.Description.decryption_failed:r="Decryption failed.";break;case f.Alert.Description.record_overflow:r="Record overflow.";break;case f.Alert.Description.decompression_failure:r="Decompression failed.";break;case f.Alert.Description.handshake_failure:r="Handshake failure.";break;case f.Alert.Description.bad_certificate:r="Bad certificate.";break;case f.Alert.Description.unsupported_certificate:r="Unsupported certificate.";break;case f.Alert.Description.certificate_revoked:r="Certificate revoked.";break;case f.Alert.Description.certificate_expired:r="Certificate expired.";break;case f.Alert.Description.certificate_unknown:r="Certificate unknown.";break;case f.Alert.Description.illegal_parameter:r="Illegal parameter.";break;case f.Alert.Description.unknown_ca:r="Unknown certificate authority.";break;case f.Alert.Description.access_denied:r="Access denied.";break;case f.Alert.Description.decode_error:r="Decode error.";break;case f.Alert.Description.decrypt_error:r="Decrypt error.";break;case f.Alert.Description.export_restriction:r="Export restriction.";break;case f.Alert.Description.protocol_version:r="Unsupported protocol version.";break;case f.Alert.Description.insufficient_security:r="Insufficient security.";break;case f.Alert.Description.internal_error:r="Internal error.";break;case f.Alert.Description.user_canceled:r="User canceled.";break;case f.Alert.Description.no_renegotiation:r="Renegotiation not supported.";break;default:r="Unknown error."}if(t.description===f.Alert.Description.close_notify)return e.close();e.error(e,{message:r,send:!1,origin:e.entity===f.ConnectionEnd.client?"server":"client",alert:t}),e.process()},f.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),a=r.getInt24();if(a>r.length())return(e.fragmented=t).fragment=y.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var i=r.bytes(a+4);r.read+=4,n in k[e.entity][e.expect]?(e.entity!==f.ConnectionEnd.server||e.open||e.fail||(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:y.md.md5.create(),sha1:y.md.sha1.create()}),n!==f.HandshakeType.hello_request&&n!==f.HandshakeType.certificate_verify&&n!==f.HandshakeType.finished&&(e.session.md5.update(i),e.session.sha1.update(i)),k[e.entity][e.expect][n](e,t,a)):f.handleUnexpected(e,t)},f.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},f.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),t=r.getInt16(),r=r.getBytes(t);if(n===f.HeartbeatMessageType.heartbeat_request){if(e.handshaking||t>r.length)return e.process();f.queue(e,f.createRecord(e,{type:f.ContentType.heartbeat,data:f.createHeartbeat(f.HeartbeatMessageType.heartbeat_response,r)})),f.flush(e)}else if(n===f.HeartbeatMessageType.heartbeat_response){if(r!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,y.util.createBuffer(r))}e.process()};var n=1,l=2,o=3,u=4,c=5,r=6,h=7,g=8,m=1,v=2,C=3,E=4,S=5,T=6,e=f.handleUnexpected,t=f.handleChangeCipherSpec,b=f.handleAlert,A=f.handleHandshake,I=f.handleApplicationData,_=f.handleHeartbeat,B=[];B[f.ConnectionEnd.client]=[[e,b,A,e,_],[e,b,A,e,_],[e,b,A,e,_],[e,b,A,e,_],[e,b,A,e,_],[t,b,e,e,_],[e,b,A,e,_],[e,b,A,I,_],[e,b,A,e,_]],B[f.ConnectionEnd.server]=[[e,b,A,e,_],[e,b,A,e,_],[e,b,A,e,_],[e,b,A,e,_],[t,b,e,e,_],[e,b,A,e,_],[e,b,A,I,_],[e,b,A,e,_]];var w=f.handleHelloRequest,N=f.handleServerHello,t=f.handleCertificate,I=f.handleServerKeyExchange,b=f.handleCertificateRequest,A=f.handleServerHelloDone,_=f.handleFinished,k=[];k[f.ConnectionEnd.client]=[[e,e,N,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[w,e,e,e,e,e,e,e,e,e,e,t,I,b,A,e,e,e,e,e,e],[w,e,e,e,e,e,e,e,e,e,e,e,I,b,A,e,e,e,e,e,e],[w,e,e,e,e,e,e,e,e,e,e,e,e,b,A,e,e,e,e,e,e],[w,e,e,e,e,e,e,e,e,e,e,e,e,e,A,e,e,e,e,e,e],[w,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[w,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,_],[w,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[w,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e]];b=f.handleClientHello,A=f.handleClientKeyExchange,w=f.handleCertificateVerify;k[f.ConnectionEnd.server]=[[e,b,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,A,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,w,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,_],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e]],f.generateKeys=function(e,t){var r=s,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null);var n=t.server_random+t.client_random,a=2*t.mac_key_length+2*t.enc_key_length,e=e.version.major===f.Versions.TLS_1_0.major&&e.version.minor===f.Versions.TLS_1_0.minor;e&&(a+=2*t.fixed_iv_length);n=r(t.master_secret,"key expansion",n,a),a={client_write_MAC_key:n.getBytes(t.mac_key_length),server_write_MAC_key:n.getBytes(t.mac_key_length),client_write_key:n.getBytes(t.enc_key_length),server_write_key:n.getBytes(t.enc_key_length)};return e&&(a.client_write_IV=n.getBytes(t.fixed_iv_length),a.server_write_IV=n.getBytes(t.fixed_iv_length)),a},f.createConnectionState=function(e){var t=e.entity===f.ConnectionEnd.client,r=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(e){return!0},compressionState:null,compressFunction:function(e){return!0},updateSequenceNumber:function(){4294967295===e.sequenceNumber[1]?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},n={read:r(),write:r()};if(n.read.update=function(e,t){return n.read.cipherFunction(t,n.read)?n.read.compressFunction(e,t,n.read)||e.error(e,{message:"Could not decompress record.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.decompression_failure}}):e.error(e,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.bad_record_mac}}),!e.fail},n.write.update=function(e,t){return n.write.compressFunction(e,t,n.write)?n.write.cipherFunction(t,n.write)||e.error(e,{message:"Could not encrypt record.",send:!1,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.internal_error}}):e.error(e,{message:"Could not compress record.",send:!1,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.internal_error}}),!e.fail},e.session){r=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(r),r.keys=f.generateKeys(e,r),n.read.macKey=t?r.keys.server_write_MAC_key:r.keys.client_write_MAC_key,n.write.macKey=t?r.keys.client_write_MAC_key:r.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,r),r.compression_algorithm){case f.CompressionMethod.none:break;case f.CompressionMethod.deflate:n.read.compressFunction=i,n.write.compressFunction=a;break;default:throw new Error("Unsupported compression algorithm.")}}return n},f.createRandom=function(){var e=new Date,t=+e+6e4*e.getTimezoneOffset(),e=y.util.createBuffer();return e.putInt32(t),e.putBytes(y.random.getBytes(28)),e},f.createRecord=function(e,t){return t.data?{type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data}:null},f.createAlert=function(e,t){var r=y.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),f.createRecord(e,{type:f.ContentType.alert,data:r})},f.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=y.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1])}var a=t.length(),i=y.util.createBuffer();i.putByte(f.CompressionMethod.none);var o,s=i.length(),l=y.util.createBuffer();e.virtualHost&&((c=y.util.createBuffer()).putByte(0),c.putByte(0),(o=y.util.createBuffer()).putByte(0),p(o,2,y.util.createBuffer(e.virtualHost)),u=y.util.createBuffer(),p(u,2,o),p(c,2,u),l.putBuffer(c));var u=l.length();0<u&&(u+=2);var c=e.session.id,a=c.length+1+2+4+28+2+a+1+s+u,s=y.util.createBuffer();return s.putByte(f.HandshakeType.client_hello),s.putInt24(a),s.putByte(e.version.major),s.putByte(e.version.minor),s.putBytes(e.session.sp.client_random),p(s,1,y.util.createBuffer(c)),p(s,2,t),p(s,1,i),0<u&&p(s,2,l),s},f.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=y.util.createBuffer();return n.putByte(f.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),p(n,1,y.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n},f.createCertificate=function(t){var e,r=t.entity===f.ConnectionEnd.client,n=null;t.getCertificate&&(e=r?t.session.certificateRequest:t.session.extensions.server_name.serverNameList,n=t.getCertificate(t,e));var a=y.util.createBuffer();if(null!==n)try{y.util.isArray(n)||(n=[n]);for(var i=null,o=0;o<n.length;++o){var s=y.pem.decode(n[o])[0];if("CERTIFICATE"!==s.type&&"X509 CERTIFICATE"!==s.type&&"TRUSTED CERTIFICATE"!==s.type){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=s.type,l}if(s.procType&&"ENCRYPTED"===s.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=y.util.createBuffer(s.body);null===i&&(i=y.asn1.fromDer(u.bytes(),!1));var c=y.util.createBuffer();p(c,3,u),a.putBuffer(c)}n=y.pki.certificateFromAsn1(i),r?t.session.clientCertificate=n:t.session.serverCertificate=n}catch(e){return t.error(t,{message:"Could not send certificate list.",cause:e,send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.bad_certificate}})}r=3+a.length(),t=y.util.createBuffer();return t.putByte(f.HandshakeType.certificate),t.putInt24(r),p(t,3,a),t},f.createClientKeyExchange=function(e){var t=y.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(y.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();e=(t=e.session.serverCertificate.publicKey.encrypt(r.pre_master_secret)).length+2,r=y.util.createBuffer();return r.putByte(f.HandshakeType.client_key_exchange),r.putInt24(e),r.putInt16(t.length),r.putBytes(t),r},f.createServerKeyExchange=function(e){var t=y.util.createBuffer();return t},f.getClientSignature=function(e,t){var r=y.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(t,e,r){var n=null;if(t.getPrivateKey)try{n=t.getPrivateKey(t,t.session.clientCertificate),n=y.pki.privateKeyFromPem(n)}catch(e){t.error(t,{message:"Could not get private key.",cause:e,send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.internal_error}})}null===n?t.error(t,{message:"No private key set.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.internal_error}}):e=n.sign(e,null),r(t,e)},e.getSignature(e,r,t)},f.createCertificateVerify=function(e,t){var r=t.length+2,n=y.util.createBuffer();return n.putByte(f.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n},f.createCertificateRequest=function(e){var t=y.util.createBuffer();t.putByte(1);var r,n=y.util.createBuffer();for(r in e.caStore.certs){var a=e.caStore.certs[r],a=y.pki.distinguishedNameToAsn1(a.subject),a=y.asn1.toDer(a);n.putInt16(a.length()),n.putBuffer(a)}var i=1+t.length()+2+n.length(),o=y.util.createBuffer();return o.putByte(f.HandshakeType.certificate_request),o.putInt24(i),p(o,1,t),p(o,2,n),o},f.createServerHelloDone=function(e){var t=y.util.createBuffer();return t.putByte(f.HandshakeType.server_hello_done),t.putInt24(0),t},f.createChangeCipherSpec=function(){var e=y.util.createBuffer();return e.putByte(1),e},f.createFinished=function(e){(r=y.util.createBuffer()).putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest());var t=e.entity===f.ConnectionEnd.client,e=e.session.sp,r=s(e.master_secret,t?"client finished":"server finished",r.getBytes(),12),t=y.util.createBuffer();return t.putByte(f.HandshakeType.finished),t.putInt24(r.length()),t.putBuffer(r),t},f.createHeartbeat=function(e,t,r){void 0===r&&(r=t.length);var n=y.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);t=n.length(),r=Math.max(16,t-r-3);return n.putBytes(y.random.getBytes(r)),n},f.queue=function(e,t){if(t){var r;if(t.type===f.ContentType.handshake&&(r=t.fragment.bytes(),e.session.md5.update(r),e.session.sha1.update(r),r=null),t.fragment.length()<=f.MaxFragment)n=[t];else{for(var n=[],a=t.fragment.bytes();a.length>f.MaxFragment;)n.push(f.createRecord(e,{type:t.type,data:y.util.createBuffer(a.slice(0,f.MaxFragment))})),a=a.slice(f.MaxFragment);0<a.length&&n.push(f.createRecord(e,{type:t.type,data:y.util.createBuffer(a)}))}for(var i=0;i<n.length&&!e.fail;++i){var o=n[i];e.state.current.write.update(e,o)&&e.records.push(o)}}},f.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};function R(e){switch(e){case!0:return!0;case y.pki.certificateError.bad_certificate:return f.Alert.Description.bad_certificate;case y.pki.certificateError.unsupported_certificate:return f.Alert.Description.unsupported_certificate;case y.pki.certificateError.certificate_revoked:return f.Alert.Description.certificate_revoked;case y.pki.certificateError.certificate_expired:return f.Alert.Description.certificate_expired;case y.pki.certificateError.certificate_unknown:return f.Alert.Description.certificate_unknown;case y.pki.certificateError.unknown_ca:return f.Alert.Description.unknown_ca;default:return f.Alert.Description.bad_certificate}}for(var L in f.verifyCertificateChain=function(n,t){try{y.pki.verifyCertificateChain(n.caStore,t,function(e,t,r){R(e);t=n.verify(n,e,t,r);if(!0!==t){if("object"==typeof t&&!y.util.isArray(t)){r=new Error("The application rejected the certificate.");throw r.send=!0,r.alert={level:f.Alert.Level.fatal,description:f.Alert.Description.bad_certificate},t.message&&(r.message=t.message),t.alert&&(r.alert.description=t.alert),r}t!==e&&(t=function(e){switch(e){case!0:return!0;case f.Alert.Description.bad_certificate:return y.pki.certificateError.bad_certificate;case f.Alert.Description.unsupported_certificate:return y.pki.certificateError.unsupported_certificate;case f.Alert.Description.certificate_revoked:return y.pki.certificateError.certificate_revoked;case f.Alert.Description.certificate_expired:return y.pki.certificateError.certificate_expired;case f.Alert.Description.certificate_unknown:return y.pki.certificateError.certificate_unknown;case f.Alert.Description.unknown_ca:return y.pki.certificateError.unknown_ca;default:return y.pki.certificateError.bad_certificate}}(t))}return t})}catch(e){t=e;"send"in(t="object"!=typeof t||y.util.isArray(t)?{send:!0,alert:{level:f.Alert.Level.fatal,description:R(e)}}:t)||(t.send=!0),"alert"in t||(t.alert={level:f.Alert.Level.fatal,description:R(t.error)}),n.error(n,t)}return!n.fail},f.createSessionCache=function(e,t){var a=null;if(e&&e.getSession&&e.setSession&&e.order)a=e;else{for(var r in(a={}).cache=e||{},a.capacity=Math.max(t||100,1),a.order=[],e)a.order.length<=t?a.order.push(r):delete e[r];a.getSession=function(e){var t=null,r=null;if(e?r=y.util.bytesToHex(e):0<a.order.length&&(r=a.order[0]),null!==r&&r in a.cache)for(var n in t=a.cache[r],delete a.cache[r],a.order)if(a.order[n]===r){a.order.splice(n,1);break}return t},a.setSession=function(e,t){a.order.length===a.capacity&&(r=a.order.shift(),delete a.cache[r]);var r=y.util.bytesToHex(e);a.order.push(r),a.cache[r]=t}}return a},f.createConnection=function(n){var e=null,e=n.caStore?y.util.isArray(n.caStore)?y.pki.createCaStore(n.caStore):n.caStore:y.pki.createCaStore(),t=n.cipherSuites||null;if(null===t)for(var r in t=[],f.CipherSuites)t.push(f.CipherSuites[r]);var a=n.server?f.ConnectionEnd.server:f.ConnectionEnd.client,i=n.sessionCache?f.createSessionCache(n.sessionCache):null,u={version:{major:f.Version.major,minor:f.Version.minor},entity:a,sessionId:n.sessionId,caStore:e,sessionCache:i,cipherSuites:t,connected:n.connected,virtualHost:n.virtualHost||null,verifyClient:n.verifyClient||!1,verify:n.verify||function(e,t,r,n){return t},getCertificate:n.getCertificate||null,getPrivateKey:n.getPrivateKey||null,getSignature:n.getSignature||null,input:y.util.createBuffer(),tlsData:y.util.createBuffer(),data:y.util.createBuffer(),tlsDataReady:n.tlsDataReady,dataReady:n.dataReady,heartbeatReceived:n.heartbeatReceived,closed:n.closed,error:function(e,t){t.origin=t.origin||(e.entity===f.ConnectionEnd.client?"client":"server"),t.send&&(f.queue(e,f.createAlert(e,t.alert)),f.flush(e));var r=!1!==t.fatal;r&&(e.fail=!0),n.error(e,t),r&&e.close(!1)},deflate:n.deflate||null,inflate:n.inflate||null,reset:function(e){u.version={major:f.Version.major,minor:f.Version.minor},u.record=null,u.session=null,u.peerCertificate=null,u.state={pending:null,current:null},u.expect=(u.entity,f.ConnectionEnd.client,0),u.fragmented=null,u.records=[],u.open=!1,u.handshakes=0,u.handshaking=!1,u.isConnected=!1,u.fail=!e&&void 0!==e,u.input.clear(),u.tlsData.clear(),u.data.clear(),u.state.current=f.createConnectionState(u)}};u.reset();return u.handshake=function(e){var t;u.entity!==f.ConnectionEnd.client?u.error(u,{message:"Cannot initiate handshake as a server.",fatal:!1}):u.handshaking?u.error(u,{message:"Handshake already in progress.",fatal:!1}):(u.fail&&!u.open&&0===u.handshakes&&(u.fail=!1),u.handshaking=!0,t=null,0<(e=e||"").length&&(null===(t=u.sessionCache?u.sessionCache.getSession(e):t)&&(e="")),0!==e.length||!u.sessionCache||null!==(t=u.sessionCache.getSession())&&(e=t.id),u.session={id:e,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:y.md.md5.create(),sha1:y.md.sha1.create()},t&&(u.version=t.version,u.session.sp=t.sp),u.session.sp.client_random=f.createRandom().getBytes(),u.open=!0,f.queue(u,f.createRecord(u,{type:f.ContentType.handshake,data:f.createClientHello(u)})),f.flush(u))},u.process=function(e){var t,r,n,a,i,o,s,l=0;return e&&u.input.putBytes(e),u.fail||(null!==u.record&&u.record.ready&&u.record.fragment.isEmpty()&&(u.record=null),null===u.record&&(o=0,s=(i=u).input,(e=s.length())<5?o=5-e:(i.record={type:s.getByte(),version:{major:s.getByte(),minor:s.getByte()},length:s.getInt16(),fragment:y.util.createBuffer(),ready:!1},(s=(s=i.record.version.major===i.version.major)&&i.session&&i.session.version?i.record.version.minor===i.version.minor:s)||i.error(i,{message:"Incompatible TLS version.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.protocol_version}})),l=o),u.fail||null===u.record||u.record.ready||(r=0,n=(t=u).input,(a=n.length())<t.record.length?r=t.record.length-a:(t.record.fragment.putBytes(n.getBytes(t.record.length)),n.compact(),t.state.current.read.update(t,t.record)&&(null!==t.fragmented&&(t.fragmented.type===t.record.type?(t.fragmented.fragment.putBuffer(t.record.fragment),t.record=t.fragmented):t.error(t,{message:"Invalid fragmented record.",send:!0,alert:{level:f.Alert.Level.fatal,description:f.Alert.Description.unexpected_message}})),t.record.ready=!0)),l=r),!u.fail&&null!==u.record&&u.record.ready&&(n=(a=u).record,t=n.type-f.ContentType.change_cipher_spec,r=B[a.entity][a.expect],t in r?r[t](a,n):f.handleUnexpected(a,n))),l},u.prepare=function(e){return f.queue(u,f.createRecord(u,{type:f.ContentType.application_data,data:y.util.createBuffer(e)})),f.flush(u)},u.prepareHeartbeatRequest=function(e,t){return e instanceof y.util.ByteBuffer&&(e=e.bytes()),void 0===t&&(t=e.length),u.expectedHeartbeatPayload=e,f.queue(u,f.createRecord(u,{type:f.ContentType.heartbeat,data:f.createHeartbeat(f.HeartbeatMessageType.heartbeat_request,e,t)})),f.flush(u)},u.close=function(e){var t;!u.fail&&u.sessionCache&&u.session&&((t={id:u.session.id,version:u.session.version,sp:u.session.sp}).sp.keys=null,u.sessionCache.setSession(t.id,t)),u.open&&(u.open=!1,u.input.clear(),(u.isConnected||u.handshaking)&&(u.isConnected=u.handshaking=!1,f.queue(u,f.createAlert(u,{level:f.Alert.Level.warning,description:f.Alert.Description.close_notify})),f.flush(u)),u.closed(u)),u.reset(e)},u},y.tls=y.tls||{},f)"function"!=typeof f[L]&&(y.tls[L]=f[L]);y.tls.prf_tls1=s,y.tls.hmac_sha1=function(e,t,r){var n=y.hmac.create();n.start("SHA1",e);e=y.util.createBuffer();return e.putInt32(t[0]),e.putInt32(t[1]),e.putByte(r.type),e.putByte(r.version.major),e.putByte(r.version.minor),e.putInt16(r.length),e.putBytes(r.fragment.bytes()),n.update(e.getBytes()),n.digest().getBytes()},y.tls.createSessionCache=f.createSessionCache,y.tls.createConnection=f.createConnection}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/tls",["require","module","./asn1","./hmac","./md","./pem","./pki","./random","./util"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.tls)return e.tls;e.defined.tls=!0;for(var r=0;r<t.length;++r)t[r](e);return e.tls}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(s){function e(e,t,r){t=t.entity===s.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:s.cipher.createDecipher("AES-CBC",t?r.keys.server_write_key:r.keys.client_write_key),iv:t?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:s.cipher.createCipher("AES-CBC",t?r.keys.client_write_key:r.keys.server_write_key),iv:t?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=i,e.write.cipherFunction=n,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=u.hmac_sha1}function n(e,t){var r=!1,n=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(n),t.updateSequenceNumber(),n=e.version.minor===u.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:s.random.getBytesSync(16),t.cipherState.init=!0;t=t.cipherState.cipher;return t.start({iv:n}),e.version.minor>=u.Versions.TLS_1_1.minor&&t.output.putBytes(n),t.update(e.fragment),t.finish(a)&&(e.fragment=t.output,e.length=e.fragment.length(),r=!0),r}function a(e,t,r){return r||(e=e-t.length()%e,t.fillWithByte(e-1,e)),!0}function l(e,t,r){var n=!0;if(r){for(var a=t.length(),i=t.last(),o=a-1-i;o<a-1;++o)n=n&&t.at(o)==i;n&&t.truncate(i+1)}return n}function i(e,t){var r=!1;o=e.version.minor===u.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:e.fragment.getBytes(16),t.cipherState.init=!0;var n=t.cipherState.cipher;n.start({iv:o}),n.update(e.fragment);var r=n.finish(l),a=t.macLength,i=s.random.getBytesSync(a),o=n.output.length();a<=o?(e.fragment=n.output.getBytes(o-a),i=n.output.getBytes(a)):e.fragment=n.output.getBytes(),e.fragment=s.util.createBuffer(e.fragment),e.length=e.fragment.length();n=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),e=t.macKey,t=i,i=n,(n=s.hmac.create()).start("SHA1",e),n.update(t),t=n.digest().getBytes(),n.start(null,null),n.update(i),i=n.digest().getBytes(),r=t===i&&r}var u=s.tls;u.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=u.BulkCipherAlgorithm.aes,e.cipher_type=u.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=u.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:e},u.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=u.BulkCipherAlgorithm.aes,e.cipher_type=u.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=u.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:e}}var i="aesCipherSuites";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/aesCipherSuites",["require","module","./aes","./tls"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(n){n.debug=n.debug||{},n.debug.storage={},n.debug.get=function(e,t){var r;return void 0===e?r=n.debug.storage:e in n.debug.storage&&(r=void 0===t?n.debug.storage[e]:n.debug.storage[e][t]),r},n.debug.set=function(e,t,r){e in n.debug.storage||(n.debug.storage[e]={}),n.debug.storage[e][t]=r},n.debug.clear=function(e,t){void 0===e?n.debug.storage={}:e in n.debug.storage&&(void 0===t?delete n.debug.storage[e]:delete n.debug.storage[e][t])}}var i="debug";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/debug",["require","module"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(c){function r(e,s,l,u){e.generate=function(e,t){for(var r=new c.util.ByteBuffer,n=Math.ceil(t/u)+l,a=new c.util.ByteBuffer,i=l;i<n;++i){a.putInt32(i),s.start(),s.update(e+a.getBytes());var o=s.digest();r.putBytes(o.getBytes(u))}return r.truncate(r.length()-t),r.getBytes()}}c.kem=c.kem||{};var s=c.jsbn.BigInteger;c.kem.rsa={},c.kem.rsa.create=function(i,e){var o=(e=e||{}).prng||c.random,e={encrypt:function(e,t){for(var r=Math.ceil(e.n.bitLength()/8);(n=new s(c.util.bytesToHex(o.getBytesSync(r)),16).mod(e.n)).equals(s.ZERO););var n,a=r-(n=c.util.hexToBytes(n.toString(16))).length;return 0<a&&(n=c.util.fillString(String.fromCharCode(0),a)+n),{encapsulation:e.encrypt(n,"NONE"),key:i.generate(n,t)}},decrypt:function(e,t,r){t=e.decrypt(t,"NONE");return i.generate(t,r)}};return e},c.kem.kdf1=function(e,t){r(this,e,0,t||e.digestLength)},c.kem.kdf2=function(e,t){r(this,e,1,t||e.digestLength)}}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/kem",["require","module","./util","./random","./jsbn"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.kem)return e.kem;e.defined.kem=!0;for(var r=0;r<t.length;++r)t[r](e);return e.kem}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(a){a.log=a.log||{},a.log.levels=["none","error","warning","info","debug","verbose","max"];var i={},o=[],e=null;a.log.LEVEL_LOCKED=2,a.log.NO_LEVEL_CHECK=4,a.log.INTERPOLATE=8;for(var t=0;t<a.log.levels.length;++t){var r=a.log.levels[t];i[r]={index:t,name:r.toUpperCase()}}a.log.logMessage=function(e){for(var t=i[e.level].index,r=0;r<o.length;++r){var n=o[r];n.flags&a.log.NO_LEVEL_CHECK?n.f(e):t<=i[n.level].index&&n.f(n,e)}},a.log.prepareStandard=function(e){"standard"in e||(e.standard=i[e.level].name+" ["+e.category+"] "+e.message)},a.log.prepareFull=function(e){var t;"full"in e||(t=(t=[e.message]).concat([]),e.full=a.util.format.apply(this,t))},a.log.prepareStandardFull=function(e){"standardFull"in e||(a.log.prepareStandard(e),e.standardFull=e.standard)};for(var s,n,l=["error","warning","info","debug","verbose"],t=0;t<l.length;++t)!function(n){a.log[n]=function(e,t){var r=Array.prototype.slice.call(arguments).slice(2),r={timestamp:new Date,level:n,category:e,message:t,arguments:r};a.log.logMessage(r)}}(l[t]);a.log.makeLogger=function(e){e={flags:0,f:e};return a.log.setLevel(e,"none"),e},a.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&a.log.LEVEL_LOCKED))for(var n=0;n<a.log.levels.length;++n)if(t==a.log.levels[n]){e.level=t,r=!0;break}return r},a.log.lock=function(e,t){void 0===t||t?e.flags|=a.log.LEVEL_LOCKED:e.flags&=~a.log.LEVEL_LOCKED},a.log.addLogger=function(e){o.push(e)},"undefined"!=typeof console&&"log"in console?(n=(n=console.error&&console.warn&&console.info&&console.debug?(s={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},function(e,t){a.log.prepareStandard(t);var r=s[t.level],n=(n=[t.standard]).concat(t.arguments.slice());r.apply(console,n)}):function(e,t){a.log.prepareStandardFull(t),console.log(t.standardFull)},a.log.makeLogger(n)),a.log.setLevel(n,"debug"),a.log.addLogger(n),e=n):console={log:function(){}},null!==e&&("console.level"in(n=a.util.getQueryVariables())&&a.log.setLevel(e,n["console.level"].slice(-1)[0]),"console.lock"in n&&"true"==n["console.lock"].slice(-1)[0]&&a.log.lock(e)),a.log.consoleLogger=e}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/log",["require","module","./util"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.log)return e.log;e.defined.log=!0;for(var r=0;r<t.length;++r)t[r](e);return e.log}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(p){function t(e){for(var t=[],r=0;r<e.length;++r)t.push(function(e){var t={},r=[];if(y.validate(e,i.asn1.recipientInfoValidator,t,r))return{version:t.version.charCodeAt(0),issuer:p.pki.RDNAttributesAsArray(t.issuer),serialNumber:p.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:y.derToOid(t.encAlgorithm),parameter:t.encParameter.value,content:t.encKey}};throw(t=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.")).errors=r,t}(e[r]));return t}function r(e){for(var t,r=[],n=0;n<e.length;++n)r.push((t=e[n],y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(t.version).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[p.pki.distinguishedNameToAsn1({attributes:t.issuer}),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,p.util.hexToBytes(t.serialNumber))]),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(t.encryptedContent.algorithm).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")]),y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,t.encryptedContent.content)])));return r}function f(e){for(var t=[],r=0;r<e.length;++r)t.push(function(e){var t=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(e.version).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[p.pki.distinguishedNameToAsn1({attributes:e.issuer}),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,p.util.hexToBytes(e.serialNumber))]),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.digestAlgorithm).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.signatureAlgorithm).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")])),t.value.push(y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,e.signature)),0<e.unauthenticatedAttributes.length){for(var r=y.create(y.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var a=e.unauthenticatedAttributes[n];r.values.push(h(a))}t.value.push(r)}return t}(e[r]));return t}function h(e){var t,r,n,a,i;return e.type===p.pki.oids.contentType?t=y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.value).getBytes()):e.type===p.pki.oids.messageDigest?t=y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,e.value.bytes()):e.type===p.pki.oids.signingTime&&(r=new Date("Jan 1, 1950 00:00:00Z"),n=new Date("Jan 1, 2050 00:00:00Z"),"string"==typeof(i=e.value)&&(a=Date.parse(i),i=isNaN(a)?13===i.length?y.utcTimeToDate(i):y.generalizedTimeToDate(i):new Date(a)),t=r<=i&&i<n?y.create(y.Class.UNIVERSAL,y.Type.UTCTIME,!1,y.dateToUtcTime(i)):y.create(y.Class.UNIVERSAL,y.Type.GENERALIZEDTIME,!1,y.dateToGeneralizedTime(i))),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.type).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SET,!0,[t])])}function n(e,t,r){var n={};if(!y.validate(t,r,n,[])){r=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw r.errors=r}if(y.derToOid(n.contentType)!==p.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var a="";if(p.util.isArray(n.encryptedContent))for(var i=0;i<n.encryptedContent.length;++i){if(n.encryptedContent[i].type!==y.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=n.encryptedContent[i].value}else a=n.encryptedContent;e.encryptedContent={algorithm:y.derToOid(n.encAlgorithm),parameter:p.util.createBuffer(n.encParameter.value),content:p.util.createBuffer(a)}}if(n.content){a="";if(p.util.isArray(n.content))for(i=0;i<n.content.length;++i){if(n.content[i].type!==y.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=n.content[i].value}else a=n.content;e.content=p.util.createBuffer(a)}return e.version=n.version.charCodeAt(0),e.rawCapture=n}function a(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case p.pki.oids["aes128-CBC"]:case p.pki.oids["aes192-CBC"]:case p.pki.oids["aes256-CBC"]:t=p.aes.createDecryptionCipher(e.encryptedContent.key);break;case p.pki.oids.desCBC:case p.pki.oids["des-EDE3-CBC"]:t=p.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}var y=p.asn1,i=p.pkcs7=p.pkcs7||{};i.messageFromPem=function(e){var t=p.pem.decode(e)[0];if("PKCS7"!==t.type){e=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw e.headerType=t.type,e}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");t=y.fromDer(t.body);return i.messageFromAsn1(t)},i.messageToPem=function(e,t){e={type:"PKCS7",body:y.toDer(e.toAsn1()).getBytes()};return p.pem.encode(e,{maxline:t})},i.messageFromAsn1=function(e){var t={},r=[];if(!y.validate(e,i.asn1.contentInfoValidator,t,r)){e=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw e.errors=r,e}var n,a=y.derToOid(t.contentType);switch(a){case p.pki.oids.envelopedData:n=i.createEnvelopedData();break;case p.pki.oids.encryptedData:n=i.createEncryptedData();break;case p.pki.oids.signedData:n=i.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+a+" is not (yet) supported.")}return n.fromAsn1(t.content.value[0]),n},i.createSignedData=function(){var d=null;return d={type:p.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){n(d,e,i.asn1.signedDataValidator),d.certificates=[],d.crls=[],d.digestAlgorithmIdentifiers=[],d.contentInfo=null,d.signerInfos=[];for(var t=d.rawCapture.certificates.value,r=0;r<t.length;++r)d.certificates.push(p.pki.certificateFromAsn1(t[r]))},toAsn1:function(){d.contentInfo||d.sign();for(var e=[],t=0;t<d.certificates.length;++t)e.push(p.pki.certificateToAsn1(d.certificates[t]));var r=[],n=y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(d.version).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SET,!0,d.digestAlgorithmIdentifiers),d.contentInfo])]);return 0<e.length&&n.value[0].value.push(y.create(y.Class.CONTEXT_SPECIFIC,0,!0,e)),0<r.length&&n.value[0].value.push(y.create(y.Class.CONTEXT_SPECIFIC,1,!0,r)),n.value[0].value.push(y.create(y.Class.UNIVERSAL,y.Type.SET,!0,d.signerInfos)),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(d.type).getBytes()),n])},addSigner:function(e){var t=e.issuer,r=e.serialNumber;e.certificate&&(t=(n="string"==typeof(n=e.certificate)?p.pki.certificateFromPem(n):n).issuer.attributes,r=n.serialNumber);var n=e.key;if(!n)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof n&&(n=p.pki.privateKeyFromPem(n));var a=e.digestAlgorithm||p.pki.oids.sha1;switch(a){case p.pki.oids.sha1:case p.pki.oids.sha256:case p.pki.oids.sha384:case p.pki.oids.sha512:case p.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+a)}var i=e.authenticatedAttributes||[];if(0<i.length){for(var o=!1,s=!1,l=0;l<i.length;++l){var u=i[l];if(o||u.type!==p.pki.oids.contentType){if(!s&&u.type===p.pki.oids.messageDigest&&(s=!0,o))break}else if(o=!0,s)break}if(!o||!s)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}d.signers.push({key:n,version:1,issuer:t,serialNumber:r,digestAlgorithm:a,signatureAlgorithm:p.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:i,unauthenticatedAttributes:[]})},sign:function(){var e;"object"==typeof d.content&&null!==d.contentInfo||(d.contentInfo=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(p.pki.oids.data).getBytes())]),"content"in d&&(d.content instanceof p.util.ByteBuffer?e=d.content.bytes():"string"==typeof d.content&&(e=p.util.encodeUtf8(d.content)),d.contentInfo.value.push(y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,e)])))),0!==d.signers.length&&function(e){if(d.contentInfo.value.length<2)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var t,r=y.derToOid(d.contentInfo.value[0].value),n=(n=d.contentInfo.value[1]).value[0],a=y.toDer(n);for(t in a.getByte(),y.getBerValueLength(a),a=a.getBytes(),e)e[t].start().update(a);for(var i=new Date,o=0;o<d.signers.length;++o){var s=d.signers[o];if(0===s.authenticatedAttributes.length){if(r!==p.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{s.authenticatedAttributesAsn1=y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var l=y.create(y.Class.UNIVERSAL,y.Type.SET,!0,[]),u=0;u<s.authenticatedAttributes.length;++u){var c=s.authenticatedAttributes[u];c.type===p.pki.oids.messageDigest?c.value=e[s.digestAlgorithm].digest():c.type===p.pki.oids.signingTime&&(c.value||(c.value=i)),l.value.push(h(c)),s.authenticatedAttributesAsn1.value.push(h(c))}a=y.toDer(l).getBytes(),s.md.start().update(a)}s.signature=s.key.sign(s.md,"RSASSA-PKCS1-V1_5")}d.signerInfos=f(d.signers)}(function(){for(var e={},t=0;t<d.signers.length;++t){var r,n=d.signers[t];(r=n.digestAlgorithm)in e||(e[r]=p.md[p.pki.oids[r]].create()),0===n.authenticatedAttributes.length?n.md=e[r]:n.md=p.md[p.pki.oids[r]].create()}for(r in d.digestAlgorithmIdentifiers=[],e)d.digestAlgorithmIdentifiers.push(y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(r).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")]));return e}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(e){"string"==typeof e&&(e=p.pki.certificateFromPem(e)),d.certificates.push(e)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},i.createEncryptedData=function(){var t=null;return t={type:p.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:p.pki.oids["aes256-CBC"]},fromAsn1:function(e){n(t,e,i.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),a(t)}}},i.createEnvelopedData=function(){var s=null;return s={type:p.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:p.pki.oids["aes256-CBC"]},fromAsn1:function(e){e=n(s,e,i.asn1.envelopedDataValidator);s.recipients=t(e.recipientInfos.value)},toAsn1:function(){return y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(s.type).getBytes()),y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(s.version).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SET,!0,r(s.recipients)),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,(e=s.encryptedContent,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(p.pki.oids.data).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.algorithm).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,e.parameter.getBytes())]),y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,e.content.getBytes())])]))])])]);var e},findRecipient:function(e){for(var t=e.issuer.attributes,r=0;r<s.recipients.length;++r){var n=s.recipients[r],a=n.issuer;if(n.serialNumber===e.serialNumber&&a.length===t.length){for(var i=!0,o=0;o<t.length;++o)if(a[o].type!==t[o].type||a[o].value!==t[o].value){i=!1;break}if(i)return n}}return null},decrypt:function(e,t){if(void 0===s.encryptedContent.key&&void 0!==e&&void 0!==t)switch(e.encryptedContent.algorithm){case p.pki.oids.rsaEncryption:case p.pki.oids.desCBC:var r=t.decrypt(e.encryptedContent.content);s.encryptedContent.key=p.util.createBuffer(r);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}a(s)},addRecipient:function(e){s.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:p.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,t){if(void 0===s.encryptedContent.content){var r,n,a;switch(t=t||s.encryptedContent.algorithm,e=e||s.encryptedContent.key,t){case p.pki.oids["aes128-CBC"]:n=r=16,a=p.aes.createEncryptionCipher;break;case p.pki.oids["aes192-CBC"]:r=24,n=16,a=p.aes.createEncryptionCipher;break;case p.pki.oids["aes256-CBC"]:r=32,n=16,a=p.aes.createEncryptionCipher;break;case p.pki.oids["des-EDE3-CBC"]:r=24,n=8,a=p.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+t)}if(void 0===e)e=p.util.createBuffer(p.random.getBytes(r));else if(e.length()!=r)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+r+".");s.encryptedContent.algorithm=t,s.encryptedContent.key=e,s.encryptedContent.parameter=p.util.createBuffer(p.random.getBytes(n));e=a(e);if(e.start(s.encryptedContent.parameter.copy()),e.update(s.content),!e.finish())throw new Error("Symmetric encryption failed.");s.encryptedContent.content=e.output}for(var i=0;i<s.recipients.length;++i){var o=s.recipients[i];if(void 0===o.encryptedContent.content){if(o.encryptedContent.algorithm!==p.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+o.encryptedContent.algorithm);o.encryptedContent.content=o.encryptedContent.key.encrypt(s.encryptedContent.key.data)}}}}}}var i="pkcs7";if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var o,n=l;(l=function(e,t){return o=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/pkcs7",["require","module","./aes","./asn1","./des","./oids","./pem","./pkcs7asn1","./random","./util","./x509"],function(){!function(n,e){e.exports=function(e){var t=o.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined[i])return e[i];e.defined[i]=!0;for(var r=0;r<t.length;++r)t[r](e);return e[i]}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(c){function d(e,t){t=t.toString(16);"8"<=t[0]&&(t="00"+t);t=c.util.hexToBytes(t);e.putInt32(t.length),e.putBytes(t)}function p(e,t){e.putInt32(t.length),e.putString(t)}function f(){for(var e=c.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}var e=c.ssh=c.ssh||{};e.privateKeyToPutty=function(e,t,r){var n="ssh-rsa",a=""===(t=t||"")?"none":"aes256-cbc",i="PuTTY-User-Key-File-2: ssh-rsa\r\n";i+="Encryption: "+a+"\r\n",i+="Comment: "+(r=r||"")+"\r\n";var o=c.util.createBuffer();p(o,n),d(o,e.e),d(o,e.n);var s=c.util.encode64(o.bytes(),64),l=Math.floor(s.length/66)+1;i+="Public-Lines: "+l+"\r\n",i+=s;s=c.util.createBuffer();d(s,e.d),d(s,e.p),d(s,e.q),d(s,e.qInv),u=t?(e=s.length()+16-1,e-=e%16,(u=f(s.bytes())).truncate(u.length()-e+s.length()),s.putBuffer(u),(u=c.util.createBuffer()).putBuffer(f("\0\0\0\0",t)),u.putBuffer(f("\0\0\0",t)),(u=c.aes.createEncryptionCipher(u.truncate(8),"CBC")).start(c.util.createBuffer().fillWithByte(0,16)),u.update(s.copy()),u.finish(),(u=u.output).truncate(16),c.util.encode64(u.bytes(),64)):c.util.encode64(s.bytes(),64),i+="\r\nPrivate-Lines: "+(Math.floor(u.length/66)+1)+"\r\n",i+=u;var u=f("putty-private-key-file-mac-key",t),t=c.util.createBuffer();p(t,n),p(t,a),p(t,r),t.putInt32(o.length()),t.putBuffer(o),t.putInt32(s.length()),t.putBuffer(s);s=c.hmac.create();return s.start("sha1",u),s.update(t.bytes()),i+="\r\nPrivate-MAC: "+s.digest().toHex()+"\r\n"},e.publicKeyToOpenSSH=function(e,t){t=t||"";var r=c.util.createBuffer();return p(r,"ssh-rsa"),d(r,e.e),d(r,e.n),"ssh-rsa "+c.util.encode64(r.bytes())+" "+t},e.privateKeyToOpenSSH=function(e,t){return t?c.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):c.pki.privateKeyToPem(e)},e.getPublicKeyFingerprint=function(e,t){var r=(t=t||{}).md||c.md.md5.create(),n=c.util.createBuffer();p(n,"ssh-rsa"),d(n,e.e),d(n,e.n),r.start(),r.update(n.getBytes());n=r.digest();if("hex"===t.encoding){r=n.toHex();return t.delimiter?r.match(/.{2}/g).join(t.delimiter):r}if("binary"===t.encoding)return n.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return n}}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/ssh",["require","module","./aes","./hmac","./md5","./sha1","./util"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.ssh)return e.ssh;e.defined.ssh=!0;for(var r=0;r<t.length;++r)t[r](e);return e.ssh}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function a(i){var r="forge.task",n={},t=0;i.debug.set(r,"tasks",n);var a={};i.debug.set(r,"queues",a);var o="ready",s="running",e="blocked",l="sleeping",u="done",c="error",d="start",p="block",f="unblock",h="sleep",y="wakeup",g="cancel",m={ready:{}};m[o].stop=o,m[o][d]=s,m[o][g]=u,m[o].fail=c,m[s]={},m[s].stop=o,m[s][d]=s,m[s][p]=e,m[s][f]=s,m[s][h]=l,m[s][y]=s,m[s][g]=u,m[s].fail=c,m[e]={},m[e].stop=e,m[e][d]=e,m[e][p]=e,m[e][f]=e,m[e][h]=e,m[e][y]=e,m[e][g]=u,m[e].fail=c,m[l]={},m[l].stop=l,m[l][d]=l,m[l][p]=l,m[l][f]=l,m[l][h]=l,m[l][y]=l,m[l][g]=u,m[l].fail=c,m.done={},m.done.stop=u,m.done[d]=u,m.done[p]=u,m.done[f]=u,m.done[h]=u,m.done[y]=u,m.done[g]=u,m.done.fail=c,m[c]={},m[c].stop=c,m[c][d]=c,m[c][p]=c,m[c][f]=c,m[c][h]=c,m[c][y]=c,m[c][g]=c,m[c].fail=c;function v(e){this.id=-1,this.name=e.name||"?",this.parent=e.parent||null,this.run=e.run,this.subtasks=[],this.error=!1,this.state=o,this.blocks=0,this.timeoutId=null,this.swapTime=null,this.userData=null,this.id=t++,n[this.id]=this}v.prototype.debug=function(e){i.log.debug(r,e=e||"","[%s][%s] task:",this.id,this.name,this,"subtasks:",this.subtasks.length,"queue:",a)},v.prototype.next=function(e,t){"function"==typeof e&&(t=e,e=this.name);e=new v({run:t,name:e,parent:this});return e.state=s,e.type=this.type,e.successCallback=this.successCallback||null,e.failureCallback=this.failureCallback||null,this.subtasks.push(e),this},v.prototype.parallel=function(n,a){return i.util.isArray(n)&&(a=n,n=this.name),this.next(n,function(e){var r=e;r.block(a.length);for(var t=0;t<a.length;t++)!function(e,t){i.task.start({type:e,run:function(e){a[t](e)},success:function(e){r.unblock()},failure:function(e){r.unblock()}})}(n+"__parallel-"+e.id+"-"+t,t)})},v.prototype.stop=function(){this.state=m[this.state].stop},v.prototype.start=function(){this.error=!1,this.state=m[this.state][d],this.state===s&&(this.start=new Date,this.run(this),C(this,0))},v.prototype.block=function(e){this.blocks+=e=void 0===e?1:e,0<this.blocks&&(this.state=m[this.state][p])},v.prototype.unblock=function(e){return this.blocks-=e=void 0===e?1:e,0===this.blocks&&this.state!==u&&(this.state=s,C(this,0)),this.blocks},v.prototype.sleep=function(e){e=void 0===e?0:e,this.state=m[this.state][h];var t=this;this.timeoutId=setTimeout(function(){t.timeoutId=null,t.state=s,C(t,0)},e)},v.prototype.wait=function(e){e.wait(this)},v.prototype.wakeup=function(){this.state===l&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state=s,C(this,0))},v.prototype.cancel=function(){this.state=m[this.state][g],this.permitsNeeded=0,null!==this.timeoutId&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]},v.prototype.fail=function(e){if(this.error=!0,E(this,!0),e)e.error=this.error,e.swapTime=this.swapTime,e.userData=this.userData,C(e,0);else{if(null!==this.parent){for(var t=this.parent;null!==t.parent;)t.error=this.error,t.swapTime=this.swapTime,t.userData=this.userData,t=t.parent;E(t,!0)}this.failureCallback&&this.failureCallback(this)}};var C=function(r,e){function t(e){var t;e++,r.state===s&&(n&&(r.swapTime=+new Date),0<r.subtasks.length?((t=r.subtasks.shift()).error=r.error,t.swapTime=r.swapTime,t.userData=r.userData,t.run(t),t.error||C(t,e)):(E(r),r.error||null!==r.parent&&(r.parent.error=r.error,r.parent.swapTime=r.swapTime,r.parent.userData=r.userData,C(r.parent,e))))}var n=30<e||20<+new Date-r.swapTime;n?setTimeout(t,0):t(e)},E=function(e,t){e.state=u,delete n[e.id],null===e.parent&&(e.type in a?0===a[e.type].length?i.log.error(r,"[%s][%s] task queue empty [%s]",e.id,e.name,e.type):a[e.type][0]!==e?i.log.error(r,"[%s][%s] task not first in queue [%s]",e.id,e.name,e.type):(a[e.type].shift(),0===a[e.type].length?delete a[e.type]:a[e.type][0].start()):i.log.error(r,"[%s][%s] task queue missing [%s]",e.id,e.name,e.type),t||(e.error&&e.failureCallback?e.failureCallback(e):!e.error&&e.successCallback&&e.successCallback(e)))};i.task=i.task||{},i.task.start=function(e){var t,r=new v({run:e.run,name:e.name||"?"});r.type=e.type,r.successCallback=e.success||null,r.failureCallback=e.failure||null,r.type in a?a[e.type].push(r):(a[r.type]=[r],(t=r).error=!1,t.state=m[t.state][d],setTimeout(function(){t.state===s&&(t.swapTime=+new Date,t.run(t),C(t,0))},0))},i.task.cancel=function(e){e in a&&(a[e]=[a[e][0]])},i.task.createCondition=function(){var r={tasks:{},wait:function(e){e.id in r.tasks||(e.block(),r.tasks[e.id]=e)},notify:function(){var e,t=r.tasks;for(e in r.tasks={},t)t[e].unblock()}};return r}}if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),a(forge);var r=!0;l=function(e,t){t(s,module)}}var i,n=l;(l=function(e,t){return i=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/task",["require","module","./debug","./log","./util"],function(){!function(n,e){e.exports=function(e){var t=i.map(function(e){return n(e)}).concat(a);if((e=e||{}).defined=e.defined||{},e.defined.task)return e.task;e.defined.task=!0;for(var r=0;r<t.length;++r)t[r](e);return e.task}}.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){if("function"!=typeof l){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={disableNativeCode:!1});var r=!0;l=function(e,t){t(s,module)}}var a,n=l;(l=function(e,t){return a=("string"==typeof e?t:e).slice(2),r?(delete l,n.apply(null,Array.prototype.slice.call(arguments,0))):(l=n).apply(null,Array.prototype.slice.call(arguments,0))})("js/forge",["require","module","./aes","./aesCipherSuites","./asn1","./cipher","./cipherModes","./debug","./des","./hmac","./kem","./log","./md","./mgf1","./pbkdf2","./pem","./pkcs7","./pkcs1","./pkcs12","./pki","./prime","./prng","./pss","./random","./rc2","./ssh","./task","./tls","./util"],function(){!function(n,e){e.exports=function(e){var t=a.map(function(e){return n(e)});if((e=e||{}).defined=e.defined||{},e.defined.forge)return e.forge;e.defined.forge=!0;for(var r=0;r<t.length;++r)t[r](e);return e},e.exports.disableNativeCode=!1,e.exports(e.exports)}.apply(null,Array.prototype.slice.call(arguments,0))})}(),s("js/forge");function C(e,t){return r.call(e,t)}function u(e,t){var r,n,a,i,o,s,l,u,c,d,p=t&&t.split("/"),f=y.map,h=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(p=p.slice(0,p.length-1),t=(e=e.split("/")).length-1,y.nodeIdCompat&&g.test(e[t])&&(e[t]=e[t].replace(g,"")),e=p.concat(e),u=0;u<e.length;u+=1)if("."===(d=e[u]))e.splice(u,1),--u;else if(".."===d){if(1===u&&(".."===e[2]||".."===e[0]))break;0<u&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||h)&&f){for(u=(r=e.split("/")).length;0<u;--u){if(n=r.slice(0,u).join("/"),p)for(c=p.length;0<c;--c)if(a=(a=f[p.slice(0,c).join("/")])&&a[n]){i=a,o=u;break}if(i)break;!s&&h&&h[n]&&(s=h[n],l=u)}!i&&s&&(i=s,o=l),i&&(r.splice(0,o,i),e=r.join("/"))}return e}function E(e,t){return function(){return i.apply(d,n.call(arguments,0).concat([e,t]))}}function S(e){var t;if(C(f,e)&&(t=f[e],delete f[e],h[e]=!0,o.apply(d,t)),!C(p,e)&&!C(h,e))throw new Error("No "+e);return p[e]}function c(e){var t,r=e?e.indexOf("!"):-1;return-1<r&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}});var GetAndSetApplicationBadgeNumber=function(){GlobalPush.getApplicationIconBadgeNumber(function(e){SetApplicationBadgeNumber(e++)},function(e){console.log(JSON.stringify(e))})},SetApplicationBadgeNumber=function(e){GlobalPush.setApplicationIconBadgeNumber(function(e){console.log(JSON.stringify(e))},function(e){console.log(JSON.stringify(e))},e)},keyRAW=new Uint8Array([245,87,124,4,123,198,122,12,71,15,134,220,59,62,131,187,76,243,65,156,191,171,114,189]),ivRAW=new Uint8Array([62,81,92,156,178,142,221,199]),keySize=24,ivSize=8,salt=null,password=null,derivedBytes=forge.pbe.opensslDeriveBytes(password,salt,keySize+ivSize);function encrypt3DES(e){var t=forge.cipher.createCipher("3DES-ECB",keyRAW);t.start({iv:ab2str(ivRAW.buffer)}),t.update(forge.util.createBuffer(e,"binary")),t.finish();e=forge.util.createBuffer();return null!==salt&&(e.putBytes("Salted__"),e.putBytes(salt)),e.putBuffer(t.output),encrypted=forge.util.encode64(e.getBytes()),encrypted}function decrypt(e,t){var r=forge.cipher.createDecipher("3DES-ECB",keyRAW);r.start({iv:ab2str(ivRAW.buffer)}),r.update(forge.util.createBuffer(forge.util.decode64(e),"binary"));r.finish();return t?r.output.data:decodeUTF8(str2ab_2(r.output.data))}function ab2str(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function str2ab(e){for(var t=new ArrayBuffer(2*e.length),r=new Uint16Array(t),n=0,a=e.length;n<a;n++)r[n]=e.charCodeAt(n);return t}function str2ab_2(e){for(var t=new ArrayBuffer(e.length*Uint8Array.BYTES_PER_ELEMENT),r=new Uint8Array(t),n=0,a=e.length;n<a;n++)r[n]=e.charCodeAt(n);return r}function encodeUTF8(e){for(var t=0,r=new Uint8Array(4*e.length),n=0;n!=e.length;n++){var a=e.charCodeAt(n);if(a<128)r[t++]=a;else{if(a<2048)r[t++]=a>>6|192;else{if(55295<a&&a<56320){if(++n==e.length)throw"UTF-8 encode: incomplete surrogate pair";var i=e.charCodeAt(n);if(i<56320||57343<i)throw"UTF-8 encode: second char code 0x"+i.toString(16)+" at index "+n+" in surrogate pair out of range";r[t++]=(a=65536+((1023&a)<<10)+(1023&i))>>18|240,r[t++]=a>>12&63|128}else r[t++]=a>>12|224;r[t++]=a>>6&63|128}r[t++]=63&a|128}}return r.subarray(0,t)}function decodeUTF8(e){for(var t="",r=0;r<e.length;){var n=e[r++];if(127<n){if(191<n&&n<224){if(r>=e.length)throw"UTF-8 decode: incomplete 2-byte sequence";n=(31&n)<<6|63&e[r]}else if(223<n&&n<240){if(r+1>=e.length)throw"UTF-8 decode: incomplete 3-byte sequence";n=(15&n)<<12|(63&e[r])<<6|63&e[++r]}else{if(!(239<n&&n<248))throw"UTF-8 decode: unknown multibyte start 0x"+n.toString(16)+" at index "+(r-1);if(r+2>=e.length)throw"UTF-8 decode: incomplete 4-byte sequence";n=(7&n)<<18|(63&e[r])<<12|(63&e[++r])<<6|63&e[++r]}++r}if(n<=65535)t+=String.fromCharCode(n);else{if(!(n<=1114111))throw"UTF-8 decode: code point 0x"+n.toString(16)+" exceeds UTF-16 reach";n-=65536,t+=String.fromCharCode(n>>10|55296),t+=String.fromCharCode(1023&n|56320)}}return t}function uint8ToBase64(e){for(var t="",r=e.byteLength,n=0;n<r;n++)t+=String.fromCharCode(e[n]);return window.btoa(t)}var watchIDGeoLocalizacion="",PermanentPositionWatcher="",currentPosition={Latitud:-.1693638,Longitud:-78.4865797,PosicionInsertar:"["+String(-.1693638)+","+String(-78.4865797)+"]",DummyPosition:!0};function onSuccessGeoposition(e,t){currentPosition={Latitud:e.coords.latitude,Longitud:e.coords.longitude,PosicionInsertar:"["+String(e.coords.latitude)+","+String(e.coords.longitude)+"]",DummyPosition:!1},t&&t(currentPosition),stopLookPositions(),stopProcess()}function downLoadCurrentPositionSync(e,t){initProcess("Obteniendo Posición Actual"),watchIDGeoLocalizacion=navigator.geolocation.getCurrentPosition(function(e){onSuccessGeoposition(e,t)},onErrorGeoposition,{timeout:3e4,enableHighAccuracy:!1})}function onErrorGeoposition(e){stopProcess(),showNotificationError(CORE_MESSAGE("NoGPS")),currentPosition={Latitud:-.1693638,Longitud:-78.4865797,PosicionInsertar:"["+String(-.1693638)+","+String(-78.4865797)+"]",DummyPosition:!0}}function downLoadCurrentPosition(e){initProcess("Obteniendo Posición"),watchIDGeoLocalizacion=navigator.geolocation.getCurrentPosition(onSuccessGeoposition,onErrorGeoposition,{timeout:3e4,enableHighAccuracy:!1}),e&&e(currentPosition),stopProcess()}function lookPositions(){watchIDGeoLocalizacion=navigator.geolocation.watchPosition(onSuccessGeoposition,onErrorGeoposition,{maximumAge:3e3,timeout:3e4,enableHighAccuracy:!1})}var startPositionWatcher=function(e,t,r,n){PermanentPositionWatcher=navigator.geolocation.watchPosition(n,onErrorGeoposition,{maximumAge:e,timeout:t,enableHighAccuracy:r})};function stopLookPositions(){navigator.geolocation.clearWatch(watchIDGeoLocalizacion)}function calculateAndDisplayRoute(e,r,t,n){e.route({origin:t,destination:n,travelMode:google.maps.TravelMode.DRIVING},function(e,t){t===google.maps.DirectionsStatus.OK?r.setDirections(e):window.alert("Directions request failed due to "+t)})}var Request,Vibrate=function(e){navigator.vibrate(e)},VibratePattern=function(e){navigator.vibrate(e)},VibrateWithPattern=function(e){navigator.notification.vibrateWithPattern(e)},intentosConexion=0;function SendPostRequestToService(e,t,r,n){e.DeviceId=DeviceInfo.DeviceUUID;var a,i,o,s="";switch(navigator.connection&&(a=navigator.connection.type||"Simulador",i=navigator.connection.effectiveType||"N/A",o=navigator.connection.downlink?String(navigator.connection.downlink):"N/A",s=navigator.connection.rtt?String(navigator.connection.rtt):"0"),e.NetInfo=a+"_"+i+"_"+o+"_"+s,Parameters.ComMode?e.ComMode=Parameters.ComMode:e.ComMode="2",e.ComMode){case"0":e.Parameters=JSON.stringify(e.Parameters);break;case"1":var l=JSON.stringify(e.Parameters),l=CompressData(l);e.Parameters=uint8ToBase64(l);break;case"2":e.Parameters=encrypt3DES(encodeUTF8(JSON.stringify(e.Parameters)));break;case"3":e.Parameters=CompressData(JSON.stringify(e.Parameters)),e.Parameters=encrypt3DES(e.Parameters)}null!=(Request=e).AppVersion&&Parameters&&(e.AppVersion=Parameters.AppVersion);return r&&r(e.TransactionCode),$.extend(e,{Session:sessionServer}),(void 0===deviceType||"null"===deviceType?n&&"Web"!=n?AjaxPostServiceMobile:AjaxPostService:SSLPinningPost)(e,t,!0)}function SuccessServiceCall(t,r,e){switch(t.ComMode){case"0":break;case"1":t.ResponseElements=decodeUTF8(DecompressData(forge.util.decode64(t.ResponseElements))),t.ResponseElements=JSON.parse(t.ResponseElements);break;case"2":t.ResponseElements=decrypt(t.ResponseElements),t.ResponseElements=JSON.parse(t.ResponseElements);break;case"3":t.ResponseElements=decrypt(t.ResponseElements,!0),t.ResponseElements=DecompressData(t.ResponseElements),t.ResponseElements=JSON.parse(decodeUTF8(t.ResponseElements));break;default:try{var n=JSON.parse(decrypt(t))}catch(e){n={ResponseElements:decrypt(t),TransactionResponseCode:"9999",AditionalCoreMessage:"No se pudo Transformar la respuesta. Error de comunicación se debe analizar la propiedad ResponseElements",TransactionCode:r.TransactionCode,TransactionState:!1}}t=n}if(Parameters.ComMode!=t.ComMode&&(void 0===DeviceInfo.DeviceName||"NombreSimulador"!=DeviceInfo.DeviceName?updateUsersComModde(t.ComMode,function(){console.log("Updated ComMode = ---\x3e data.ComMode")}):Parameters.ComMode=t.ComMode),Parameters.ComMode){switch(r.ComMode){case"0":break;case"1":r.Parameters=JSON.parse(decodeUTF8(DecompressData(forge.util.decode64(r.Parameters))));break;case"2":r.Parameters=JSON.parse(decrypt(r.Parameters));break;case"3":r.Parameters=decrypt(r.Parameters,!0),r.Parameters=DecompressData(r.Parameters),r.Parameters=JSON.parse(decodeUTF8(r.Parameters))}r.ComMode=Parameters.ComMode}else r.Parameters=JSON.parse(decrypt(r.Parameters));e&&($.extend(t,{esRegistro:r.Parameters.esRegistro}),e.handlerError(t,r.Parameters)&&e(t.ResponseElements)),stopProcess()}function AnalizeServerResponse(e){try{if("00"!=e.TransactionResponseCode)throw e;return e.ResponseElements}catch(e){throw e}}function ServiceFailed(e,t,r,n){intentosConexion++;var a="Not recieved",i="Not recieved";if(e&&(a=e.status,i=null!=e.statusText?e.statusText:e.error),401==+a)r.handlerError({TransactionResponseCode:"UnAuthorized_401",AditionalCoreMessage:"La sesión ha caducado, debes iniciarla nuevamente."},void 0);else if(500==+a&&i.contains("handshake failed")&&(SSLPinningEnableSSLPinning(!1),SSLPinningAcceptAllCerts(!0),SSLPinningValidateDomainName(!1)),intentosConexion<2){switch(t.ComMode){case"0":t.Parameters=JSON.parse(t.Parameters);break;case"1":t.Parameters=JSON.parse(decodeUTF8(DecompressData(forge.util.decode64(t.Parameters))));break;case"2":t.Parameters=JSON.parse(decrypt(t.Parameters));break;case"3":t.Parameters=decrypt(t.Parameters,!0),t.Parameters=DecompressData(t.Parameters),t.Parameters=JSON.parse(decodeUTF8(t.Parameters));break;default:t=JSON.parse(decrypt(t))}stopProcess(),SendPostRequestToService(t,r,function(){LoadScreen(Request,!0)})}else intentosConexion=0,stopProcess(),showErrorMessage("Error de Conexión","Error de conexión, por favor REVISA que estes conectado a una red de datos y/o que tengas conexión con tu proveedor de internet e intenta más tarde. Estado: "+String(a)+" Estado Texto: "+i)}function AjaxPostService(t,r,n,e){try{var a=$.ajax({type:"POST",dataType:"json",scriptCharset:"utf-8",url:t.URL+"/api/"+t.Controller,data:t,headers:{Authorization:"Bearer "+Parameters.JWT},success:function(e){SuccessServiceCall(e,t,r)},error:function(e){ServiceFailed(e,t,r,n)},async:n});if(0==n){var i=decrypt(a.responseJSON);return AnalizeServerResponse(JSON.parse(decodeURIComponent(escape(i))))}}catch(e){throw e}}function AjaxPostServiceMobile(t,r,n,e){try{$.ajax({type:"POST",dataType:"json",scriptCharset:"utf-8",url:Parameters.ServiceUri,data:t,headers:{Authorization:"Bearer "+Parameters.JWT},success:function(e){SuccessServiceCall(e,t,r)},error:function(e){ServiceFailed(e,t,r,n)},async:n})}catch(e){throw e}}function SSLPinningEnableSSLPinning(e){cordovaHTTP.enableSSLPinning(e,function(){},function(){alert("error :(")})}function SSLPinningAcceptAllCerts(e){cordovaHTTP.acceptAllCerts(e,function(){},function(){alert("error :(")})}function SSLPinningPost(e,t,r){try{var n={ComMode:e.ComMode,DeviceId:e.DeviceId,AppVersion:e.AppVersion,AppID:e.AppID,Controller:e.Controller,TransactionDescription:e.TransactionDescription,TransactionCode:e.TransactionCode,Parameters:e.Parameters,Session:e.Session,NetInfo:e.NetInfo};if(cordovaHTTP.post(Parameters.ServiceUri,n,{Authorization:"Bearer "+Parameters.JWT},function(e){SuccessServiceCall(JSON.parse(e.data),n,t)},function(e){ServiceFailed(e.data,n,t,r)}),0==r){var a=decrypt(ResponsePinningCall.responseJSON);return AnalizeServerResponse(JSON.parse(decodeURIComponent(escape(a))))}}catch(e){throw e}}function SSLPinningGet(e){try{cordovaHTTP.get(Parameters.ServiceUri,e,{Authorization:"Bearer "+Parameters.JWT},SSLPinningSuccessCallBack,SSLPinningErrorCallBack)}catch(e){throw e}}function SSLPinningUploadFile(e,t,r){try{cordovaHTTP.uploadFile(Parameters.ServiceUri,e,{Authorization:"Bearer "+Parameters.JWT},t,r,SSLPinningSuccessCallBack,SSLPinningErrorCallBack)}catch(e){throw e}}function SSLPinningDownloadFile(e,t){try{cordovaHTTP.downloadFile(Parameters.ServiceUri,e,{Authorization:"Bearer "+Parameters.JWT},t,SSLPinningSuccessCallBack,SSLPinningErrorCallBack)}catch(e){throw e}}function SSLPinningErrorCallBack(e){console.error(e.status),console.error(e.error)}function SSLPinningSuccessCallBack(e){console.log(e.status);try{e.data=JSON.parse(e.data),console.log(e.data.message)}catch(e){console.error("JSON parsing error")}}